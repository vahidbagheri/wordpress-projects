(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["linkReports"],{a924:function(t,e,a){},aec2:function(t,e,a){"use strict";a("a924")},f7e8:function(t,e,a){"use strict";a.r(e);var n=a("0798"),s=a("c6a6"),i=a("8336"),r=a("b0af"),o=a("99d9"),l=a("cc20"),c=a("62ad"),u=a("8fea"),d=a("132d"),p=a("8860"),m=a("da13"),h=a("5d23"),f=a("490a"),b=a("0fd9"),g=a("b974"),y=a("8654"),v=a("3a2f"),D=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"my-12 px-4"},[e(r["a"],{staticClass:"pt-4 moreRadius button",attrs:{flat:"",tile:""}},[e(o["d"],[t._v(t._s(t.$t("reportLink")))]),e(b["a"],{staticClass:"px-5"},[e(c["a"],{attrs:{cols:"12"}},[e("date-picker",{ref:"Datepicker",attrs:{locale:t.locale,label:t.$t("fromDate"),startLabel:t.$t("fromDate"),endLabel:t.$t("toDate"),dense:"",clearable:"",height:44,"locale-config":{fa:{inputFormat:"jdddd jYYYY/jMM/jDD "},en:{inputFormat:"dddd YYYY/MM/DD "}},selectSource:t.selectSource,modal:!0,to:t.todayJ,"auto-submit":!1},on:{focus:function(e){t.selectSource=1},changeLocales:t.getDatePickerLocale,rangeBegin:t.rangeBegin},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1),e(c["a"],{attrs:{cols:"12"}},[e(y["a"],{staticClass:"moreRadius input",attrs:{label:t.$t("toDate"),readonly:"",outlined:"","clear-icon":"icon-remove icon-18 grey--text",dense:"",clearable:"","hide-details":"auto",height:44,"locale-config":{fa:{inputFormat:"jdddd jYYYY/jMM/jDD "}}},on:{click:function(e){t.$refs.Datepicker.showPicker("input"),t.selectSource=2}},scopedSlots:t._u([{key:"prepend-inner",fn:function(){return[e("i",{staticClass:"homepage-icon-color pl-1 icon-calendar",staticStyle:{"pointer-events":"none"}})]},proxy:!0}]),model:{value:t.displayEndDate,callback:function(e){t.displayEndDate=e},expression:"displayEndDate"}})],1),e(c["a"],{staticClass:"pb-0",attrs:{cols:"12",md:"2"}},[e(g["a"],{staticClass:"caption moreRadius input status",attrs:{outlined:"",label:t.$t("status"),items:t.status,"item-text":"name","hide-details":"auto","menu-props":{"offset-y":!0,closeOnClick:!0},"append-icon":"icon-chevron-down icon-18",dense:"",attach:".status","item-value":"value",height:44},model:{value:t.statusId,callback:function(e){t.statusId=e},expression:"statusId"}})],1),e(c["a"],{staticClass:"pb-0",attrs:{cols:"12",md:"2"}},[e(s["a"],{staticClass:"caption moreRadius input buyers",staticStyle:{"font-size":"13px"},attrs:{items:t.buyers,"cache-items":!1,"no-filter":"",outlined:"",attach:".buyers","hide-details":"auto",dense:"","menu-props":{"offset-y":!0,closeOnClick:!0},clearable:"","clear-icon":"icon-remove icon-18","append-icon":"","search-input":t.buyerInput,"hide-no-data":"","return-object":"",label:t.$t("userSender"),height:44},on:{"update:searchInput":function(e){t.buyerInput=e},"update:search-input":function(e){t.buyerInput=e}},scopedSlots:t._u([{key:"item",fn:function(a){return[e(p["a"],{staticClass:"pa-0",attrs:{width:"100%"}},[e(m["a"],{staticClass:"pa-0"},[e(h["a"],{staticClass:"py-0",staticStyle:{direction:"ltr","text-align":"initial"}},[e(h["c"],{staticClass:"caption mb-0"},[t._v(" "+t._s(a.item.Name)+" "+t._s(a.item.Family)+" "),e(l["a"],{attrs:{small:""}},[t._v(" "+t._s(a.item.Mobile)+" ")])],1)],1)],1)],1)]}},{key:"selection",fn:function(a){return[e(p["a"],{staticClass:"pa-0",attrs:{width:"100%"}},[e(m["a"],{staticClass:"pa-0"},[e(h["a"],{staticClass:"py-0",staticStyle:{direction:"ltr","text-align":"initial"}},[e(h["c"],{staticClass:"caption mb-0"},[t._v(" "+t._s(a.item.Name)+" "+t._s(a.item.Family)+" "),e(l["a"],{attrs:{small:""}},[t._v(" "+t._s(a.item.Mobile)+" ")])],1)],1)],1)],1)]}}]),model:{value:t.buyer,callback:function(e){t.buyer=e},expression:"buyer"}})],1),e(c["a"],{staticClass:"pb-0",attrs:{cols:"12",md:"2"}},[e(y["a"],{staticClass:"moreRadius input",staticStyle:{"font-size":"13px"},attrs:{label:t.$t("userGiver"),"hide-details":"",type:"number",outlined:"",height:44,dense:"",clearable:""},model:{value:t.giver,callback:function(e){t.giver=e},expression:"giver"}})],1),e(c["a"],{staticClass:"pb-0",attrs:{cols:"12",md:"2"}},[e(y["a"],{staticClass:"moreRadius input",staticStyle:{"font-size":"13px"},attrs:{label:t.$t("flightNumber"),"hide-details":"",type:"number",outlined:"",height:44,dense:"",clearable:""},model:{value:t.flightNumber,callback:function(e){t.flightNumber=e},expression:"flightNumber"}})],1),e(c["a"],{staticClass:"pb-0",attrs:{cols:"12",md:"2"}},[e("date-picker",{attrs:{locale:t.locale,label:t.$t("departureDate"),dense:"",clearable:"",height:44,"locale-config":{fa:{inputFormat:"jdddd jYYYY/jMM/jDD "},en:{inputFormat:"dddd YYYY/MM/DD "}},selectSource:t.selectSource,"auto-submit":!0},on:{focus:function(e){t.selectSource=1},changeLocales:t.getDatePickerLocale},model:{value:t.travelDate,callback:function(e){t.travelDate=e},expression:"travelDate"}})],1),e(c["a"],{staticClass:"pr-0",attrs:{cols:"12",md:"2"}},[e(i["a"],{staticClass:"py-2 px-7 moreRadius button",attrs:{color:"buttons",dark:"",width:"150","x-large":"",height:"42",depressed:""},on:{click:t.getData}},[t._v(" "+t._s(t.$t("search"))+" ")])],1)],1)],1),t.dataLoading?e(f["a"],{staticClass:"mx-auto d-block mt-5",attrs:{indeterminate:"",size:"44"}}):t._e(),!t.dataLoading&&t.items.length>0?e(u["a"],{staticClass:"mt-5",attrs:{headers:t.headers,items:t.items},scopedSlots:t._u([{key:"item.row",fn:function({index:e}){return[t._v(" "+t._s(t._f("simplePersian")(e+1,t.$i18n.locale))+" ")]}},{key:"item.Owner",fn:function({item:a}){return[e("span",[t._v(" "+t._s(a.Owner)+" "+t._s(a.Username)+" ")])]}},{key:"item.mobile",fn:function({item:a}){return[e("span",[t._v(t._s(a.mobile?a.mobile:a.email))])]}},{key:"item.createdAt",fn:function({item:a}){return[e("span",[t._v(t._s(t.showDate(a.createdAt)))])]}},{key:"item.expiredAt",fn:function({item:a}){return[e("span",[t._v(t._s(t.showDate(a.expiredAt)))])]}},{key:"item.status",fn:function({item:a}){return[e("span",[t._v(t._s(t.statusName(a.status,a.contractStatus)))])]}},{key:"item.DepartureDateTime",fn:function({item:a}){return[a.DepartureDateTime?e("div",[t._v(" "+t._s(t.getDepartureDateTime(a.DepartureDateTime))+" ")]):t._e(),a.FlightNumber?e("div",[t._v(" "+t._s(a.FlightNumber)+" ")]):t._e()]}},{key:"item.RetDepartureDateTime",fn:function({item:a}){return[a.RetDepartureDateTime?e("div",[t._v(" "+t._s(t.getDepartureDateTime(a.RetDepartureDateTime))+" ")]):t._e(),a.RetFlightNumber?e("div",[t._v(" "+t._s(a.RetFlightNumber)+" ")]):t._e()]}},{key:"item.redirectSessionId",fn:function({item:a}){return[e(i["a"],{attrs:{depressed:""},on:{click:function(e){return t.goToSession(a.redirectSessionId)}}},[e(v["a"],{attrs:{"open-on-click":"",top:"",color:"#002244"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:n}){return[e(d["a"],t._g(t._b({staticClass:"icon-info-circle pa-1",attrs:{size:"16"}},"v-icon",n,!1),a))]}}],null,!0)},[e("span",[t._v(t._s(a.redirectSessionId))])])],1)]}},{key:"item.serial",fn:function({item:a}){return[a.serial?e(i["a"],{attrs:{depressed:""},on:{click:function(e){return t.goToContracts(a.serial)}}},[t._v(t._s(a.serial))]):e("span",[t._v("-")])]}}],null,!0)}):t._e(),t.dataLoading||t.items.length?t._e():e("div",{staticClass:"no-data-msg my-3"},[t.dataLoading||0!=t.items.length?t._e():e(n["a"],{staticClass:"body-1 mx-auto text-center",attrs:{text:"",border:"left",color:"#FF791F"}},[e("span",[t._v(t._s(t.$t("noDataFound")))])])],1)],1)},_=[],k=a("60a3"),x=a("5c1f"),S=function(){var t=function(e,a){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])},t(e,a)};return function(e,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),$=function(t,e,a,n){var s,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(r=(i<3?s(r):i>3?s(e,a,r):s(e,a))||r);return i>3&&r&&Object.defineProperty(e,a,r),r},w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selectSource=1,e.startDate="",e.travelDate="",e.dpLocale="fa",e.dataLoading=!1,e.items=[],e.buyers=[],e.buyerInput="",e.buyer={Id:-1},e.giver=null,e.status=[],e.statusId=null,e.flightNumber=null,e.sendStatus=null,e.headers=[{text:"#",value:"row",align:"center",sortable:!1},{text:e.$t("nameSender"),align:"center",sortable:!1,value:"Owner"},{text:e.$t("nameGiver"),align:"center",sortable:!1,value:"mobile"},{text:e.$t("createAt"),align:"center",sortable:!0,value:"createdAt"},{text:e.$t("expirationDate"),align:"center",sortable:!1,value:"expiredAt"},{text:e.$t("status"),align:"center",sortable:!1,value:"status"},{text:e.$t("adult"),align:"center",sortable:!1,value:"ADT"},{text:e.$t("child"),align:"center",sortable:!1,value:"CHD"},{text:e.$t("totalLink"),align:"center",sortable:!1,value:"total"},{text:e.$t("dataFlightNumber"),align:"center",sortable:!1,value:"DepartureDateTime"},{text:e.$t("returnFlightNumberDate"),align:"center",sortable:!1,value:"RetDepartureDateTime"},{text:e.$t("sessionId"),align:"center",sortable:!1,value:"redirectSessionId"},{text:e.$t("redirectAccountId"),align:"center",sortable:!1,value:"serial"}],e}return S(e,t),e.prototype.created=function(){this.startDate=[this.todayG,this.todayG]},e.prototype.mounted=function(){this.initializeHeaders()},Object.defineProperty(e.prototype,"todayJ",{get:function(){return(new this.$persianDate).calendar("j").toString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"todayG",{get:function(){return(new this.$persianDate).calendar("g").toString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endDate",{get:function(){return 0!=this.startDate.length?this.startDate[1]:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayEndDate",{get:function(){var t;if(this.endDate){var e="fa"==this.dpLocale?"jdddd jYYYY/jMM/jDD":"dddd YYYY/MM/DD";return null===(t=this.$options.filters)||void 0===t?void 0:t.simplePersian(new this.$persianDate(this.endDate).toString(e),this.dpLocale)}return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"locale",{get:function(){return"fa"==this.$i18n.locale?"fa,en":"en,fa"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lang",{get:function(){var t=this.$store.getters["authStore/base"],e=this.$store.getters["authStore/siteLanguage"],a="";return t.siteLanguage!==e&&(a="/"+e),a},enumerable:!1,configurable:!0}),e.prototype.onBuyerChange=function(t){var e=this;t&&t.length>2?this.axios(this.$store.state.baseUrl+"user?q="+t).then((function(t){e.buyers=t.data.Items})):this.buyers=[]},e.prototype.rangeBegin=function(){this.$set(this.startDate,1,"")},e.prototype.getDatePickerLocale=function(t){this.dpLocale=t},e.prototype.getData=function(){var t=this;this.dataLoading=!0;var e=this.$store.state.baseUrl+"report/linkreport?StartDate=".concat(this.startDate[0],"&EndDate=").concat(this.endDate,"&AccountId=").concat(this.buyer&&this.buyer.Id?this.buyer.Id:-1);null!==this.giver&&(e+="&Mobile="+this.giver),null!==this.flightNumber&&(e+="&FlightNumber="+this.flightNumber),this.travelDate&&(e+="&TravelDate="+this.travelDate[0]),null!==this.statusId&&(e+="&Status="+this.getStatus(this.statusId)),null!==this.statusId&&(e+="&ContractStatus="+this.getContractStatus(this.statusId)),this.axios.get(e).then((function(e){t.items=e.data.Items,t.dataLoading=!1}))},e.prototype.showDate=function(t){var e,a=t.split(" "),n="jYYYY/jMM/jDD";a[0]=null===(e=this.$options.filters)||void 0===e?void 0:e.simplePersian(new this.$persianDate(a[0]).toString(n));var s=a[1]+" "+a[0];return s},e.prototype.getDepartureDateTime=function(t){var e,a=t.replace("T"," "),n=a.split(" "),s=t.split("T")[1],i=s.replace(/:\d\d( |$)/,""),r="jYYYY/jMM/jDD";n[0]=null===(e=this.$options.filters)||void 0===e?void 0:e.simplePersian(new this.$persianDate(n[0]).toString(r));var o=i+" "+n[0];return o},e.prototype.getStatus=function(t){switch(t){case"all":return this.sendStatus="All";case"expired":return this.sendStatus="expired";case"created":return this.sendStatus="created";case"paymented":return this.sendStatus="booked";case"ticketed":return this.sendStatus="booked"}},e.prototype.getContractStatus=function(t){switch(t){case"all":return this.sendStatus="All";case"expired":return this.sendStatus="All";case"created":return this.sendStatus="All";case"paymented":return this.sendStatus="created";case"ticketed":return this.sendStatus="paymented"}},e.prototype.statusName=function(t,e){if("booked"==t)switch(e){case"created":return this.$t("completing");case"paymented":return this.$t("ticketed")}else switch(t){case"expired":return this.$t("expired");case"created":return this.$t("awaitingCompletion")}},e.prototype.statusContract=function(t){switch(t){case"created":return this.$t("created");case"paymented":return this.$t("paymented");case"":return"-"}},e.prototype.goToSession=function(t){var e="".concat(window.location.origin).concat(this.lang,"/book?id=").concat(t);window.open(e,"_blank")},e.prototype.goToContracts=function(t){var e="".concat(window.location.origin).concat(this.lang,"/contracts?contractNumber=").concat(t);window.open(e,"_blank")},e.prototype.initializeHeaders=function(){this.status=[{name:this.$t("all"),value:"all"},{name:this.$t("expired"),value:"expired"},{name:this.$t("awaitingCompletion"),value:"created"},{name:this.$t("completing"),value:"paymented"},{name:this.$t("ticketed"),value:"ticketed"}]},$([Object(k["e"])("buyerInput")],e.prototype,"onBuyerChange",null),e=$([Object(k["a"])({components:{datePicker:x["b"]}})],e),e}(k["d"]),C=w,j=C,Y=(a("aec2"),a("2877")),I=Object(Y["a"])(j,D,_,!1,null,"2b977968",null);e["default"]=I.exports}}]);