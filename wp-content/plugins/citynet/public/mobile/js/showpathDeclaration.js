(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["showpathDeclaration"],{"16d4e":function(t,i,e){"use strict";e("6e0b")},"2db4":function(t,i,e){"use strict";e("ca71");var a=e("8dd9"),s=e("a9ad"),n=e("7560"),o=e("f2e7"),r=e("fe6c"),c=e("58df"),l=e("80d2"),d=e("d9bd");i["a"]=Object(c["a"])(a["a"],s["a"],o["a"],Object(r["b"])(["absolute","bottom","left","right","top"])).extend({name:"v-snackbar",props:{app:Boolean,centered:Boolean,contentClass:{type:String,default:""},multiLine:Boolean,text:Boolean,timeout:{type:[Number,String],default:5e3},transition:{type:[Boolean,String],default:"v-snack-transition",validator:t=>"string"===typeof t||!1===t},vertical:Boolean},data:()=>({activeTimeout:-1}),computed:{classes(){return{"v-snack--absolute":this.absolute,"v-snack--active":this.isActive,"v-snack--bottom":this.bottom||!this.top,"v-snack--centered":this.centered,"v-snack--has-background":this.hasBackground,"v-snack--left":this.left,"v-snack--multi-line":this.multiLine&&!this.vertical,"v-snack--right":this.right,"v-snack--text":this.text,"v-snack--top":this.top,"v-snack--vertical":this.vertical}},hasBackground(){return!this.text&&!this.outlined},isDark(){return this.hasBackground?!this.light:n["a"].options.computed.isDark.call(this)},styles(){if(this.absolute||!this.app)return{};const{bar:t,bottom:i,footer:e,insetFooter:a,left:s,right:n,top:o}=this.$vuetify.application;return{paddingBottom:Object(l["h"])(i+e+a),paddingLeft:Object(l["h"])(s),paddingRight:Object(l["h"])(n),paddingTop:Object(l["h"])(t+o)}}},watch:{isActive:"setTimeout",timeout:"setTimeout"},mounted(){this.isActive&&this.setTimeout()},created(){this.$attrs.hasOwnProperty("auto-height")&&Object(d["e"])("auto-height",this),0==this.timeout&&Object(d["d"])('timeout="0"',"-1",this)},methods:{genActions(){return this.$createElement("div",{staticClass:"v-snack__action "},[Object(l["s"])(this,"action",{attrs:{class:"v-snack__btn"}})])},genContent(){return this.$createElement("div",{staticClass:"v-snack__content",class:{[this.contentClass]:!0},attrs:{role:"status","aria-live":"polite"}},[Object(l["s"])(this)])},genWrapper(){const t=this.hasBackground?this.setBackgroundColor:this.setTextColor,i=t(this.color,{staticClass:"v-snack__wrapper",class:a["a"].options.computed.classes.call(this),style:a["a"].options.computed.styles.call(this),directives:[{name:"show",value:this.isActive}],on:{pointerenter:()=>window.clearTimeout(this.activeTimeout),pointerleave:this.setTimeout}});return this.$createElement("div",i,[this.genContent(),this.genActions()])},genTransition(){return this.$createElement("transition",{props:{name:this.transition}},[this.genWrapper()])},setTimeout(){window.clearTimeout(this.activeTimeout);const t=Number(this.timeout);this.isActive&&![0,-1].includes(t)&&(this.activeTimeout=window.setTimeout(()=>{this.isActive=!1},t))}},render(t){return t("div",{staticClass:"v-snack",class:this.classes,style:this.styles},[!1!==this.transition?this.genTransition():this.genWrapper()])}})},"6e0b":function(t,i,e){},b03b:function(t,i,e){"use strict";e.r(i);var a=e("c6a6"),s=e("8336"),n=e("b0af"),o=e("99d9"),r=e("ac7c"),c=e("cc20"),l=e("62ad"),d=e("8fea"),h=e("169a"),u=e("ce7e"),p=e("132d"),m=e("8860"),g=e("da13"),C=e("1800"),y=e("8270"),f=e("5d23"),v=e("0fd9"),b=e("1f4f"),_=e("2db4"),k=e("2fa4"),x=e("8654"),N=function(){var t=this,i=t._self._c;return i("div",{staticStyle:{"background-color":"#f2f2f5"}},[i("form",{ref:"oneway",staticClass:"container pathDeclaration"},[i(v["a"],{},[i(n["a"],{staticClass:"d-flex align-center",staticStyle:{width:"100%","min-height":"120px","border-radius":"5px"},attrs:{flat:""}},[i(v["a"],{staticClass:"justify-space-between px-5"},[i(l["a"],{staticStyle:{position:"relative"},attrs:{cols:"12",md:"4"}},[i(h["a"],{attrs:{width:"500"},on:{"click:outside":t.clearResponses},model:{value:t.afterInsertDialog,callback:function(i){t.afterInsertDialog=i},expression:"afterInsertDialog"}},[i(n["a"],{staticClass:"py-5"},[t.responseCreatedPaths.length?i(o["c"],[i("h5",[t._v("مسیر های ساخته شده")]),i(b["a"],{scopedSlots:t._u([{key:"default",fn:function(){return[i("thead",[i("tr",[i("th",[t._v("مبدا")]),i("th",[t._v("مقصد")])])]),i("tbody",t._l(t.responseCreatedPaths,(function(e){return i("tr",{key:e.name},[i("td",[t._v(t._s(e.origin))]),i("td",[t._v(t._s(e.destination))])])})),0)]},proxy:!0}],null,!1,3291815523)})],1):t._e(),t.responseCreatedPaths.length?i(u["a"]):t._e(),t.responseDuplicatedPaths.length?i(o["c"],[i("h4",{staticClass:"pa-4 font-weight-bold"},[t._v("مسیر تکراری")]),i(b["a"],{scopedSlots:t._u([{key:"default",fn:function(){return[i("thead",[i("tr",[i("th",[t._v("مبدا")]),i("th",[t._v("مقصد")])])]),i("tbody",t._l(t.responseDuplicatedPaths,(function(e){return i("tr",{key:e.name},[i("td",[t._v(t._s(e.origin))]),i("td",[t._v(t._s(e.destination))])])})),0)]},proxy:!0}],null,!1,780259216)})],1):t._e(),i(u["a"]),i(o["a"],[i(k["a"]),i(s["a"],{attrs:{color:"warning"},on:{click:t.clearResponses}},[t._v("بستن")])],1)],1)],1),i(a["a"],{staticClass:"destination moreRadius input",attrs:{label:"فرودگاه مبدا",outlined:"","hide-no-data":"","hide-details":"",items:t.originAirports,"error-messages":t.originErrors,"item-text":"searchKey","return-object":"","search-input":t.searchOriginLocation},on:{"update:searchInput":function(i){t.searchOriginLocation=i},"update:search-input":function(i){t.searchOriginLocation=i},click:function(i){t.origin=""}},scopedSlots:t._u([{key:"item",fn:function(e){return[i(m["a"],{staticClass:"pa-0",attrs:{"two-line":"",width:"100%"}},[i(g["a"],{staticClass:"pa-0"},[i(C["a"],{staticClass:"ml-3 mr-2"},[i(c["a"],{staticClass:"caption primary--text",attrs:{label:"",small:"",outlined:""}},[t._v(" "+t._s(e.item.originalAirportCode.substring(0,3))+" ")])],1),i(f["a"],{staticClass:"py-0",staticStyle:{direction:"ltr","text-align":"initial"}},[i(f["c"],{staticClass:"caption mb-0"},[t._v(t._s(e.item.cityNameEn)+" - "+t._s(e.item.airportNameEn))]),i(f["b"],{staticClass:"caption"},[t._v(t._s(e.item.cityNameFa)+" "+t._s(e.item.airportNameFa?"-":"")+" "+t._s(e.item.airportNameFa))])],1),i(y["a"],{staticClass:"mr-0"},[e.item.isCity?t._e():i(p["a"],{staticClass:"icon-flight-simple icon-18",staticStyle:{transform:"rotate(45deg)"},attrs:{color:"primary"}})],1)],1),i(u["a"])],1)]}},{key:"selection",fn:function(e){return[i(c["a"],{staticClass:"caption white--text",attrs:{label:"",small:"",color:"#d50c6a"}},[t._v(" "+t._s(e.item.originalAirportCode.substring(0,3))+" ")]),i("span",{staticClass:"body-2"},[t._v(" "+t._s(e.item.originalCityNameFa)+" "),e.item.originalCityName?i("span",[t._v("-")]):t._e(),t._v(" "+t._s(e.item.originalCityName)+" ")])]}}]),model:{value:t.origin,callback:function(i){t.origin=i},expression:"origin"}})],1),i(l["a"],{attrs:{cols:"12",md:"4"}},[i(a["a"],{staticClass:"destination moreRadius input",attrs:{label:"فرودگاه مقصد","hide-details":"",outlined:"","hide-no-data":"",items:t.DestAirports,"item-text":"searchKey","return-object":"","search-input":t.searchDestLocation,"error-messages":t.destinationErrors},on:{"update:searchInput":function(i){t.searchDestLocation=i},"update:search-input":function(i){t.searchDestLocation=i},click:function(i){t.destination=""}},scopedSlots:t._u([{key:"item",fn:function(e){return[i(m["a"],{staticClass:"pa-0",attrs:{"two-line":"",width:"100%"}},[i(g["a"],{staticClass:"pa-0"},[i(C["a"],{staticClass:"ml-3 mr-2"},[i(c["a"],{staticClass:"caption primary--text",attrs:{label:"",small:"",outlined:""}},[t._v(" "+t._s(e.item.originalAirportCode.substring(0,3))+" ")])],1),i(f["a"],{staticClass:"py-0",staticStyle:{direction:"ltr","text-align":"initial"}},[i(f["c"],{staticClass:"caption mb-0"},[t._v(t._s(e.item.cityNameEn)+" - "+t._s(e.item.airportNameEn))]),i(f["b"],{staticClass:"caption"},[t._v(t._s(e.item.cityNameFa)+" "+t._s(e.item.airportNameFa?"-":"")+" "+t._s(e.item.airportNameFa))])],1),i(y["a"],{staticClass:"mr-0"},[e.item.isCity?t._e():i(p["a"],{staticClass:"icon-flight-simple icon-18",staticStyle:{transform:"rotate(45deg)"},attrs:{color:"primary"}})],1)],1),i(u["a"])],1)]}},{key:"selection",fn:function(e){return[i(c["a"],{staticClass:"caption white--text",attrs:{label:"",small:"",color:"#d50c6a"}},[t._v(" "+t._s(e.item.originalAirportCode.substring(0,3))+" ")]),i("span",{staticClass:"body-2"},[t._v(" "+t._s(e.item.originalCityNameFa)+" "),e.item.originalCityName?i("span",[t._v("-")]):t._e(),t._v(" "+t._s(e.item.originalCityName)+" ")])]}}]),model:{value:t.destination,callback:function(i){t.destination=i},expression:"destination"}})],1),i(l["a"],{staticClass:"d-flex justify-space-around align-center ml-auto",attrs:{cols:"12",md:"4"}},[i(r["a"],{staticClass:"mr-4 align-self-center col-6 py-0 ml-auto",attrs:{color:"primary",label:"افزودن مسیر مخالف"},model:{value:t.addreturnpath,callback:function(i){t.addreturnpath=i},expression:"addreturnpath"}}),i(s["a"],{staticClass:"col-3 outlined-btn",attrs:{outlined:"",block:!this.$vuetify.breakpoint.mdAndUp},on:{click:t.addPath}},[i("span",{staticClass:"caption"},[t._v("ایجاد")])])],1)],1)],1)],1),i("div",{staticClass:"text-center"},[i(_["a"],{attrs:{top:"",color:t.snackColor},model:{value:t.snackbar,callback:function(i){t.snackbar=i},expression:"snackbar"}},[t._v(" "+t._s(t.addTolistMessage)+" "),i(s["a"],{attrs:{color:"white",text:""},on:{click:function(i){t.snackbar=!1}}},[t._v("بستن")])],1)],1),i(v["a"],{staticClass:"px-3 mb-2"},[i(l["a"],{attrs:{cols:"12",md:"12"}},[i(x["a"],{attrs:{label:"جستجو","hide-details":""},on:{input:t.searchPathsTables},scopedSlots:t._u([{key:"append",fn:function(){return[i(p["a"],{staticClass:"icon-Search icon-18"})]},proxy:!0}])})],1)],1),i(v["a"],[i(d["a"],{staticClass:"routeTable pa-0 col-12",attrs:{headers:t.headers,items:t.filteredRoutes,loading:t.dataLoading,"loading-text":t.$t("pleaseWait"),"no-data-text":t.$t("noItemToShow"),"items-per-page":t.itemsPerPage,"footer-props":{itemsPerPageText:"تعداد ردیف در هر صفحه",itemsPerPageAllText:"همه",showCurrentPage:!0}},scopedSlots:t._u([{key:"item.origin",fn:function(e){return[i("span",{staticClass:"grey--text text--darken-2"},[t._v(t._s(e.item.originName)+" - ")]),i("span",[t._v(t._s(e.item.origin))])]}},{key:"item.originCityName",fn:function(e){return[i("span",{staticClass:"grey--text text--darken-2"},[t._v(t._s(e.item.originCityName)+" - ")]),i("span",[t._v(t._s(e.item.originCity))])]}},{key:"item.destination",fn:function(e){return[i("span",{staticClass:"grey--text text--darken-2"},[t._v(t._s(e.item.destinationName)+" - ")]),i("span",[t._v(t._s(e.item.destination))])]}},{key:"item.destinationCityName",fn:function(e){return[i("span",{staticClass:"grey--text text--darken-2"},[t._v(t._s(e.item.destinationCityName)+" - ")]),i("span",[t._v(t._s(e.item.destinationCity))])]}}])})],1)],1)])},w=[],R=e("bc3a"),D=e.n(R),O=e("b5ae"),L={name:"showpathDeclaration",data:()=>({origin:{},destination:{},originAirports:[],afterInsertDialog:!1,DestAirports:[],searchOriginLocation:null,searchDestLocation:null,addTolistMessage:"",snackbar:!1,addreturnpath:!1,snackColor:"error",search:"",filteredRoutes:[],mainRoutes:[],responseDuplicatedPaths:[],responseCreatedPaths:[],headers:[{text:" ردیف",align:"right",sortable:!1,value:"row"},{text:"فرودگاه مبدا",align:"right",sortable:!1,value:"origin"},{text:"شهر مبدا",align:"right",sortable:!1,value:"originCityName"},{text:"فرودگاه مقصد",align:"right",sortable:!1,value:"destination"},{text:"شهر مقصد",align:"right",sortable:!1,value:"destinationCityName"}],selectedItem:{name:"",id:0},newLevel:{Name:""},dataLoading:!0,creatDialog:!1,editDialog:!1,itemsPerPage:20,pageCount:0,page:1}),mounted(){this.dataLoading=!0,this.getItems().then(()=>{this.dataLoading=!1})},watch:{searchOriginLocation(t){t&&t.length>2&&this.axios(this.$store.state.baseUrl+"airportlist?q="+t).then(t=>{let i=this.airportListSearchKey(t.data.Items);this.originAirports=i.filter(t=>!t.isCity)})},searchDestLocation(t){t&&t.length>2&&this.axios(this.$store.state.baseUrl+"airportlist?q="+t).then(t=>{let i=this.airportListSearchKey(t.data.Items);this.DestAirports=i.filter(t=>!t.isCity)})}},validations:{origin:{required:O["required"]},destination:{required:O["required"]}},computed:{originErrors(){const t=[];return this.$v.origin.$dirty?(!this.$v.origin.required&&t.push("  مبدا الزامی می باشد"),t):t},destinationErrors(){const t=[];return this.$v.destination.$dirty?(!this.$v.destination.required&&t.push("  مقصد الزامی می باشد"),t):t}},methods:{airportListSearchKey(t){return t.forEach(t=>{this.$set(t,"searchKey",t.cityCode+t.airportCode+t.cityNameEn+t.airportNameEn+t.cityNameFa+t.airportNameFa)}),t},async addPath(){if(this.$v.$touch(),this.origin.airportCode&&this.origin.airportCode===this.destination.airportCode)this.addTolistMessage="مبدا و مقصد باید متفاوت باشد",this.origin={},this.destination={},this.snackbar=!0;else if(!this.$v.$error){const t={data:{Route:{Origin:this.origin.airportCode,Destination:this.destination.airportCode,OriginCity:this.origin.cityCode,DestinationCity:this.destination.cityCode}}};if(this.getRoutes(t).then(t=>{t.data.success&&(this.createResponseObject(t.data.Route),this.createResponseDuplicatedObject(t.data.DuplicateRoute),this.afterInsertDialog=!0)}),this.addreturnpath){const t={data:{Route:{Origin:this.destination.airportCode,Destination:this.origin.airportCode,OriginCity:this.destination.cityCode,DestinationCity:this.origin.cityCode}}};this.getRoutes(t).then(t=>{t.data.success&&(this.createResponseObject(t.data.Route),this.createResponseDuplicatedObject(t.data.DuplicateRoute),this.afterInsertDialog=!0)})}}},async getRoutes(t){let i=await D.a.post(this.$store.state.baseUrl+"inventory/routes",{Route:t.data.Route});return i},clearResponses(){this.responseDuplicatedPaths=[],this.responseCreatedPaths=[],this.afterInsertDialog=!1},async getItems(){this.mainRoutes=[],this.dataLoading=!0,await this.axios(this.$store.state.baseUrl+"inventory/routes").then(t=>{t.data.items.forEach((t,i)=>{this.mainRoutes.push({}),this.mainRoutes[i].row=i+1,this.mainRoutes[i].origin=t.origin,this.mainRoutes[i].originName=t.originName,this.mainRoutes[i].destination=t.destination,this.mainRoutes[i].destinationName=t.destinationName,this.mainRoutes[i].originCity=t.originCity,this.mainRoutes[i].originCityName=t.originCityName,this.mainRoutes[i].destinationCity=t.destinationCity,this.mainRoutes[i].destinationCityName=t.destinationCityName,this.mainRoutes[i].orgDestAirport=t.origin+t.destination}),this.dataLoading=!1,this.filteredRoutes=JSON.parse(JSON.stringify(this.mainRoutes))}).catch(t=>{})},createResponseObject(t){t.forEach((t,i)=>{this.responseCreatedPaths.push({origin:t.Origin+"-"+t.OriginCity,destination:t.Destination+"-"+t.DestinationCity})})},createResponseDuplicatedObject(t){t.forEach((t,i)=>{this.responseDuplicatedPaths.push({origin:t.Origin+"-"+t.OriginCity,destination:t.Destination+"-"+t.DestinationCity})})},searchPathsTables(t){this.filteredRoutes=t?this.mainRoutes.filter(i=>i.origin.toLowerCase().includes(t)||i.destination.toLowerCase().includes(t)||i.originName.toLowerCase().includes(t)||i.destinationName.toLowerCase().includes(t)||i.orgDestAirport.toLowerCase().includes(t)):JSON.parse(JSON.stringify(this.mainRoutes))}}},P=L,S=(e("16d4e"),e("2877")),T=Object(S["a"])(P,N,w,!1,null,null,null);i["default"]=T.exports},ca71:function(t,i,e){}}]);