(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["flightManagement"],{"0e36":function(t,e,i){"use strict";i("11f2")},"11f2":function(t,e,i){},"2db4":function(t,e,i){"use strict";i("ca71");var a=i("8dd9"),s=i("a9ad"),l=i("7560"),n=i("f2e7"),c=i("fe6c"),o=i("58df"),r=i("80d2"),d=i("d9bd");e["a"]=Object(o["a"])(a["a"],s["a"],n["a"],Object(c["b"])(["absolute","bottom","left","right","top"])).extend({name:"v-snackbar",props:{app:Boolean,centered:Boolean,contentClass:{type:String,default:""},multiLine:Boolean,text:Boolean,timeout:{type:[Number,String],default:5e3},transition:{type:[Boolean,String],default:"v-snack-transition",validator:t=>"string"===typeof t||!1===t},vertical:Boolean},data:()=>({activeTimeout:-1}),computed:{classes(){return{"v-snack--absolute":this.absolute,"v-snack--active":this.isActive,"v-snack--bottom":this.bottom||!this.top,"v-snack--centered":this.centered,"v-snack--has-background":this.hasBackground,"v-snack--left":this.left,"v-snack--multi-line":this.multiLine&&!this.vertical,"v-snack--right":this.right,"v-snack--text":this.text,"v-snack--top":this.top,"v-snack--vertical":this.vertical}},hasBackground(){return!this.text&&!this.outlined},isDark(){return this.hasBackground?!this.light:l["a"].options.computed.isDark.call(this)},styles(){if(this.absolute||!this.app)return{};const{bar:t,bottom:e,footer:i,insetFooter:a,left:s,right:l,top:n}=this.$vuetify.application;return{paddingBottom:Object(r["h"])(e+i+a),paddingLeft:Object(r["h"])(s),paddingRight:Object(r["h"])(l),paddingTop:Object(r["h"])(t+n)}}},watch:{isActive:"setTimeout",timeout:"setTimeout"},mounted(){this.isActive&&this.setTimeout()},created(){this.$attrs.hasOwnProperty("auto-height")&&Object(d["e"])("auto-height",this),0==this.timeout&&Object(d["d"])('timeout="0"',"-1",this)},methods:{genActions(){return this.$createElement("div",{staticClass:"v-snack__action "},[Object(r["s"])(this,"action",{attrs:{class:"v-snack__btn"}})])},genContent(){return this.$createElement("div",{staticClass:"v-snack__content",class:{[this.contentClass]:!0},attrs:{role:"status","aria-live":"polite"}},[Object(r["s"])(this)])},genWrapper(){const t=this.hasBackground?this.setBackgroundColor:this.setTextColor,e=t(this.color,{staticClass:"v-snack__wrapper",class:a["a"].options.computed.classes.call(this),style:a["a"].options.computed.styles.call(this),directives:[{name:"show",value:this.isActive}],on:{pointerenter:()=>window.clearTimeout(this.activeTimeout),pointerleave:this.setTimeout}});return this.$createElement("div",e,[this.genContent(),this.genActions()])},genTransition(){return this.$createElement("transition",{props:{name:this.transition}},[this.genWrapper()])},setTimeout(){window.clearTimeout(this.activeTimeout);const t=Number(this.timeout);this.isActive&&![0,-1].includes(t)&&(this.activeTimeout=window.setTimeout(()=>{this.isActive=!1},t))}},render(t){return t("div",{staticClass:"v-snack",class:this.classes,style:this.styles},[!1!==this.transition?this.genTransition():this.genWrapper()])}})},"2f19":function(t,e,i){"use strict";i("562b")},"2f99":function(t,e,i){"use strict";i("86bc")},"408c":function(t,e,i){"use strict";i("bc17")},"46b7":function(t,e,i){"use strict";i("6e28")},"562b":function(t,e,i){},"575a":function(t,e,i){"use strict";i("ce32")},"6e28":function(t,e,i){},7679:function(t,e,i){"use strict";i("c79c");var a=i("e4d3"),s=i("7560"),l=i("80d2"),n=i("afdd"),c=i("326d"),o=i("58df");e["a"]=Object(o["a"])(a["a"],s["a"]).extend({name:"v-edit-dialog",props:{cancelText:{default:"Cancel"},large:Boolean,eager:Boolean,persistent:Boolean,saveText:{default:"Save"},transition:{type:String,default:"slide-x-reverse-transition"}},data(){return{isActive:!1}},watch:{isActive(t){t?(this.$emit("open"),setTimeout(this.focus,50)):this.$emit("close")}},methods:{cancel(){this.isActive=!1,this.$emit("cancel")},focus(){const t=this.$refs.content.querySelector("input");t&&t.focus()},genButton(t,e){return this.$createElement(n["a"],{props:{text:!0,color:"primary",light:!0},on:{click:t}},e)},genActions(){return this.$createElement("div",{class:"v-small-dialog__actions"},[this.genButton(this.cancel,this.cancelText),this.genButton(()=>{this.save(this.returnValue),this.$emit("save")},this.saveText)])},genContent(){return this.$createElement("div",{staticClass:"v-small-dialog__content",on:{keydown:t=>{t.keyCode===l["y"].esc&&this.cancel(),t.keyCode===l["y"].enter&&(this.save(this.returnValue),this.$emit("save"))}},ref:"content"},[this.$slots.input])}},render(t){return t(c["a"],{staticClass:"v-small-dialog",class:this.themeClasses,props:{contentClass:"v-small-dialog__menu-content",transition:this.transition,origin:"top right",right:!0,value:this.isActive,closeOnClick:!this.persistent,closeOnContentClick:!1,eager:this.eager,light:this.light,dark:this.dark},on:{input:t=>this.isActive=t},scopedSlots:{activator:({on:e})=>t("div",{staticClass:"v-small-dialog__activator",on:e},[t("span",{staticClass:"v-small-dialog__activator__content"},this.$slots.default)])}},[this.genContent(),this.large?this.genActions():null])}})},"86bc":function(t,e,i){},a5236:function(t,e,i){"use strict";i.r(e);var a=i("c6a6"),s=i("b81c"),l=i("8336"),n=i("b0af"),c=i("99d9"),o=i("ac7c"),r=i("cc20"),d=i("62ad"),u=i("8fea"),h=i("169a"),m=i("ce7e"),p=i("132d"),C=i("8860"),v=i("da13"),g=i("1800"),f=i("8270"),y=i("5d23"),x=i("1baa"),b=i("e449"),_=i("a797"),D=i("490a"),I=i("0fd9"),k=i("b974"),S=i("2db4"),F=i("2fa4"),E=i("71a3"),T=i("fe57"),w=i("9a96"),$=i("8654"),P=i("a844"),O=i("3a2f"),N=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container pt-3",staticStyle:{"font-size":"12px","background-color":"#f2f2f5","min-height":"100vh"}},[e(_["a"],{staticStyle:{"z-index":"50"},attrs:{value:t.overlay}},[e(D["a"],{staticClass:"mr-1",attrs:{indeterminate:"",size:"64"}}),t.$route.query.flightLocks?e("p",{staticClass:"mt-10 text-center"},[t._v(" در حال ثبت "+t._s(t._f("simplePersian")(t.acceptedFlightLocksLenghts,t.$i18n.locale))+" پرواز ")]):e("p",{staticClass:"mt-10 text-center ml-6"},[t._v("در حال جستجو")])],1),e(h["a"],{attrs:{width:"600"},model:{value:t.validationDialog,callback:function(e){t.validationDialog=e},expression:"validationDialog"}},[e(n["a"],[e(c["d"],[t._v("اخطار")]),e(c["c"],t._l(t.validateProblems,(function(i){return e("div",{key:i},[t._v(t._s(i))])})),0),e(c["a"],[e(F["a"]),e(l["a"],{staticClass:"primary white--text",attrs:{depressed:""},on:{click:function(e){t.validationDialog=!1}}},[t._v("بستن")])],1)],1)],1),e(S["a"],{attrs:{color:t.snackbarColor,left:""},scopedSlots:t._u([{key:"action",fn:function({attrs:i}){return[e(l["a"],t._b({attrs:{text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",i,!1),[t._v("بستن")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.snackbarText)+" ")]),e(S["a"],{attrs:{color:t.snackbarCapacityColor,right:""},scopedSlots:t._u([{key:"action",fn:function({attrs:i}){return[e(l["a"],t._b({attrs:{text:""},on:{click:function(e){t.snackbarCapacity=!1}}},"v-btn",i,!1),[t._v("بستن")])]}}]),model:{value:t.snackbarCapacity,callback:function(e){t.snackbarCapacity=e},expression:"snackbarCapacity"}},[t._v(" "+t._s(t.snackbarCapacityText)+" ")]),e(S["a"],{attrs:{color:t.snackbarCostColor},scopedSlots:t._u([{key:"action",fn:function({attrs:i}){return[e(l["a"],t._b({attrs:{text:""},on:{click:function(e){t.snackbarCost=!1}}},"v-btn",i,!1),[t._v("بستن")])]}}]),model:{value:t.snackbarCost,callback:function(e){t.snackbarCost=e},expression:"snackbarCost"}},[t._v(" "+t._s(t.snackbarCostText)+" ")]),e(n["a"],{staticClass:"d-flex justify-center align-start container flex-column px-0",staticStyle:{width:"100%","min-height":"120px","border-radius":"5px"},attrs:{flat:""}},[e(T["a"],{staticClass:"justify-self-right tabRules d-flex flex-column flight-declare-tabs",attrs:{"hide-slider":""}},[e(w["a"],{attrs:{color:"primary"}}),e(E["a"],{staticStyle:{height:"40px",color:"#b7b7b7","letter-spacing":"0px"}},[t._v(" مدیریت نرخ پرواز ")])],1),e("div",{staticClass:"d-flex px-7 flex-column",staticStyle:{width:"100%"}},[e(I["a"],{staticClass:"px-0 pt-0"},[e(d["a"],{staticClass:"pl-1 fligh-tinputs flight-inputs--origin",attrs:{cols:"2"}},[e(a["a"],{staticClass:"leftDirection moreRadius input CDinput flightinputs py-0",staticStyle:{"font-size":"12px"},attrs:{dense:"",clearable:"","menu-props":{offsetY:!0,contentClass:"custom-scroll moreRadius button mt-3"},label:"انتخاب مسیر مبدا",attach:".flight-inputs--origin","append-icon":"icon-chevron-down icon-18","hide-no-data":"",outlined:"","error-messages":t.originError,items:t.origins,"return-object":""},on:{keydown:function(e){t.pathselect.origin=""},click:function(e){t.pathselect.origin=""}},scopedSlots:t._u([{key:"item",fn:function(i){return[e(C["a"],{attrs:{width:"100%"}},[e(v["a"],{staticClass:"pl-2 pa-0 d-flex justify-center"},[e(y["a"],{staticClass:"py-0"},[e(y["c"],{staticClass:"caption mb-0 dir-ltr"},[t._v(" "+t._s(i.item)+" ")])],1)],1)],1)]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"d-flex",on:{click:function(e){t.pathselect.origin=""}}},[e(r["a"],{staticClass:"caption white--text",attrs:{label:"",small:"",color:"#d50c6a"}},[t._v(t._s(i.item))])],1)]}}]),model:{value:t.pathselect.origin,callback:function(e){t.$set(t.pathselect,"origin",e)},expression:"pathselect.origin"}})],1),e(d["a"],{staticClass:"pl-1 fligh-tinputs flight-inputs--destination",attrs:{cols:"2"}},[e(a["a"],{staticClass:"leftDirection moreRadius input CDinput flightinputs py-0",staticStyle:{"font-size":"12px"},attrs:{dense:"",label:"انتخاب مسیر مقصد","append-icon":"icon-chevron-down icon-18","hide-no-data":"",outlined:"","menu-props":{offsetY:!0,contentClass:"custom-scroll moreRadius button mt-3"},attach:".flight-inputs--destination",clearable:"","error-messages":t.originError,items:t.destinations},on:{keydown:function(e){t.pathselect.destination=""},click:function(e){t.pathselect.destination=""}},scopedSlots:t._u([{key:"item",fn:function(i){return[e(C["a"],{staticClass:"pr-10",attrs:{width:"100%"}},[e(v["a"],{staticClass:"pl-2 pa-0 d-flex justify-center"},[e(y["a"],{staticClass:"py-0",staticStyle:{direction:"ltr","text-align":"initial"}},[e(y["c"],{staticClass:"caption mb-0 pl-5"},[t._v(" "+t._s(i.item)+" ")])],1)],1)],1)]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"d-flex",on:{click:function(e){t.pathselect.destination=""}}},[e(r["a"],{staticClass:"caption white--text",attrs:{label:"",small:"",color:"#d50c6a"}},[t._v(t._s(i.item))])],1)]}}]),model:{value:t.pathselect.destination,callback:function(e){t.$set(t.pathselect,"destination",e)},expression:"pathselect.destination"}})],1),e(d["a"],{staticClass:"px-1 datepickerCenter",attrs:{cols:"2"}},[e("date-picker",{ref:"Datepicker",attrs:{locale:t.$locale,label:"از تاریخ",startLabel:"از تاریخ",dense:"",endLabel:"تا تاریخ","locale-config":{fa:{inputFormat:"jYYYY/jMM/jDD"},en:{inputFormat:"dddd YYYY-MM-DD"}},format:"YYYY-MM-DD",selectSource:t.selectSource,modal:!0,"auto-submit":!0},on:{focus:function(e){t.selectSource=1},rangeBegin:t.rangeBegin},model:{value:t.datesEdit,callback:function(e){t.datesEdit=e},expression:"datesEdit"}})],1),e(d["a"],{staticClass:"px-1 moreRadius input datepickerCenter",attrs:{cols:"2"}},[e($["a"],{staticClass:"font-size-13 font-weight-300",attrs:{label:"تا تاریخ",readonly:"",outlined:"",dense:""},on:{click:function(e){t.$refs.Datepicker.showPicker("input"),t.selectSource=2}},scopedSlots:t._u([{key:"prepend-inner",fn:function(){return[e("i",{staticClass:"homepage-icon-color pl-1 icon-calendar",staticStyle:{"pointer-events":"none"}})]},proxy:!0}]),model:{value:t.displayRetDate,callback:function(e){t.displayRetDate=e},expression:"displayRetDate"}})],1),e(d["a"],{staticClass:"px-1 moreRadius input",attrs:{cols:"2"}},[e($["a"],{ref:"picker",staticClass:"flightinputs",staticStyle:{"font-size":"12px"},attrs:{dense:"","background-color":"#ffffff",label:t.$t("flightNumber"),"hide-details":"",outlined:""},model:{value:t.flightNumber,callback:function(e){t.flightNumber=e},expression:"flightNumber"}})],1),e(d["a"],{staticClass:"px-1 moreRadius input",attrs:{cols:"2",md:"2"}},[e(a["a"],{staticClass:"airlineInput cabin pl-0",attrs:{dense:"",outlined:"","hide-details":"",label:t.$t("selectAirline"),"hide-no-data":"","append-icon":"icon-chevron-down",items:t.airlines,"item-text":"searchAirlines","return-object":"","search-input":t.searchAirlines},on:{click:function(e){t.airline=""},"update:searchInput":function(e){t.searchAirlines=e},"update:search-input":function(e){t.searchAirlines=e}},scopedSlots:t._u([{key:"item",fn:function(i){return[e(C["a"],{staticClass:"pa-0",attrs:{width:"100%"}},[e(v["a"],[i.item.iata?e(g["a"],{staticClass:"ml-3 mr-2"},[e(r["a"],{staticClass:"caption cabin primary--text",attrs:{label:"",small:"",outlined:""}},[t._v(t._s(i.item.iata))])],1):t._e(),e(y["a"],{staticStyle:{direction:"ltr","text-align":"initial","max-width":"-webkit-fill-available"}},[e(y["c"],{staticClass:"caption mb-0",staticStyle:{width:"min-content"}},[t._v(t._s(i.item.name))])],1),e(f["a"],{staticClass:"ma-0"},[e(p["a"],{staticClass:"icon-flight-simple icon-18",attrs:{color:"primary"}})],1)],1)],1)]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"caption"},[t._v(t._s(i.item.name))]),i.item.iata?e("span",{},[e(r["a"],{staticClass:"caption white--text",attrs:{label:"",small:"",color:"#d50c6a"}},[t._v(t._s(i.item.iata))])],1):t._e()]}}]),model:{value:t.airline,callback:function(e){t.airline=e},expression:"airline"}})],1),e(d["a"],{staticClass:"pt-3 pl-1 moreRadius input",attrs:{cols:"2"}},[e(k["a"],{staticClass:"caption",attrs:{items:["Economy","Business","FirstClass","Premium","All"],outlined:"",dense:"","append-icon":"icon-chevron-down","hide-no-data":"","hide-details":"",label:t.$t("cabinClass")},model:{value:t.CabinClass,callback:function(e){t.CabinClass=e},expression:"CabinClass"}})],1),e(d["a"],{staticClass:"pl-1",attrs:{cols:"2"}},[e(k["a"],{staticClass:"caption moreRadius input",attrs:{items:[{text:"همه",value:"-1"},{text:"سهمیه",value:"1"},{text:"غیرسهمیه",value:"0"}],outlined:"","append-icon":"icon-chevron-down",dense:"","hide-no-data":"","hide-details":"","item-text":"text","item-value":"value",label:"نوع"},model:{value:t.QuotaOnSearchField,callback:function(e){t.QuotaOnSearchField=e},expression:"QuotaOnSearchField"}})],1),e(d["a"],{staticClass:"px-1",class:t.$vuetify.rtl?"mr-auto":"ml-auto",attrs:{cols:"12",md:"2"}},[e(l["a"],{staticClass:"moreRadius button",staticStyle:{height:"40px"},attrs:{dark:"",depressed:"",color:"buttons",block:""},on:{click:t.searchFlights}},[t._v("جستجو")])],1)],1)],1),t.tableFlights.length||t.searchTable?e("div",{staticClass:"d-flex px-7 flex-column mt-5",staticStyle:{width:"100%"}},[e(m["a"],{staticStyle:{width:"100%"}}),e(I["a"],{staticClass:"mt-4"},[e(l["a"],{staticClass:"mx-2",attrs:{depressed:"",color:t.collectiveDetailEdit?"primary":""},on:{click:function(e){t.collectiveDetailEdit=!t.collectiveDetailEdit,t.collectiveCapacityEdit=!1,t.collectivePriceEdit=!1,t.collectivePriceSubmit=!1}}},[e(p["a"],{staticClass:"icon-edit icon-18",style:[t.collectiveDetailEdit?{color:"white"}:{color:"grey"}],attrs:{size:"15px"}}),e("span",{style:[t.collectiveDetailEdit?{color:"white"}:{color:"grey"}]},[t._v("ویرایش گروهی مشخصات")])],1),e(l["a"],{staticClass:"mx-2",attrs:{depressed:"",color:t.collectiveCapacityEdit?"primary":""},on:{click:function(e){t.collectiveCapacityEdit=!t.collectiveCapacityEdit,t.collectiveDetailEdit=!1,t.collectivePriceEdit=!1,t.collectivePriceSubmit=!1}}},[e(p["a"],{staticClass:"icon-edit icon-18",style:[t.collectiveCapacityEdit?{color:"white"}:{color:"grey"}],attrs:{size:"15px"}}),e("span",{style:[t.collectiveCapacityEdit?{color:"white"}:{color:"grey"}]},[t._v("ویرایش گروهی ظرفیت")])],1),e(l["a"],{staticClass:"mx-2",attrs:{depressed:"",color:t.collectivePriceSubmit?"primary":""},on:{click:function(e){t.collectivePriceSubmit=!t.collectivePriceSubmit,t.collectiveCapacityEdit=!1,t.collectivePriceEdit=!1,t.collectiveDetailEdit=!1}}},[e(p["a"],{staticClass:"icon-edit icon-18",style:[t.collectivePriceSubmit?{color:"white"}:{color:"grey"}],attrs:{size:"15px"}}),e("span",{style:[t.collectivePriceSubmit?{color:"white"}:{color:"grey"}]},[t._v("ثبت گروهی قیمت")])],1),e(l["a"],{staticClass:"mx-2",attrs:{depressed:"",color:t.collectivePriceEdit?"primary":""},on:{click:function(e){t.collectivePriceEdit=!t.collectivePriceEdit,t.collectiveCapacityEdit=!1,t.collectivePriceSubmit=!1,t.collectiveDetailEdit=!1}}},[e(p["a"],{staticClass:"icon-edit icon-18",style:[t.collectivePriceEdit?{color:"white"}:{color:"grey"}],attrs:{size:"15px"}}),e("span",{style:[t.collectivePriceEdit?{color:"white"}:{color:"grey"}]},[t._v("ویرایش گروهی قیمت")])],1)],1),t.collectiveDetailEdit?e(I["a"],{staticClass:"mt-4"},[e(d["a"],{attrs:{cols:"12"}},t._l(t.collectiveDetailsData,(function(i,s){return e("div",{key:s},[e(I["a"],[e(d["a"],{attrs:{cols:"12",md:"2"}},[e($["a"],{staticClass:"flightinputs",staticStyle:{"font-size":"12px"},attrs:{dense:"","background-color":"#ffffff",label:t.$t("flightNumber"),"hide-details":"",outlined:""},model:{value:i.flightNoCollective,callback:function(e){t.$set(i,"flightNoCollective",e)},expression:"collectiveEach.flightNoCollective"}})],1),e(d["a"],{attrs:{cols:"12",md:"3"}},[e(a["a"],{staticClass:"destination cabin",attrs:{dense:"",outlined:"",label:" ایرلاین","hide-no-data":"",items:t.airlines,"item-text":"searchAirlinesCol","return-object":"","hide-details":"","search-input":t.searchAirlinesCol},on:{"update:searchInput":function(e){t.searchAirlinesCol=e},"update:search-input":function(e){t.searchAirlinesCol=e}},scopedSlots:t._u([{key:"item",fn:function(i){return[e(C["a"],{staticClass:"pa-0",attrs:{width:"100%"}},[e(v["a"],[i.item?e(g["a"],{staticClass:"ml-3 mr-2"},[e(r["a"],{staticClass:"caption cabin primary--text",attrs:{label:"",small:"",outlined:""}},[t._v(t._s(i.item?i.item.iata:""))])],1):t._e(),e(y["a"],{staticStyle:{direction:"ltr","text-align":"initial"}},[e(y["c"],{staticClass:"caption mb-0"},[t._v(t._s(i.item?i.item.name:""))])],1),e(f["a"],{staticClass:"mr-0"},[e(p["a"],{staticClass:"icon-flight-simple icon-18",attrs:{color:"primary"}})],1)],1)],1)]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"caption"},[t._v(t._s(i.item?i.item.name:""))]),i.item.iata?e("span",{},[e(r["a"],{staticClass:"caption white--text",attrs:{label:"",small:"",color:"#d50c6a"}},[t._v(t._s(i.item?i.item.iata:""))])],1):t._e()]}}],null,!0),model:{value:i.airlineCollective,callback:function(e){t.$set(i,"airlineCollective",e)},expression:"collectiveEach.airlineCollective"}})],1),e(d["a"],{attrs:{cols:"12",md:"3"}},[e(a["a"],{staticClass:"destination cabinr",attrs:{dense:"",outlined:"",label:" هواپیما","hide-no-data":"","hide-details":"",items:t.airplanes,"item-text":"searchAirplane","return-object":"","search-input":t.searchAirplanes},on:{"update:searchInput":function(e){t.searchAirplanes=e},"update:search-input":function(e){t.searchAirplanes=e}},scopedSlots:t._u([{key:"item",fn:function(i){return[e(C["a"],{staticClass:"pa-0",attrs:{"two-line":"",width:"100%"}},[e(v["a"],[e(y["a"],{staticStyle:{direction:"ltr","text-align":"initial"}},[e(y["c"],{staticClass:"caption mb-0"},[t._v(t._s(i.item.airplaneName))])],1),e(f["a"],{staticClass:"mr-0"},[e(p["a"],{staticClass:"icon-flight-simple icon-18",attrs:{color:"primary"}})],1)],1)],1)]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"caption"},[t._v(t._s(i.item.airplaneName))])]}}],null,!0),model:{value:i.airplaneCollective,callback:function(e){t.$set(i,"airplaneCollective",e)},expression:"collectiveEach.airplaneCollective"}})],1),e(d["a"],{attrs:{cols:"12",md:"2"}},[e("AppTimePicker",{attrs:{attach:"flight-time",hourLabel:t.$t("hour"),minuteLabel:t.$t("minute"),label:t.$t("flightTime")},model:{value:i.flightTimeCollective,callback:function(e){t.$set(i,"flightTimeCollective",e)},expression:"collectiveEach.flightTimeCollective"}})],1),e(d["a"],{attrs:{cols:"12",md:"2"}},[e("AppTimePicker",{attrs:{attach:"flight-duration",hourLabel:t.$t("hour"),minuteLabel:t.$t("minute"),hourMax:20,label:t.$t("travelDuration")},model:{value:i.durationCollective,callback:function(e){t.$set(i,"durationCollective",e)},expression:"collectiveEach.durationCollective"}})],1)],1),e(I["a"],[e(d["a"],{attrs:{cols:"12",md:"12"}},[e(P["a"],{attrs:{label:"توضیحات",outlined:"","hide-details":""},model:{value:i.descriptionCollective,callback:function(e){t.$set(i,"descriptionCollective",e)},expression:"collectiveEach.descriptionCollective"}})],1)],1),e(I["a"],[e(d["a"],{attrs:{cols:"12",md:"2"}},[e($["a"],{attrs:{label:"توقف فروش",outlined:"",dense:"",type:"number","hide-details":""},model:{value:i.closeSaleFlightCollective,callback:function(e){t.$set(i,"closeSaleFlightCollective",e)},expression:"collectiveEach.closeSaleFlightCollective"}})],1),e(d["a"],{attrs:{cols:"12",md:"2"}},[e($["a"],{attrs:{label:"توقف سهمیه",outlined:"",dense:"",type:"number","hide-details":""},model:{value:i.closeSaleFlightQoutaCollective,callback:function(e){t.$set(i,"closeSaleFlightQoutaCollective",e)},expression:"collectiveEach.closeSaleFlightQoutaCollective"}})],1),e(d["a"],{attrs:{cols:"12",md:"2"}},[e($["a"],{attrs:{label:" ارسال لیست",outlined:"",type:"number",dense:"","hide-details":""},model:{value:i.sendListCollective,callback:function(e){t.$set(i,"sendListCollective",e)},expression:"collectiveEach.sendListCollective"}})],1),e(d["a"],{attrs:{cols:"12",md:"2"}},[e(k["a"],{staticClass:"caption",attrs:{items:[{name:"بدون تغییر",value:"-1"},{name:"فعال",value:"1"},{name:"کنسل",value:"0"}],dense:"","item-value":"value","item-text":"name","hide-details":"",outlined:"",label:t.$t("status")},model:{value:i.segmentStatusCollective,callback:function(e){t.$set(i,"segmentStatusCollective",e)},expression:"collectiveEach.segmentStatusCollective"}})],1),e(F["a"]),e(d["a"],{attrs:{cols:"12",md:"2"}},[e(l["a"],{staticStyle:{height:"40px"},attrs:{dark:"",depressed:"",color:"buttons",small:"",disabled:t.collectiveDetailsData.length>4,block:""},on:{click:function(e){return t.collectiveDetailsData.push({flightNoCollective:"",airplaneCollective:"",airlineCollective:"",flightTimeCollective:"",durationCollective:"",closeSaleFlightCollective:"",closeSaleFlightQoutaCollective:"",descriptionCollective:"",sendListCollective:"",segmentStatusCollective:"-1"})}}},[t._v("اضافه کردن مسیر")]),e(l["a"],{staticClass:"mt-2",staticStyle:{height:"40px"},attrs:{dark:"",depressed:"",disabled:t.collectiveDetailsData.length<2,small:"",color:"warning",block:""},on:{click:function(e){return t.removeDetail(s)}}},[t._v("حدف مسیر")])],1)],1),e(I["a"])],1)})),0),e(l["a"],{staticStyle:{height:"40px"},attrs:{dark:"",depressed:"",color:"buttons"},on:{click:t.firstSubmitCollectiveDetails}},[t._v("ثبت اولیه")])],1):t._e(),t.collectiveCapacityEdit?e(I["a"],{staticClass:"mt-4"},[e(d["a"],{attrs:{cols:"12"}},[e(I["a"],[e(d["a"],{attrs:{cols:"12",md:"2"}},[e(k["a"],{staticClass:"caption",attrs:{items:[{name:"Economy",value:"Economy"},{name:"Business",value:"Business"},{name:"FirstClass",value:"FirstClass"},{name:"Premium",value:"Premium"},{name:"بدون تغییر",value:"-1"}],dense:"",outlined:"","item-value":"value","item-text":"name","hide-no-data":"",label:t.$t("cabinClass"),"hide-details":""},model:{value:t.collectiveCapacityData.cabinClassCollective,callback:function(e){t.$set(t.collectiveCapacityData,"cabinClassCollective",e)},expression:"collectiveCapacityData.cabinClassCollective"}})],1),e(d["a"],{attrs:{cols:"12",md:"2"}},[e($["a"],{staticClass:"cabin",attrs:{dense:"",outlined:"",label:"کد کابین","hide-details":"",maxlength:"1"},model:{value:t.collectiveCapacityData.cabinClassCodeCollective,callback:function(e){t.$set(t.collectiveCapacityData,"cabinClassCodeCollective",e)},expression:"collectiveCapacityData.cabinClassCodeCollective"}})],1),e(d["a"],{attrs:{cols:"12",md:"2"}},[e($["a"],{attrs:{label:"ظرفیت ",outlined:"",dense:"","hide-details":""},model:{value:t.collectiveCapacityData.capacityCollective,callback:function(e){t.$set(t.collectiveCapacityData,"capacityCollective",e)},expression:"collectiveCapacityData.capacityCollective"}})],1),e(d["a"],{attrs:{cols:"12",md:"2"}},[e($["a"],{attrs:{label:"ح.ف بلیط تور",type:"number","hide-details":"",outlined:"",dense:""},model:{value:t.collectiveCapacityData.maxTourCollective,callback:function(e){t.$set(t.collectiveCapacityData,"maxTourCollective",e)},expression:"collectiveCapacityData.maxTourCollective"}})],1),e(d["a"],{attrs:{cols:"12",md:"2"}},[e($["a"],{attrs:{label:"ح.ف یک طرفه",type:"number","hide-details":"",outlined:"",dense:""},model:{value:t.collectiveCapacityData.maxOnewayCollective,callback:function(e){t.$set(t.collectiveCapacityData,"maxOnewayCollective",e)},expression:"collectiveCapacityData.maxOnewayCollective"}})],1),e(d["a"],{attrs:{cols:"12",md:"2"}},[e($["a"],{attrs:{label:"ح.ف دو طرفه",type:"number","hide-details":"",outlined:"",dense:""},model:{value:t.collectiveCapacityData.maxRoundtripCollective,callback:function(e){t.$set(t.collectiveCapacityData,"maxRoundtripCollective",e)},expression:"collectiveCapacityData.maxRoundtripCollective"}})],1)],1),e(I["a"],[e(d["a"],{staticClass:"pl-1",staticStyle:{"max-width":"11.5%"},attrs:{cols:"12",md:"2"}},[e(k["a"],{staticClass:"caption",attrs:{items:[{name:"بدون تغییر",value:"-1"},{name:"فعال",value:"1"},{name:"غیر فعال",value:"0"}],dense:"","item-value":"value","item-text":"name","hide-details":"",outlined:"",label:"B2B"},model:{value:t.collectiveCapacityData.BtoBCollective,callback:function(e){t.$set(t.collectiveCapacityData,"BtoBCollective",e)},expression:"collectiveCapacityData.BtoBCollective"}})],1),e(d["a"],{staticClass:"px-1",staticStyle:{"max-width":"11.5%"},attrs:{cols:"12",md:"2"}},[e(k["a"],{staticClass:"caption",attrs:{items:[{name:"بدون تغییر",value:"-1"},{name:"فعال",value:"1"},{name:"غیر فعال",value:"0"}],dense:"","item-value":"value","item-text":"name","hide-details":"",outlined:"",label:"B2C"},model:{value:t.collectiveCapacityData.BtoCCollective,callback:function(e){t.$set(t.collectiveCapacityData,"BtoCCollective",e)},expression:"collectiveCapacityData.BtoCCollective"}})],1),e(d["a"],{staticClass:"px-1",staticStyle:{"max-width":"11.5%"},attrs:{cols:"12",md:"2"}},[e(k["a"],{staticClass:"caption",attrs:{items:[{name:"بدون تغییر",value:"-1"},{name:"فعال",value:"1"},{name:"غیر فعال",value:"0"}],dense:"","item-value":"value","item-text":"name","hide-details":"",outlined:"",label:"موتورهای جستجو"},model:{value:t.collectiveCapacityData.searchEnginesCollective,callback:function(e){t.$set(t.collectiveCapacityData,"searchEnginesCollective",e)},expression:"collectiveCapacityData.searchEnginesCollective"}})],1),e(d["a"],{staticClass:"px-1",staticStyle:{"max-width":"11.5%"},attrs:{cols:"12",md:"2"}},[e(k["a"],{staticClass:"caption",attrs:{items:[{name:"بدون تغییر",value:"-1"},{name:"فعال",value:"1"},{name:"غیر فعال",value:"0"}],dense:"","item-value":"value","item-text":"name","hide-details":"",outlined:"",label:"پرواز تک"},model:{value:t.collectiveCapacityData.singleFlightCollective,callback:function(e){t.$set(t.collectiveCapacityData,"singleFlightCollective",e)},expression:"collectiveCapacityData.singleFlightCollective"}})],1),e(d["a"],{staticClass:"px-1",staticStyle:{"max-width":"11.5%"},attrs:{cols:"12",md:"2"}},[e(k["a"],{staticClass:"caption",attrs:{items:[{name:"بدون تغییر",value:"-1"},{name:"فعال",value:"1"},{name:"غیر فعال",value:"0"}],dense:"","item-value":"value","item-text":"name","hide-details":"",outlined:"",label:"پرواز+هتل"},model:{value:t.collectiveCapacityData.flightAndHotelCollective,callback:function(e){t.$set(t.collectiveCapacityData,"flightAndHotelCollective",e)},expression:"collectiveCapacityData.flightAndHotelCollective"}})],1),e(d["a"],{staticClass:"px-1",staticStyle:{"max-width":"11.5%"},attrs:{cols:"12",md:"2"}},[e(k["a"],{staticClass:"caption",attrs:{items:[{name:"بدون تغییر",value:"-1"},{name:"فعال",value:"1"},{name:"غیر فعال",value:"0"}],dense:"","item-value":"value","item-text":"name","hide-details":"",outlined:"",label:"ثبت خرید"},model:{value:t.collectiveCapacityData.autoBuyCollective,callback:function(e){t.$set(t.collectiveCapacityData,"autoBuyCollective",e)},expression:"collectiveCapacityData.autoBuyCollective"}})],1),e(d["a"],{staticClass:"px-1",staticStyle:{"max-width":"11.5%"},attrs:{cols:"12",md:"2"}},[e(k["a"],{staticClass:"caption",attrs:{items:[{name:"بدون تغییر",value:"-1"},{name:"فعال",value:"1"},{name:"غیر فعال",value:"0"}],dense:"","item-value":"value","item-text":"name","hide-details":"",outlined:"",label:t.$t("status")},model:{value:t.collectiveCapacityData.ClassStatusCollective,callback:function(e){t.$set(t.collectiveCapacityData,"ClassStatusCollective",e)},expression:"collectiveCapacityData.ClassStatusCollective"}})],1),e(F["a"]),e(d["a"],{attrs:{cols:"12",md:"2"}},[e(l["a"],{staticStyle:{height:"40px"},attrs:{dark:"",depressed:"",color:"buttons",block:""},on:{click:t.firstSubmitCollectiveCapacity}},[t._v("ثبت اولیه")])],1)],1)],1)],1):t._e(),t.collectivePriceSubmit?e(I["a"],{staticClass:"mt-4"},[e(d["a"],{staticClass:"px-0",attrs:{cols:"12"}},[t._l(t.costObjCollective.length,(function(i,a){return e("div",{key:i},[e("costDeclare",{attrs:{checkFull:!1,levels:t.levels,numberOfFlights:1,CodeCommissions:t.CodeCommissions,CodeRule:t.CodeRule,baggages:t.baggages,capacity:500,currencies:t.currencies},model:{value:t.costObjCollective[a],callback:function(e){t.$set(t.costObjCollective,a,e)},expression:"costObjCollective[i]"}}),e(l["a"],{directives:[{name:"show",rawName:"v-show",value:t.costObjCollective.length>1,expression:"costObjCollective.length > 1"}],attrs:{fab:"",depressed:"","x-small":""},on:{click:function(e){return t.removeCostObj(a)}}},[e(p["a"],{staticClass:"icon-remove icon-18"})],1)],1)})),e(l["a"],{staticClass:"mr-5",attrs:{depressed:"",color:"#e8e8e8"},on:{click:function(e){return t.costObjCollective.push({})}}},[e(p["a"],{staticClass:"icon-add icon-18",attrs:{"x-small":""}}),e("span",{staticClass:"px-2",staticStyle:{"font-size":"13px"}},[t._v("افزودن کلاس نرخی")])],1)],2),e(F["a"]),e(l["a"],{staticClass:"primary",attrs:{depressed:""},on:{click:t.firstSubmitCollectivePrice}},[t._v(" ثبت اولیه ")])],1):t._e(),t.collectivePriceEdit?e(I["a"],{staticClass:"mt-4"},[e(d["a"],{staticClass:"px-0",attrs:{cols:"12"}},[e("costDeclare",{attrs:{checkFull:t.checkFull,levels:t.levels,disableFromTo:!0,numberOfFlights:1,CodeCommissions:t.CodeCommissions,CodeRule:t.CodeRule,baggages:t.baggages,capacity:null,currencies:t.currencies},model:{value:t.costObjCollectiveEdit,callback:function(e){t.costObjCollectiveEdit=e},expression:"costObjCollectiveEdit"}})],1)],1):t._e()],1):t._e()],1),e(n["a"],{staticStyle:{"border-radius":"5px"},attrs:{flat:""}},[t.tableFlights.length?e(I["a"],{staticClass:"mb-2 flex-column ma-0",staticStyle:{width:"100%"}},[e(d["a"],{staticClass:"px-0 pb-10",attrs:{cols:"12",md:"12"}},[e(u["a"],{staticClass:"editTable col-12 px-0",attrs:{"item-key":"row",items:t.tableFlights,headers:t.headers,"loading-text":t.$t("pleaseWait"),"no-data-text":t.$t("noItemToShow"),"disable-pagination":"","hide-default-footer":"","disable-sort":""},scopedSlots:t._u([{key:"header[`route`]",fn:function({header:i}){return[e("div",{staticClass:"d-flex align-center",class:{"justify-center":!t.isCollectivePrice&&!t.isCollectiveDetail&&!t.isCollectiveCapacity}},[t.isCollectivePrice?e(o["a"],{staticClass:"whiteIcon mr-1",attrs:{dense:"",ripple:!1},model:{value:t.editAllPrices,callback:function(e){t.editAllPrices=e},expression:"editAllPrices"}}):t._e(),t.isCollectiveDetail?e(o["a"],{staticClass:"whiteIcon mr-1",attrs:{dense:"",ripple:!1},model:{value:t.editAllDetails,callback:function(e){t.editAllDetails=e},expression:"editAllDetails"}}):t._e(),t.isCollectiveCapacity?e(o["a"],{staticClass:"whiteIcon mr-1",attrs:{dense:"",ripple:!1},model:{value:t.editAllCapacities,callback:function(e){t.editAllCapacities=e},expression:"editAllCapacities"}}):t._e(),e("span",{staticClass:"mr-5"},[t._v(t._s(i.text))])],1)]}},{key:"header[`DepartureDatetime`]",fn:function({header:i}){return[e("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.customSort("DepartureDatetime")}}},[e("span",[t._v(t._s(i.text))]),"desc"==t.sortby["DepartureDatetime"]?e("i",{staticClass:"v-icon notranslate icon-arrow-up icon-18",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e(),"asc"==t.sortby["DepartureDatetime"]?e("i",{staticClass:"v-icon notranslate icon-arrow-down icon-18",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e()])]}},{key:"header[`Capacity`]",fn:function({header:i}){return[e("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.customSort("Capacity")}}},[e("span",[t._v(t._s(i.text))]),"desc"==t.sortby["Capacity"]?e("i",{staticClass:"v-icon notranslate icon-arrow-up icon-18 theme--light",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e(),"asc"==t.sortby["Capacity"]?e("i",{staticClass:"v-icon notranslate icon-arrow-down icon-18 theme--light",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e()])]}},{key:"header[`Remain`]",fn:function({header:i}){return[e("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.customSort("Remain")}}},[e("span",[t._v(t._s(i.text))]),"desc"==t.sortby["Remain"]?e("i",{staticClass:"v-icon notranslate icon-arrow-up icon-18 theme--light",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e(),"asc"==t.sortby["Remain"]?e("i",{staticClass:"v-icon notranslate icon-arrow-down icon-18 theme--light",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e()])]}},{key:"header[`Lock`]",fn:function({header:i}){return[e("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.customSort("Lock")}}},[e("span",[t._v(t._s(i.text))]),"desc"==t.sortby["Lock"]?e("i",{staticClass:"v-icon notranslate icon-arrow-up icon-18 theme--light",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e(),"asc"==t.sortby["Lock"]?e("i",{staticClass:"v-icon notranslate icon-arrow-down icon-18 theme--light",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e()])]}},{key:"header[`Ticketed`]",fn:function({header:i}){return[e("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.customSort("Ticketed")}}},[e("span",[t._v(t._s(i.text))]),"desc"==t.sortby["Ticketed"]?e("i",{staticClass:"v-icon notranslate icon-arrow-up icon-18 theme--light",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e(),"asc"==t.sortby["Ticketed"]?e("i",{staticClass:"v-icon notranslate icon-arrow-down icon-18 theme--light",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e()])]}},{key:"header[`Reserve`]",fn:function({header:i}){return[e("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.customSort("Reserve")}}},[e("span",[t._v(t._s(i.text))]),"desc"==t.sortby["Reserve"]?e("i",{staticClass:"v-icon notranslate icon-arrow-up icon-18 theme--light",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e(),"asc"==t.sortby["Reserve"]?e("i",{staticClass:"v-icon notranslate icon-arrow-down icon-18 theme--light",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e()])]}},{key:"header[`Quota`]",fn:function({header:i}){return[e("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.customSort("Quota")}}},[e("span",[t._v(t._s(i.text))]),"desc"==t.sortby["Quota"]?e("i",{staticClass:"v-icon notranslate icon-arrow-up icon-18 theme--light",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e(),"asc"==t.sortby["Quota"]?e("i",{staticClass:"v-icon notranslate icon-arrow-down icon-18 theme--light",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e()])]}},{key:"item",fn:function({item:i,index:a}){return[t.checkIsDisabled(i)?e("tr",{staticClass:"disabled-row"},[e("td",{staticClass:"error--text px-7 font-weight-600 pb-2",attrs:{colspan:"13"}},[t._v(" غیرفعال ")])]):t._e(),e("tr",{staticClass:"noBorder rounded-lg",class:t.checkIsDisabled(i)?"disabled-row":"theme-card"},[e("td",{staticClass:"text-center",staticStyle:{position:"relative"}},[i.isQuota&&i.QuotaAccountId?e("span",{staticClass:"quotaLine"}):t._e(),e("span",{staticClass:"px-1 font-weight-medium"},[t._v(t._s(i.Origin))]),e(p["a"],{staticClass:"px-1 mb-1 icon-arrow-right icon-18",attrs:{color:"primary",small:""}}),e("span",{staticClass:"px-1 font-weight-medium"},[t._v(t._s(i.Destination))])],1),e("td",{staticClass:"text-center font-weight-medium"},[e("div",{staticClass:"pb-1"},[t._v(t._s(i.Departure.split("-")[0]))]),e("div",[t._v(t._s(i.Departure.split("-")[1]))])]),e("td",{staticClass:"text-center font-weight-medium"},[t._v(" "+t._s(i.DepartureDatetime.slice(10,16))+" ")]),e("td",{staticClass:"text-center font-weight-medium"},[t._v(" "+t._s(i.FlightSegments[0].Segment.FlightNo)+" ")]),e("td",{staticClass:"text-center font-weight-medium"},[t._v(" "+t._s(i.AirlineName)+" ("+t._s(i.FlightSegments[0].Segment.AirlineIataCode)+") ")]),e("td",{staticClass:"text-center font-weight-medium"},[t._v(" "+t._s(i.CabinClass)+" ")]),e("td",{staticClass:"text-center font-weight-medium"},[e(r["a"],{attrs:{"text-color":"#2CA62D",color:"#2CA62D47",small:""},on:{click:function(e){return t.capacityClicked(i)}}},[t._v(t._s(i.Capacity))])],1),e("td",{staticClass:"text-center font-weight-medium"},[e(r["a"],{attrs:{color:"#6E4FD747","text-color":"#6E4FD7",small:""}},[t._v(t._s(i.Seatremaining))])],1),e("td",{staticClass:"text-center font-weight-medium"},[e(r["a"],{attrs:{"text-color":"#FF9F1C",color:"#FF9F1C47",small:""}},[t._v(t._s(i.Locked))])],1),e("td",{staticClass:"text-center font-weight-medium",class:"item-ticket-"+a,staticStyle:{position:"relative"}},[!i.isQuota&&0==i.QuotaName||i.isQuota?e(r["a"],{attrs:{"text-color":"#DF6FDB",color:"#DF6FDB47",small:""},on:{click:function(e){return t.ticketClicked(i,"")}}},[t._v(t._s(i.Ticketed))]):e(b["a"],{attrs:{"content-class":"actions","min-width":"170px",bottom:"",attach:".item-ticket-"+a,"offset-x":""},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(r["a"],t._g(t._b({attrs:{"text-color":"#DF6FDB",color:"#DF6FDB47",small:""}},"v-chip",s,!1),a),[t._v(t._s(i.Ticketed))])]}}],null,!0)},[e(C["a"],{attrs:{dense:""}},[e(x["a"],{staticClass:"caption"},[e(v["a"],{on:{click:function(e){return t.ticketClicked(i,"All")}}},[t._v(" با سهمیه")]),e(v["a"],{on:{click:function(e){return t.ticketClicked(i,"Selected Class")}}},[t._v(" بدون سهمیه ")])],1)],1)],1)],1),e("td",{staticClass:"text-center font-weight-medium"},[e(r["a"],{attrs:{"text-color":"#5189F6",color:"#5189F647",small:""}},[t._v(t._s(i.Reserved))])],1),e("td",{staticClass:"text-center font-weight-medium"},[e("span",{staticStyle:{"white-space":"nowrap",width:"5px",overflow:"hidden","text-overflow":"ellipsis"}},[e(r["a"],{attrs:{small:"","text-color":"#F4714E",color:"#F4714E47"},on:{click:function(e){return t.quotaClicked(i)}}},[t._v(t._s(i.QuotaName))])],1)]),e("td",{staticClass:"text-center"},[e(I["a"],{staticClass:"no-bootstrap5-css",attrs:{justify:"center"}},t._l(t.expandItems,(function(i,s){return e("div",{key:s,staticClass:"ml-2"},[e(O["a"],{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:l,attrs:n}){return[e(p["a"],t._g(t._b({staticStyle:{cursor:"pointer"},attrs:{small:"",color:t.isExpanded[a][s]?"primary":""},on:{click:function(e){t.changeExpand(a,s),t.getExpandData(s)}}},"v-icon",n,!1),l),[t._v(t._s(i.icon))])]}}],null,!0)},[t._v(" "+t._s(i.name)+" ")])],1)})),0)],1)]),e("tr",{staticClass:"noBorder",class:t.checkIsDisabled(i)?"disabled-row":"theme-card"},[e("td",{attrs:{colspan:"13"}},[e(I["a"],{staticClass:"d-flex flex-column align-end mx-0",staticStyle:{"max-width":"100%","border-radius":"8px"}},[!t.priceForGeneral[a]||t.isExpanded[a][0]||t.isExpanded[a][1]||t.isExpanded[a][2]?t._e():e("div",{staticClass:"d-flex flex-column",staticStyle:{"min-width":"99%"},attrs:{dense:""}},[e("detailsAndPrice",{staticClass:"availableCosts",attrs:{isCollectiveDetail:!1,isCollectivePrice:!1,title:"قیمت های در دسترس",editAllPrices:t.editAllPrices,editAllDetails:t.editAllDetails,firstData:t.priceFirstForGeneral[a],CodeRule:t.CodeRule,levels:t.levels,baggages:t.baggages,currencies:t.currencies,costGeneralMode:!0,CodeCommissions:t.CodeCommissions,expandedHeader:t.priceHeaderGeneral,expandedTableItems:t.priceForGeneral[a]}})],1),t.priceForGeneral[a]?t._e():e("div",{staticClass:"d-flex justify-content-center",staticStyle:{width:"100%"}},[e(D["a"],{attrs:{indeterminate:""}})],1),t.isExpanded[a][0]?e("div",{staticClass:"d-flex flex-column py-0",staticStyle:{"min-width":"100%"},attrs:{dense:""}},[e("detailsAndPrice",{attrs:{isCollectiveDetail:t.isCollectiveDetail,title:t.expandItems[0].name,editAllPrices:t.editAllPrices,editAllDetails:t.editAllDetails,expandedHeader:t.detailsHeader,expandedTableItems:t.detailsItems[a],firstData:t.detailsFirst[a],CodeCommissions:t.CodeCommissions}})],1):t._e(),t.isExpanded[a][1]?e("div",{staticClass:"d-flex flex-column",staticStyle:{"min-width":"100%"},attrs:{dense:""}},[e("capacityExpand",{attrs:{isCollectiveCapacity:t.isCollectiveCapacity,editAllCapacities:t.editAllCapacities,title:t.expandItems[1].name,expandedHeader:t.capacityHeader,expandedTableItems:t.capacityItems[a],firstData:t.capacityFirst[a]}})],1):t._e(),t.isExpanded[a][2]?e("div",{staticClass:"d-flex flex-column",staticStyle:{"min-width":"100%"},attrs:{dense:""}},[e("detailsAndPrice",{attrs:{isCollectivePrice:t.isCollectivePrice,isCollectivePriceEdit:t.isCollectivePriceEdit,title:t.expandItems[2].name,firstData:t.priceFirst[a],editAllPrices:t.editAllPrices,editAllDetails:t.editAllDetails,CodeRule:t.CodeRule,levels:t.levels,parentRoute:i,baggages:t.baggages,currencies:t.currencies,costGeneralMode:!1,CodeCommissions:t.CodeCommissions,expandedHeader:t.priceHeader,expandedTableItems:t.priceItems[a]},model:{value:t.pricesToEdit,callback:function(e){t.pricesToEdit=e},expression:"pricesToEdit"}})],1):t._e(),t.isExpanded[a][3]?e("div",{staticClass:"d-flex flex-column",staticStyle:{"min-width":"100%"},attrs:{dense:""}},[e("nextRouteExpand",{attrs:{title:t.expandItems[3].name,flight:t.tableFlights[a],classIds:[t.tableFlights[a].FlightSegments[0].Class.ClassId],capacities:[t.tableFlights[a].Capacity],CodeRule:t.CodeRule,routes:[`${t.tableFlights[a].Origin} - ${t.tableFlights[a].Destination}`],CodeCommissions:t.CodeCommissions,levels:t.levels,baggages:t.baggages,currencies:t.currencies,index:2}})],1):t._e(),t.tableFlights[a+1]&&t.tableFlights[a].same==t.tableFlights[a+1].same?e("div",{staticClass:"my-2",staticStyle:{width:"100%"}},[e(m["a"],{staticStyle:{"border-style":"dashed",width:"100%","border-color":"#444"}})],1):e("div",{staticStyle:{height:"30px",background:"#f2f2f5",width:"100%"}})])],1)])]}}],null,!1,3243988408),model:{value:t.selectedRows,callback:function(e){t.selectedRows=e},expression:"selectedRows"}})],1)],1):t._e()],1),t.nothingToShow?t._e():e(I["a"],[e(s["a"],{staticClass:"align-center",staticStyle:{"z-index":"20",padding:"0px 150px 0px 60px"},attrs:{fixed:"",color:"indigo",height:"fit-content"}},[e(I["a"],{staticClass:"container align-center no-bootstrap5-css"},[e("span",{staticClass:"quotaNav mr-1"}),e("span",{staticClass:"mr-2 grey--text text--darken-2"},[t._v("سهمیه")]),e("span",{staticClass:"canSellInEdit mr-3"}),e("span",{staticClass:"mr-2 grey--text text--darken-2"},[t._v("قیمت های در دسترس")]),e("span",{staticClass:"canSellInEdit mr-3",staticStyle:{"border-color":"#e63232"}}),e("span",{staticClass:"mr-2 grey--text text--darken-2"},[t._v("قیمت های غیرقابل دسترس")]),e(F["a"]),e(l["a"],{staticClass:"subtitle-2 moreRadius button text-left ml-1 pa-3",staticStyle:{color:"white !important"},attrs:{width:"146px",dense:"",height:"70%"},on:{click:t.restoreDefault}},[t._v(" بازگشت به حالت اولیه ")]),e(l["a"],{staticClass:"buttons subtitle-2 moreRadius button text-left ma-2 pa-3",staticStyle:{color:"white !important"},attrs:{width:"146px",dense:"",loading:t.finalSubmitLoading,height:"80%"},on:{click:t.validatePricesAndUpdate}},[t._v(" "+t._s(t.isCollectivePriceToSend||t.isCollectiveClassToSend||t.isCollectiveDetailToSend?"دخیره گروهی تغییرات":"ذخیره تغییرات")+" ")])],1)],1)],1)],1)},A=[],B=i("23c5"),L=i("2b5d"),M=i("7679"),j=i("1f4f"),R=i("b73d"),H=function(){var t=this,e=t._self._c;return e("div",[e(h["a"],{attrs:{width:"50%"},model:{value:t.ruleDetail,callback:function(e){t.ruleDetail=e},expression:"ruleDetail"}},[e(n["a"],[e(T["a"],{staticClass:"justify-self-right tabRules d-flex flex-column flight-declare-tabs"},[e(w["a"],{attrs:{color:"primary"}}),e(E["a"],{staticStyle:{height:"40px",color:"#b7b7b7","letter-spacing":"0px"}},[t._v(" قانون "+t._s(t.ruleInfo.Code)+" ")]),e(F["a"]),e(l["a"],{staticClass:"elevation-0 align-self-end",attrs:{color:"white"},on:{click:function(e){t.ruleDetail=!1}}},[e(p["a"],{staticClass:"icon-remove icon-18",attrs:{size:"20"}})],1)],1),t.ruleInfo.Penalties&&t.ruleInfo.Penalties.length?e(c["c"],t._l(t.ruleInfo.Penalties,(function(i,a){return e(n["a"],{key:a,staticClass:"mt-5 grey--text text--darken-2 text--darken-2",staticStyle:{"background-color":"#eeeeee"},attrs:{flat:""}},[e(I["a"],{staticClass:"d-flex justify-space-between align-center ma-0 pt-2",staticStyle:{width:"100%"}},[e(d["a"],{staticClass:"pb-0 grey--text text--darken-2 text--darken-4",staticStyle:{"max-width":"fit-content"}},[e("span",[t._v(" جریمه کنسلی")])]),e(d["a"],{staticClass:"pa-0",staticStyle:{width:"100%"}},[e(m["a"],{staticClass:"primary",staticStyle:{width:"100%"}})],1)],1),e("div",{staticClass:"d-flex justify-space-around pa-2"},[e("span",[t._v("بزرگسال: "+t._s(i.Cancel.ADT))]),e("span",[t._v("کودک: "+t._s(i.Cancel.CHD))]),e("span",[t._v("نوزاد: "+t._s(i.Cancel.INF))])]),e("div",{staticClass:"d-flex justify-space-around mt-5 pa-2"},[e("span",[t._v("نوع جریمه: "+t._s("Percent"==i.PriceType?"درصد":"مبلغ"))]),e("span",[t._v("نوع: "+t._s("hourly"==i.Type?"دقیقه ای":"daily"==i.Type?"روزانه":"عدم حضور"))]),"daily"==i.Type?e("span",[t._v(" تاساعت: "+t._s(i.HourOfDay))]):t._e(),e("span",[t._v(t._s(i.Value)+" "+t._s("hourly"==i.Type?"دقیقه مانده به پرواز":"روز مانده به پرواز"))])])],1)})),1):t._e(),t.ruleInfo.Rules&&t.ruleInfo.Rules.length?e(c["c"],t._l(t.ruleInfo.Rules,(function(i,a){return e(n["a"],{key:a,staticClass:"grey--text text--darken-2 text--darken-2",staticStyle:{"background-color":"#eeeeee"},attrs:{flat:""}},[e(I["a"],{staticClass:"d-flex justify-space-between align-center ma-0 pt-2",staticStyle:{width:"100%"}},[e(d["a"],{staticClass:"pb-0 grey--text text--darken-2 text--darken-4",staticStyle:{"max-width":"fit-content"}},[e("span",[t._v(" توضیحات متنی")])]),e(d["a"],{staticClass:"pa-0",staticStyle:{width:"100%"}},[e(m["a"],{staticClass:"primary",staticStyle:{width:"100%"}})],1)],1),e("div",{staticClass:"d-flex justify-space-around pa-2"},[e("span",[t._v("عنوان: "+t._s(i.SubTitle))]),e("span",[t._v("شرح: "+t._s(i.Text))])])],1)})),1):t._e()],1)],1),e(h["a"],{attrs:{width:"30%"},model:{value:t.baggageDialog,callback:function(e){t.baggageDialog=e},expression:"baggageDialog"}},[e(n["a"],{attrs:{flat:""}},[e(c["c"],{staticClass:"grey--text text--darken-2 text--darken-2"},[e(I["a"],{staticClass:"d-flex justify-space-between align-center ma-0 pt-2",staticStyle:{width:"100%"}},[e(m["a"],{staticClass:"primary",staticStyle:{width:"100%"}}),e(d["a"],{staticClass:"pb-0 grey--text text--darken-2 text--darken-4",staticStyle:{"max-width":"fit-content"}},[e("span",[t._v(" مقدار بار")]),e("span",[t._v(" "+t._s(t.baggageInfo.Code))])]),e(d["a"],{staticClass:"pa-0",staticStyle:{width:"100%"}},[e(m["a"],{staticClass:"primary",staticStyle:{width:"100%"}})],1)],1),e("div",{staticClass:"d-flex justify-space-around pa-2"},[e("table",{staticClass:"mt-3"},[e("thead",[e("tr",[e("th",{staticClass:"text-center"},[t._v("بزرگسال")]),e("th",{staticClass:"text-center"},[t._v("کودک")]),e("th",{staticClass:"text-center"},[t._v("نوزاد")])])]),e("tbody",[e("tr",[e("td",{staticClass:"text-center px-3"},[e("span",{staticClass:"pr-1"},[t._v(t._s(t.baggageInfo.Adt))]),e("span",[t._v(t._s(t.baggageInfo.Unit))])]),e("td",{staticClass:"text-center px-3"},[e("span",{staticClass:"pr-1"},[t._v(t._s(t.baggageInfo.Chd))]),e("span",[t._v(t._s(t.baggageInfo.Unit))])]),e("td",{staticClass:"text-center px-3"},[e("span",{staticClass:"pr-1"},[t._v(t._s(t.baggageInfo.Inf))]),e("span",[t._v(t._s(t.baggageInfo.Unit))])])])])])])],1),e(c["a"],[e(F["a"]),e(l["a"],{attrs:{depressed:""},on:{click:function(e){t.baggageDialog=!1}}},[t._v("بستن")])],1)],1)],1),e(h["a"],{attrs:{width:"30%"},model:{value:t.commissionDialog,callback:function(e){t.commissionDialog=e},expression:"commissionDialog"}},[e(n["a"],{attrs:{flat:""}},[e(c["c"],{staticClass:"grey--text text--darken-2 text--darken-2"},[e(I["a"],{staticClass:"d-flex justify-space-between align-center ma-0 pt-2",staticStyle:{width:"100%"}},[e(m["a"],{staticClass:"primary",staticStyle:{width:"100%"}}),e(d["a"],{staticClass:"pb-0 grey--text text--darken-2 text--darken-4 d-flex",staticStyle:{"max-width":"fit-content"}},[e("span",[t._v("کمسیسون")]),e("span",{staticClass:"mr-2"},[t._v(" "+t._s(t.commissionInfo.Code))])]),e(d["a"],{staticClass:"pa-0",staticStyle:{width:"100%"}},[e(m["a"],{staticClass:"primary",staticStyle:{width:"100%"}})],1)],1),e("div",{staticClass:"d-flex justify-space-around"},[e(j["a"],{staticClass:"mt-3"},[e("thead",[e("tr",[e("th",{staticClass:"text-center"},[t._v("گروه کمسیسونی")]),e("th",{staticClass:"text-center"},[t._v("بزرگسال")]),e("th",{staticClass:"text-center"},[t._v("کودک")]),e("th",{staticClass:"text-center"},[t._v("نوزاد")]),e("th",{staticClass:"text-center"},[t._v("نوع")])])]),e("tbody",t._l(t.commissionInfo.Commissions,(function(i,a){return e("tr",{key:a},[e("td",{staticClass:"text-center px-3"},[e("span",{staticClass:"pr-1"},[t._v(t._s(i.category))])]),e("td",{staticClass:"text-center px-3"},[e("span",{staticClass:"pr-1"},[t._v(t._s(i.Adt))])]),e("td",{staticClass:"text-center px-3"},[e("span",{staticClass:"pr-1"},[t._v(t._s(i.Chd))])]),e("td",{staticClass:"text-center px-3"},[e("span",{staticClass:"pr-1"},[t._v(t._s(i.Inf))])]),e("td",{staticClass:"text-center px-3"},[e("span",{staticClass:"pr-1"},[t._v(t._s(t._f("calcType")(i.CalcType)))])])])})),0)])],1)],1),e(c["a"],[e(F["a"]),e(l["a"],{attrs:{depressed:""},on:{click:function(e){t.commissionDialog=!1}}},[t._v("بستن")])],1)],1)],1),e(h["a"],{attrs:{width:"500"},model:{value:t.validationDialog,callback:function(e){t.validationDialog=e},expression:"validationDialog"}},[e(n["a"],[e(c["d"],[t._v("اخطار")]),e(c["c"],t._l(t.validateProblems,(function(i){return e("div",{key:i},[t._v(t._s(i))])})),0),e(c["a"],[e(F["a"]),e(l["a"],{staticClass:"primary white--text",attrs:{depressed:""},on:{click:function(e){t.validationDialog=!1}}},[t._v("بستن")])],1)],1)],1),e("div",{staticClass:"mx-0",staticStyle:{"min-width":"100%"}},[e(d["a"],{staticClass:"d-flex align-center pr-1 pb-0",attrs:{color:"primary"}},[t.isCollectiveDetail?e(o["a"],{attrs:{dense:"",ripple:!1},on:{change:t.changeCollectiveCallForDetails},model:{value:t.collectiveCheckComDetail,callback:function(e){t.collectiveCheckComDetail=e},expression:"collectiveCheckComDetail"}}):t._e(),t.isCollectivePrice?e(o["a"],{attrs:{dense:"",ripple:!1},on:{change:t.changeCollectiveCallForPrice},model:{value:t.collectiveCheckComPrice,callback:function(e){t.collectiveCheckComPrice=e},expression:"collectiveCheckComPrice"}}):t._e(),e("span",{staticClass:"px-1 primary--text"},[t._v(t._s(t.title))]),e(m["a"])],1),e(d["a"],{staticClass:"d-flex py-0 align-center"},[e(I["a"],{staticClass:"d-flex py-0",staticStyle:{width:"100%"}},[e(u["a"],{staticClass:"expandedTable",staticStyle:{width:"100%"},attrs:{"item-key":"index",headers:t.expandedHeader,items:t.expandedTableItems,"disable-pagination":"","hide-default-footer":"","disable-sort":"","show-select":t.isCollectivePriceEdit,dense:"","loading-text":"لطفا صبر کنید ... درحال دریافت اطلاعات","no-data-text":t.$t("noDataAvailable")},scopedSlots:t._u([t.levels&&!t.costGeneralMode?{key:"footer",fn:function(){return[e(l["a"],{staticClass:"caption light mt-2 mr-3",attrs:{depressed:""},on:{click:t.addItem}},[e(p["a"],{staticClass:"icon-add icon-18",attrs:{small:""}}),t._v("افزودن کلاس نرخی ")],1)]},proxy:!0}:null,{key:"item.action",fn:function(i){return[e(p["a"],{staticClass:"mr-2 icon-delete icon-18",attrs:{disabled:1==t.expandedTableItems.length,small:""},on:{click:function(e){return t.deleteItem(i.item)}}})]}},{key:"item.route",fn:function({item:i}){return[e("span",{staticClass:"px-1"},[t._v(t._s(i.origin))]),e(p["a"],{staticClass:"px-0 mb-1 icon-arrow-right icon-18",attrs:{color:"primary",small:""}}),e("span",{staticClass:"px-1"},[t._v(t._s(i.destination))])]}},{key:"item.flightNo",fn:function(i){return[e(M["a"],{ref:"FlightNumberEditDialog",attrs:{large:"","cancel-text":"","save-text":"ذخیره","return-value":i.item.flightNo},on:{save:function(e){return t.saveSegment(i.item.row)},close:function(e){return t.saveSegment(i.item.row)}},scopedSlots:t._u([{key:"input",fn:function(){return[e($["a"],{attrs:{label:t.$t("flightNumber"),"single-line":"","hide-details":!!i.item.flightNo,rules:[()=>!!i.item.flightNo||"الزامی"]},model:{value:i.item.flightNo,callback:function(e){t.$set(i.item,"flightNo",e)},expression:"props.item.flightNo"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[0].flightNo==i.item.flightNo,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[0].flightNo!=i.item.flightNo}},"span",s,!1),a),[t._v(t._s(i.item.flightNo))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.flightNo=t.firstData[0].flightNo,t.saveSegment(i.item.row)}}},[t._v(t._s(t.firstData[0].flightNo))])])],1)]}},{key:"item.date",fn:function(e){return[t._v(t._s(e.item.date.slice(0,10).split("-").join("/")))]}},{key:"item.airline",fn:function(i){return[e(M["a"],{attrs:{large:"","cancel-text":"","save-text":"ذخیره","return-value":i.item.airline},on:{"update:returnValue":function(e){return t.$set(i.item,"airline",e)},"update:return-value":function(e){return t.$set(i.item,"airline",e)},save:function(e){return t.saveSegment(i.item.row)},close:function(e){return t.saveSegment(i.item.row)}},scopedSlots:t._u([{key:"input",fn:function(){return[e(a["a"],{staticClass:"destination cabin",class:i.item.airlineObj?"airlineEditAuto":"",attrs:{dense:"",outlined:"",label:t.$t("selectAirline"),"hide-no-data":"",items:t.airlines,"item-text":"searchAirlines","return-object":"","hide-details":"","search-input":t.searchAirlines},on:{change:function(t){i.item.airline=i.item.airlineObj?i.item.airlineObj:null},mousedown:function(t){i.item.airlineObj?i.item.airlineObj="":i.item.airlineObj},"update:searchInput":function(e){t.searchAirlines=e},"update:search-input":function(e){t.searchAirlines=e}},scopedSlots:t._u([{key:"item",fn:function(i){return[e(C["a"],{staticClass:"pa-0",attrs:{width:"100%"}},[e(v["a"],[i.item?e(g["a"],{staticClass:"ml-3 mr-2"},[e(r["a"],{staticClass:"caption cabin primary--text",attrs:{label:"",small:"",outlined:""}},[t._v(t._s(i.item?i.item.iata:""))])],1):t._e(),e(y["a"],{staticStyle:{direction:"ltr","text-align":"initial"}},[e(y["c"],{staticClass:"caption mb-0"},[t._v(t._s(i.item?i.item.name:""))])],1),e(f["a"],{staticClass:"mr-0"},[e(p["a"],{staticClass:"icon-flight-simple icon-18",attrs:{color:"primary"}})],1)],1)],1)]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"caption"},[t._v(t._s(i.item?i.item.name:""))]),i.item.iata?e("span",{},[e(r["a"],{staticClass:"caption white--text",attrs:{label:"",small:"",color:"#d50c6a"}},[t._v(t._s(i.item?i.item.iata:""))])],1):t._e()]}}],null,!0),model:{value:i.item.airlineObj,callback:function(e){t.$set(i.item,"airlineObj",e)},expression:"props.item.airlineObj"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[0].airline.iata==i.item.airline.iata,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[0].airline.iata!=i.item.airline.iata}},"span",s,!1),a),[t._v(t._s(i.item.airline.name)+"("+t._s(i.item.airline.iata)+")")])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.airline=t.firstData[0].airline,t.saveSegment(i.item.row),i.item.airlineObj=""}}},[t._v(t._s(t.firstData[0].airline.iata))])])],1)]}},{key:"item.airplane",fn:function(i){return[e(M["a"],{attrs:{large:"","cancel-text":"","save-text":"ذخیره","return-value":i.item.airplane},on:{"update:returnValue":function(e){return t.$set(i.item,"airplane",e)},"update:return-value":function(e){return t.$set(i.item,"airplane",e)},save:function(e){return t.saveSegment(i.item.row)},close:function(e){return t.saveSegment(i.item.row)}},scopedSlots:t._u([{key:"input",fn:function(){return[e(a["a"],{staticClass:"destination cabinr",class:i.item.airplaneObj?"flightEditAuto":"",attrs:{dense:"",outlined:"",label:t.$t("selectAirplane"),"hide-no-data":"","hide-details":"",items:t.airplanes,"item-text":"searchAirplane","return-object":"","search-input":t.searchAirplanes},on:{change:function(t){i.item.airplane=i.item.airplaneObj?i.item.airplaneObj:null},mousedown:function(t){i.item.airplaneObj?i.item.airplaneObj="":i.item.airplaneObj},"update:searchInput":function(e){t.searchAirplanes=e},"update:search-input":function(e){t.searchAirplanes=e}},scopedSlots:t._u([{key:"item",fn:function(i){return[e(C["a"],{staticClass:"pa-0",attrs:{"two-line":"",width:"100%"}},[e(v["a"],[e(y["a"],{staticStyle:{direction:"ltr","text-align":"initial"}},[e(y["c"],{staticClass:"caption mb-0"},[t._v(t._s(i.item.airplaneName))])],1),e(f["a"],{staticClass:"mr-0"},[e(p["a"],{staticClass:"icon-flight-simple icon-18",attrs:{color:"primary"}})],1)],1)],1)]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"caption"},[t._v(t._s(i.item.airplaneName))])]}}],null,!0),model:{value:i.item.airplaneObj,callback:function(e){t.$set(i.item,"airplaneObj",e)},expression:"props.item.airplaneObj"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[0].airplane.id==i.item.airplane.id,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[0].airplane.id!=i.item.airplane.id}},"span",s,!1),a),[t._v(t._s(i.item.airplane.airplaneName))])]}}],null,!0)},[e("div",{on:{click:function(e){i.item.airplane=t.firstData[0].airplane,t.saveSegment(i.item.row),i.item.airplaneObj=""}}},[t._v(" "+t._s(t.firstData[0].airplane.airplaneName)+" ")])])],1)]}},{key:"item.flightTime",fn:function(i){return[e(M["a"],{attrs:{large:"","cancel-text":"","save-text":"ذخیره","return-value":i.item.flightTime},on:{"update:returnValue":function(e){return t.$set(i.item,"flightTime",e)},"update:return-value":function(e){return t.$set(i.item,"flightTime",e)},save:function(e){return t.saveSegment(i.item.row)},close:function(e){return t.saveSegment(i.item.row)}},scopedSlots:t._u([{key:"input",fn:function(){return[e("AppTimePicker",{staticStyle:{"max-width":"200px"},attrs:{attach:"flight-time-"+i.item.row,hourLabel:t.$t("hour"),minuteLabel:t.$t("minute"),label:t.$t("flightTime")},model:{value:i.item.flightTime,callback:function(e){t.$set(i.item,"flightTime",e)},expression:"props.item.flightTime"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[0].flightTime==i.item.flightTime,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[0].flightTime.trim()!=i.item.flightTime.trim()}},"span",s,!1),a),[t._v(t._s(i.item.flightTime))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.flightTime=t.firstData[0].flightTime,t.saveSegment(i.item.row)}}},[t._v(t._s(t.firstData[0].flightTime))])])],1)]}},{key:"item.duration",fn:function(i){return[e(M["a"],{attrs:{large:"","cancel-text":"","save-text":"ذخیره","return-value":i.item.duration},on:{save:function(e){return t.saveSegment(i.item.row)},close:function(e){return t.saveSegment(i.item.row)}},scopedSlots:t._u([{key:"input",fn:function(){return[e($["a"],{attrs:{label:"ویرایش","single-line":"","hide-details":""},model:{value:i.item.duration,callback:function(e){t.$set(i.item,"duration",e)},expression:"props.item.duration"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[0].duration==i.item.duration,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[0].duration!=i.item.duration}},"span",s,!1),a),[t._v(t._s(i.item.duration))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.duration=t.firstData[0].duration,t.saveSegment(i.item.row)}}},[t._v(t._s(t.firstData[0].duration))])])],1)]}},{key:"item.arrivalTime",fn:function(e){return[t._v(t._s(e.item.arrivalTime))]}},{key:"item.sendList",fn:function(i){return[e(M["a"],{attrs:{large:"","cancel-text":"","save-text":"ذخیره","return-value":i.item.sendList},on:{save:function(e){return t.saveSegment(i.item.row)},close:function(e){return t.saveSegment(i.item.row)}},scopedSlots:t._u([{key:"input",fn:function(){return[e($["a"],{attrs:{label:"ویرایش","single-line":"","hide-details":""},model:{value:i.item.sendList,callback:function(e){t.$set(i.item,"sendList",e)},expression:"props.item.sendList"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[0].sendList==i.item.sendList,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[0].sendList!=i.item.sendList}},"span",s,!1),a),[t._v(t._s(i.item.sendList))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.sendList=t.firstData[0].sendList,t.saveSegment(i.item.row)}}},[t._v(t._s(t.firstData[0].sendList))])])],1)]}},{key:"item.closeSaleFlight",fn:function(i){return[e(M["a"],{attrs:{large:"","cancel-text":"","save-text":"ذخیره","return-value":i.item.closeSaleFlight},on:{save:function(e){return t.saveSegment(i.item.row)},close:function(e){return t.saveSegment(i.item.row)}},scopedSlots:t._u([{key:"input",fn:function(){return[e($["a"],{attrs:{label:"ویرایش","single-line":"","hide-details":""},model:{value:i.item.closeSaleFlight,callback:function(e){t.$set(i.item,"closeSaleFlight",e)},expression:"props.item.closeSaleFlight"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[0].closeSaleFlight==i.item.closeSaleFlight,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[0].closeSaleFlight!=i.item.closeSaleFlight}},"span",s,!1),a),[t._v(t._s(i.item.closeSaleFlight))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.closeSaleFlight=t.firstData[0].closeSaleFlight,t.saveSegment(i.item.row)}}},[t._v(t._s(t.firstData[0].closeSaleFlight))])])],1)]}},{key:"item.closeSaleQuotaFlight",fn:function(i){return[e(M["a"],{attrs:{large:"","cancel-text":"","save-text":"ذخیره","return-value":i.item.closeSaleQuotaFlight},on:{save:function(e){return t.saveSegment(i.item.row)},close:function(e){return t.saveSegment(i.item.row)}},scopedSlots:t._u([{key:"input",fn:function(){return[e($["a"],{attrs:{label:"ویرایش","single-line":"","hide-details":""},model:{value:i.item.closeSaleQuotaFlight,callback:function(e){t.$set(i.item,"closeSaleQuotaFlight",e)},expression:"props.item.closeSaleQuotaFlight"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[0].closeSaleQuotaFlight==i.item.closeSaleQuotaFlight,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[0].closeSaleQuotaFlight!=i.item.closeSaleQuotaFlight}},"span",s,!1),a),[t._v(t._s(i.item.closeSaleQuotaFlight))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.closeSaleQuotaFlight=t.firstData[0].closeSaleQuotaFlight,t.saveSegment(i.item.row)}}},[t._v(t._s(t.firstData[0].closeSaleQuotaFlight))])])],1)]}},{key:"item.description",fn:function(i){return[e(M["a"],{attrs:{large:"","cancel-text":"","save-text":"ذخیره","return-value":i.item.description},on:{"update:returnValue":function(e){return t.$set(i.item,"description",e)},"update:return-value":function(e){return t.$set(i.item,"description",e)},save:function(e){return t.saveSegment(i.item.row)},close:function(e){return t.saveSegment(i.item.row)}},scopedSlots:t._u([{key:"input",fn:function(){return["no"===i.item.description?e($["a"],{staticStyle:{width:"max-content"},attrs:{value:"توضیحات وجود ندارد",readonly:"","hide-details":"",dense:"","single-line":""}}):e(P["a"],{attrs:{label:"ویرایش","single-line":"","hide-details":""},model:{value:i.item.description,callback:function(e){t.$set(i.item,"description",e)},expression:"props.item.description"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[0].description==i.item.description,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(p["a"],t._g(t._b({staticClass:"icon-info-circle icon-18",class:{edited:t.firstData[0].description!=i.item.description},attrs:{small:""}},"v-icon",s,!1),a))]}}],null,!0)},[e(p["a"],{staticClass:"icon-info-circle icon-18",attrs:{small:""},on:{click:function(e){i.item.description=t.firstData[0].description,t.saveSegment(i.item.row)}}})],1)],1)]}},{key:"item.SegmentStatus",fn:function(i){return[e(R["a"],{staticClass:"editSwitch",class:{editSwitchChanged:t.firstData[0].SegmentStatus!=i.item.SegmentStatus},attrs:{height:"24px","false-value":0,"true-value":1,"background-color":i.item.SegmentStatus?"#4caf5075":"#f4433675",color:i.item.SegmentStatus?"green":"red"},on:{change:function(e){return t.editCheckbox(e,"SegmentStatus",i.item.row)}},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticStyle:{"text-align":"left"},style:i.item.SegmentStatus?{color:"green"}:{color:"red"}},[t._v(t._s(i.item.SegmentStatus?"فعال":"غیر فعال"))])]},proxy:!0}],null,!0),model:{value:i.item.SegmentStatus,callback:function(e){t.$set(i.item,"SegmentStatus",e)},expression:"props.item.SegmentStatus"}})]}},{key:"item.PriceClass",fn:function(i){return[t.costGeneralMode?e("div",[e("span",{staticClass:"canSell",staticStyle:{border:"5px solid var(--v-success-lighten1)"}}),e("span",[t._v(t._s(i.item.PriceClass))])]):e("div",{staticStyle:{position:"relative"}},[e("div",[i.item.canSellInThisRange?e("span",{staticClass:"canSell",staticStyle:{border:"5px solid var(--v-success-lighten1)"}}):e("span",{staticClass:"canSell",staticStyle:{border:"5px solid #e63232"}})]),e(M["a"],{attrs:{"return-value":i.item.PriceClass,"save-text":"ذخیره","cancel-text":"",large:""},on:{save:t.savePrice,close:t.savePrice},scopedSlots:t._u([{key:"input",fn:function(){return[e(L["a"],{staticClass:"cabin",attrs:{items:["Y","C","F","A"],dense:"","hide-details":"",maxlength:"1"},scopedSlots:t._u([{key:"item",fn:function(i){return[e(r["a"],{staticClass:"mr-3 caption white--text",attrs:{label:"",small:"",dark:""}},[t._v(t._s(i.item))])]}}],null,!0),model:{value:i.item.PriceClass,callback:function(e){t.$set(i.item,"PriceClass",e)},expression:"props.item.PriceClass"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].PriceClass==i.item.PriceClass,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({staticClass:"pr-5",class:{edited:t.firstData[i.item.index].PriceClass!=i.item.PriceClass}},"span",s,!1),a),[t._v(t._s(i.item.PriceClass))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.PriceClass=t.firstData[i.item.index].PriceClass,t.savePrice()}}},[t._v(t._s(t.firstData[i.item.index].PriceClass))])])],1)],1)]}},{key:"item.NationalityInclude",fn:function(i){return[t.costGeneralMode?e("div",[e("span",{staticClass:"canSell",staticStyle:{border:"5px solid var(--v-success-lighten1)"}}),e("span",[t._v(t._s(i.item.Nationality.Include))])]):e("div",{staticStyle:{position:"relative"}},[e("div",[i.item.canSellInThisRange?e("span",{staticClass:"canSell",staticStyle:{border:"5px solid var(--v-success-lighten1)"}}):e("span",{staticClass:"canSell",staticStyle:{border:"5px solid #e63232"}})]),e(M["a"],{attrs:{"return-value":i.item.Nationality.Include,"save-text":"ذخیره","cancel-text":"",large:""},on:{save:t.savePrice,close:t.savePrice,open:function(t){i.item.Nationality.Include=[]}},scopedSlots:t._u([{key:"input",fn:function(){return[e(a["a"],{ref:"adultCost",staticClass:"centerinp nationailtySelect",attrs:{label:"انتخاب ملیت",items:t.countries,"item-text":"searchKey","item-value":"abb","hide-details":"",multiple:"",autocomplete:"off",outlined:"",dense:""},scopedSlots:t._u([{key:"item",fn:function({item:i,on:a,attrs:s}){return[e(v["a"],t._g(t._b({scopedSlots:t._u([{key:"default",fn:function({active:a}){return[e(g["a"],[e(o["a"],{attrs:{"input-value":a}})],1),e(y["a"],[e(y["c"],[e("span",{staticClass:"font-size-11"},[t._v(t._s(i.name_fa))])])],1)]}}],null,!0)},"v-list-item",s,!1),a))]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"font-size-11 text-start"},[t._v(t._s(i.item.name_fa))])]}},{key:"prepend-inner",fn:function(){return[e(p["a"],{attrs:{size:"12"}},[t._v("*")])]},proxy:!0}],null,!0),model:{value:i.item.Nationality.Include,callback:function(e){t.$set(i.item.Nationality,"Include",e)},expression:"props.item.Nationality.Include"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].Nationality.Include==i.item.Nationality.Include,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({staticClass:"pr-5",class:{edited:t.firstData[i.item.index].Nationality.Include!=i.item.Nationality.Include}},"span",s,!1),a),[t._v(t._s(i.item.Nationality.Include))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.Nationality.Include="",t.savePrice()}}},[t._v(t._s(t.firstData[i.item.index].Nationality.Include))])])],1)],1)]}},{key:"item.NationalityExclude",fn:function(i){return[t.costGeneralMode?e("div",[e("span",{staticClass:"canSell",staticStyle:{border:"5px solid var(--v-success-lighten1)"}}),e("span",[t._v(t._s(i.item.Nationality.Exclude))])]):e("div",{staticStyle:{position:"relative"}},[e("div",[i.item.canSellInThisRange?e("span",{staticClass:"canSell",staticStyle:{border:"5px solid var(--v-success-lighten1)"}}):e("span",{staticClass:"canSell",staticStyle:{border:"5px solid #e63232"}})]),e(M["a"],{attrs:{"return-value":i.item.Nationality.Exclude,"save-text":"ذخیره","cancel-text":"",large:""},on:{save:t.savePrice,close:t.savePrice,open:function(t){i.item.Nationality.Exclude=[]}},scopedSlots:t._u([{key:"input",fn:function(){return[e(a["a"],{ref:"adultCost",staticClass:"centerinp nationailtySelect",attrs:{label:"انتخاب ملیت",items:t.countries,"item-text":"searchKey","item-value":"abb","hide-details":"",multiple:"",autocomplete:"off",outlined:"",dense:""},scopedSlots:t._u([{key:"item",fn:function({item:i,on:a,attrs:s}){return[e(v["a"],t._g(t._b({scopedSlots:t._u([{key:"default",fn:function({active:a}){return[e(g["a"],[e(o["a"],{attrs:{"input-value":a}})],1),e(y["a"],[e(y["c"],[e("span",{staticClass:"font-size-11"},[t._v(t._s(i.name_fa))])])],1)]}}],null,!0)},"v-list-item",s,!1),a))]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"font-size-11 text-start"},[t._v(t._s(i.item.name_fa))])]}},{key:"prepend-inner",fn:function(){return[e(p["a"],{attrs:{size:"12"}},[t._v("*")])]},proxy:!0}],null,!0),model:{value:i.item.Nationality.Exclude,callback:function(e){t.$set(i.item.Nationality,"Exclude",e)},expression:"props.item.Nationality.Exclude"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].Nationality.Exclude==i.item.Nationality.Exclude,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({staticClass:"pr-5",class:{edited:t.firstData[i.item.index].Nationality.Exclude!=i.item.Nationality.Exclude}},"span",s,!1),a),[t._v(t._s(i.item.Nationality.Exclude))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.Nationality.Exclude="",t.savePrice()}}},[t._v(t._s(t.firstData[i.item.index].Nationality.Exclude))])])],1)],1)]}},{key:"item.FromCapacity",fn:function(i){return[t.costGeneralMode?e("div",[t._v(" "+t._s(i.item.FromCapacity)+" ")]):e("div",[e(M["a"],{attrs:{"return-value":i.item.FromCapacity,"save-text":"ذخیره","cancel-text":"",large:""},on:{save:t.savePrice,close:t.savePrice},scopedSlots:t._u([{key:"input",fn:function(){return[e($["a"],{attrs:{type:"number","hide-details":"","single-line":"",autofocus:""},model:{value:i.item.FromCapacity,callback:function(e){t.$set(i.item,"FromCapacity",e)},expression:"props.item.FromCapacity"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].FromCapacity==i.item.FromCapacity,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[i.item.index].FromCapacity!=i.item.FromCapacity}},"span",s,!1),a),[t._v(t._s(i.item.FromCapacity))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.FromCapacity=t.firstData[i.item.index].FromCapacity,t.savePrice()}}},[t._v(t._s(t.firstData[i.item.index].FromCapacity))])])],1)],1)]}},{key:"item.ToCapacity",fn:function(i){return[t.costGeneralMode?e("div",[t._v(" "+t._s(i.item.ToCapacity)+" ")]):e("div",[e(M["a"],{attrs:{"return-value":i.item.ToCapacity,"save-text":"ذخیره","cancel-text":"",large:""},on:{save:t.savePrice,close:t.savePrice},scopedSlots:t._u([{key:"input",fn:function(){return[e($["a"],{attrs:{type:"number","hide-details":"","single-line":"",autofocus:""},model:{value:i.item.ToCapacity,callback:function(e){t.$set(i.item,"ToCapacity",e)},expression:"props.item.ToCapacity"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].ToCapacity==i.item.ToCapacity,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[i.item.index].ToCapacity!=i.item.ToCapacity}},"span",s,!1),a),[t._v(t._s(i.item.ToCapacity))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.ToCapacity=t.firstData[i.item.index].ToCapacity,t.savePrice()}}},[t._v(t._s(t.firstData[i.item.index].ToCapacity))])])],1)],1)]}},{key:"item.Code",fn:function(i){return[t.costGeneralMode?e("div",[t._v(" "+t._s(i.item.Code)+" ")]):e("div",[e(M["a"],{attrs:{"return-value":i.item.Code,"save-text":"ذخیره","cancel-text":"",large:""},on:{"update:returnValue":function(e){return t.$set(i.item,"Code",e)},"update:return-value":function(e){return t.$set(i.item,"Code",e)},save:t.savePrice,close:t.savePrice},scopedSlots:t._u([{key:"input",fn:function(){return[e(k["a"],{staticClass:"centerinp rules",attrs:{items:t.CodeRule,"return-object":"",placeholder:i.item.Code,dense:"","hide-details":"","menu-props":{offsetY:!0}},on:{change:function(e){return t.changeRule(e,i.item.index)}},scopedSlots:t._u([{key:"item",fn:function(i){return[e("span",{staticClass:"caption mr-1 black--text"},[t._v(t._s(i.item.Code)),e(p["a"],{staticClass:"icon-info-circle icon-18",attrs:{size:"15"},on:{click:function(e){return t.ruleInfoClicked(i.item)}}})],1)]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"caption mr-1 black--text"},[t._v(t._s(i.item.Code)+" ")])]}}],null,!0),model:{value:t.CodeSelect,callback:function(e){t.CodeSelect=e},expression:"CodeSelect"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].Code==i.item.Code,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[i.item.index].Code!=i.item.Code}},"span",s,!1),a),[t._v(t._s(i.item.Code))])]}}],null,!0)},[e("span",{on:{click:function(e){return t.saveDefaultCode(i.item.index)}}},[t._v(t._s(t.firstData[i.item.index].Code))])])],1)],1)]}},{key:"item.BaggageCode",fn:function(i){return[t.costGeneralMode?e("div",[t._v(" "+t._s(i.item.BaggageCode)+" ")]):e("div",[e(M["a"],{attrs:{"return-value":i.item.BaggageCode,"save-text":"ذخیره","cancel-text":"",large:""},on:{"update:returnValue":function(e){return t.$set(i.item,"BaggageCode",e)},"update:return-value":function(e){return t.$set(i.item,"BaggageCode",e)},save:t.savePrice,close:t.savePrice},scopedSlots:t._u([{key:"input",fn:function(){return[e(k["a"],{staticClass:"centerinp rules",attrs:{items:t.baggages,"return-object":"",placeholder:i.item.BaggageCode,dense:"","hide-details":"","menu-props":{offsetY:!0}},on:{change:function(e){return t.changeBaggage(e,i.item.index)}},scopedSlots:t._u([{key:"item",fn:function(i){return[e("span",{staticClass:"caption mr-1 black--text"},[t._v(t._s(i.item.Code)),e(p["a"],{staticClass:"icon-info-circle icon-18",attrs:{size:"15"},on:{click:function(e){return t.baggageInfoClicked(i.item)}}})],1)]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"caption mr-1 black--text"},[t._v(t._s(i.item.Code))])]}}],null,!0),model:{value:t.baggageSelect,callback:function(e){t.baggageSelect=e},expression:"baggageSelect"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].BaggageCode==i.item.BaggageCode,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[i.item.index].BaggageCode!=i.item.BaggageCode}},"span",s,!1),a),[t._v(t._s(i.item.BaggageCode))])]}}],null,!0)},[e("span",{on:{click:function(e){return t.saveDefaultBaggageCode(i.item.index)}}},[t._v(t._s(t.firstData[i.item.index].BaggageCode))])])],1)],1)]}},{key:"item.CommissionCode",fn:function(i){return[t.costGeneralMode?e("div",[t._v(" "+t._s(i.item.CommissionCode?i.item.CommissionCode:"تعریف نشده")+" ")]):e("div",[e(M["a"],{attrs:{"return-value":i.item.CommissionCode,"save-text":"ذخیره","cancel-text":"",large:""},on:{"update:returnValue":function(e){return t.$set(i.item,"CommissionCode",e)},"update:return-value":function(e){return t.$set(i.item,"CommissionCode",e)},save:t.savePrice,close:t.savePrice},scopedSlots:t._u([{key:"input",fn:function(){return[e(L["a"],{staticClass:"centerinp",attrs:{items:t.CodeCommissions,"item-text":"Code",label:"کمیسیون","return-object":"",placeholder:i.item.CommissionCode,"hide-details":"",outlined:"",dense:"","menu-props":{offsetY:!0}},on:{change:function(e){return t.changeCommision(e,i.item.index)}},scopedSlots:t._u([{key:"item",fn:function(i){return[e("span",{staticClass:"caption mr-1 black--text"},[t._v(t._s(i.item.Code)),e(p["a"],{staticClass:"icon-info-circle icon-18",attrs:{size:"15"},on:{click:function(e){return e.stopPropagation(),t.commissionInfoClicked(i.item)}}})],1)]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"caption mr-1 black--text"},[t._v(t._s(i.item.Code))])]}}],null,!0)})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].CommissionCodeId==i.item.CommissionCodeId,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[i.item.index].CommissionCode!=i.item.CommissionCode}},"span",s,!1),a),[t._v(t._s(i.item.CommissionCode?i.item.CommissionCode:"تعریف نشده"))])]}}],null,!0)},[e("span",{on:{click:function(e){return t.saveDefaultCommisionCode(i.item.index)}}},[t._v(t._s(t.firstData[i.item.index].CommissionCode?t.firstData[i.item.index].CommissionCode:"تعریف نشده"))])])],1)],1)]}},{key:"item.LevelId",fn:function(i){return[t.costGeneralMode?e("div",[t._v(" "+t._s(-1!=i.item.LevelId?i.item.Level:"تعریف نشده")+" ")]):e("div",[e(M["a"],{attrs:{"return-value":i.item.LevelId,"save-text":"ذخیره","cancel-text":"",large:""},on:{"update:returnValue":function(e){return t.$set(i.item,"LevelId",e)},"update:return-value":function(e){return t.$set(i.item,"LevelId",e)},save:t.savePrice,close:t.savePrice},scopedSlots:t._u([{key:"input",fn:function(){return[e(k["a"],{staticClass:"centerinp rules",attrs:{items:t.levels,"return-object":"",placeholder:i.item.Level.toString(),dense:"","hide-details":"","menu-props":{offsetY:!0}},on:{change:function(e){return t.changeLevel(e,i.item.index)}},scopedSlots:t._u([{key:"item",fn:function(i){return[e("span",{staticClass:"caption mr-1 black--text"},[t._v(t._s(i.item.Name))])]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"caption mr-1 black--text"},[t._v(t._s(i.item.Name))])]}}],null,!0)})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].LevelId==i.item.LevelId,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[i.item.index].LevelId!=i.item.LevelId}},"span",s,!1),a),[t._v(t._s(i.item.Level))])]}}],null,!0)},[e("span",{on:{click:function(e){t.saveLevelCode(i.item.index),i.item.LevelId=t.firstData[i.item.index].LevelId,i.item.Level=t.firstData[i.item.index].Level,t.savePrice()}}},[t._v(t._s(t.firstData[i.item.index].Level))])])],1)],1)]}},{key:"item.ADTFare",fn:function(i){return[t.costGeneralMode?e("div",[t._v(" "+t._s(t._f("commaNumber")(i.item.ADTFare))+" ")]):e("div",[e(M["a"],{attrs:{"return-value":i.item.ADTFare,"save-text":"ذخیره","cancel-text":"",large:""},on:{save:t.savePrice,close:t.savePrice},scopedSlots:t._u([{key:"input",fn:function(){return[e($["a"],{attrs:{"hide-details":"","single-line":"",autofocus:""},on:{input:function(e){i.item.ADTMultiWay=i.item.ADTFare,t.numberWithCommasADT(e,i.item.index)}},model:{value:i.item.ADTFare,callback:function(e){t.$set(i.item,"ADTFare",e)},expression:"props.item.ADTFare"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].ADTFare==i.item.ADTFare,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[i.item.index].ADTFare!=i.item.ADTFare}},"span",s,!1),a),[t._v(t._s(t._f("commaNumber")(i.item.ADTFare)))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.ADTFare=t.firstData[i.item.index].ADTFare,t.savePrice()}}},[t._v(t._s(t._f("commaNumber")(t.firstData[i.item.index].ADTFare)))])])],1)],1)]}},{key:"item.ADTMultiWay",fn:function(i){return[t.costGeneralMode?e("div",[t._v(" "+t._s(t._f("commaNumber")(i.item.ADTMultiWay))+" ")]):e("div",[e(M["a"],{attrs:{"return-value":i.item.ADTMultiWay,"save-text":"ذخیره","cancel-text":"",large:""},on:{save:t.savePrice,close:t.savePrice},scopedSlots:t._u([{key:"input",fn:function(){return[e($["a"],{attrs:{"hide-details":"","single-line":"",autofocus:""},on:{input:function(e){return t.numberWithCommasADTMulti(e,i.item.index)}},model:{value:i.item.ADTMultiWay,callback:function(e){t.$set(i.item,"ADTMultiWay",e)},expression:"props.item.ADTMultiWay"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].ADTMultiWay==i.item.ADTMultiWay,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[i.item.index].ADTMultiWay!=i.item.ADTMultiWay}},"span",s,!1),a),[t._v(t._s(t._f("commaNumber")(i.item.ADTMultiWay)))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.ADTMultiWay=t.firstData[i.item.index].ADTMultiWay,t.savePrice()}}},[t._v(t._s(t._f("commaNumber")(t.firstData[i.item.index].ADTMultiWay)))])])],1)],1)]}},{key:"item.CHDFare",fn:function(i){return[t.costGeneralMode?e("div",[t._v(" "+t._s(t._f("commaNumber")(i.item.CHDFare))+" ")]):e("div",[e(M["a"],{attrs:{"return-value":i.item.CHDFare,"save-text":"ذخیره","cancel-text":"",large:""},on:{save:t.savePrice,close:t.savePrice},scopedSlots:t._u([{key:"input",fn:function(){return[e($["a"],{attrs:{"hide-details":"","single-line":"",autofocus:""},on:{input:function(e){i.item.CHDMultiWay=i.item.CHDFare,t.numberWithCommasCHD(e,i.item.index)}},model:{value:i.item.CHDFare,callback:function(e){t.$set(i.item,"CHDFare",e)},expression:"props.item.CHDFare"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].CHDFare==i.item.CHDFare,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[i.item.index].CHDFare!=i.item.CHDFare}},"span",s,!1),a),[t._v(t._s(t._f("commaNumber")(i.item.CHDFare)))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.CHDFare=t.firstData[i.item.index].CHDFare,t.savePrice()}}},[t._v(t._s(t._f("commaNumber")(t.firstData[i.item.index].CHDFare)))])])],1)],1)]}},{key:"item.CHDMultiWay",fn:function(i){return[t.costGeneralMode?e("div",[t._v(" "+t._s(t._f("commaNumber")(i.item.CHDMultiWay))+" ")]):e("div",[e(M["a"],{attrs:{"return-value":i.item.CHDMultiWay,"save-text":"ذخیره","cancel-text":"",large:""},on:{save:t.savePrice,close:t.savePrice},scopedSlots:t._u([{key:"input",fn:function(){return[e($["a"],{attrs:{"hide-details":"","single-line":"",autofocus:""},on:{input:function(e){return t.numberWithCommasCHDMulti(e,i.item.index)}},model:{value:i.item.CHDMultiWay,callback:function(e){t.$set(i.item,"CHDMultiWay",e)},expression:"props.item.CHDMultiWay"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].CHDMultiWay==i.item.CHDMultiWay,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[i.item.index].CHDMultiWay!=i.item.CHDMultiWay}},"span",s,!1),a),[t._v(t._s(t._f("commaNumber")(i.item.CHDMultiWay)))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.CHDMultiWay=t.firstData[i.item.index].CHDMultiWay,t.savePrice()}}},[t._v(t._s(t._f("commaNumber")(t.firstData[i.item.index].CHDMultiWay)))])])],1)],1)]}},{key:"item.INFFare",fn:function(i){return[t.costGeneralMode?e("div",[t._v(" "+t._s(t._f("commaNumber")(i.item.INFFare))+" ")]):e("div",[e(M["a"],{attrs:{"return-value":i.item.INFFare,"save-text":"ذخیره","cancel-text":"",large:""},on:{save:t.savePrice,close:t.savePrice},scopedSlots:t._u([{key:"input",fn:function(){return[e($["a"],{attrs:{"hide-details":"","single-line":"",autofocus:""},on:{input:function(e){i.item.INFMultiWay=i.item.INFFare,t.numberWithCommasINF(e,i.item.index)}},model:{value:i.item.INFFare,callback:function(e){t.$set(i.item,"INFFare",e)},expression:"props.item.INFFare"}},[t._v(t._s(t._f("commaNumber")(i.item.INFFare)))])]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].INFFare==i.item.INFFare,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({staticClass:"dsdsds",class:{edited:t.firstData[i.item.index].INFFare!=i.item.INFFare}},"span",s,!1),a),[t._v(t._s(t._f("commaNumber")(i.item.INFFare)))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.INFFare=t.firstData[i.item.index].INFFare,t.savePrice()}}},[t._v(t._s(t._f("commaNumber")(t.firstData[i.item.index].INFFare)))])])],1)],1)]}},{key:"item.INFMultiWay",fn:function(i){return[t.costGeneralMode?e("div",[t._v(" "+t._s(t._f("commaNumber")(i.item.INFMultiWay))+" ")]):e("div",[e(M["a"],{attrs:{"return-value":i.item.INFMultiWay,"save-text":"ذخیره","cancel-text":"",large:""},on:{save:t.savePrice,close:t.savePrice},scopedSlots:t._u([{key:"input",fn:function(){return[e($["a"],{attrs:{"hide-details":"","single-line":"",autofocus:""},on:{input:function(e){return t.numberWithCommasINFMulti(e,i.item.index)}},model:{value:i.item.INFMultiWay,callback:function(e){t.$set(i.item,"INFMultiWay",e)},expression:"props.item.INFMultiWay"}},[t._v(t._s(t._f("commaNumber")(i.item.INFMultiWay)))])]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].INFMultiWay==i.item.INFMultiWay,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[i.item.index].INFMultiWay!=i.item.INFMultiWay}},"span",s,!1),a),[t._v(t._s(t._f("commaNumber")(i.item.INFMultiWay)))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.INFMultiWay=t.firstData[i.item.index].INFMultiWay,t.savePrice()}}},[t._v(t._s(t._f("commaNumber")(t.firstData[i.item.index].INFMultiWay)))])])],1)],1)]}},{key:"item.Currency",fn:function(i){return[t.costGeneralMode?e("div",[t._v(" "+t._s(i.item.Currency)+" ")]):e("div",[e(M["a"],{attrs:{"return-value":i.item.Currency,"save-text":"ذخیره","cancel-text":"",large:""},on:{"update:returnValue":function(e){return t.$set(i.item,"Currency",e)},"update:return-value":function(e){return t.$set(i.item,"Currency",e)},save:t.savePrice,close:t.savePrice},scopedSlots:t._u([{key:"input",fn:function(){return[e(k["a"],{staticClass:"centerinp rules",attrs:{items:t.currencies,"return-object":"",placeholder:i.item.Currency,dense:"","hide-details":"","menu-props":{offsetY:!0}},on:{change:function(e){return t.changeCurrency(e,i.item.index)}},scopedSlots:t._u([{key:"item",fn:function(i){return[e("span",{staticClass:"caption mr-1 black--text"},[t._v(t._s(i.item.Abbr))])]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"caption mr-1 black--text"},[t._v(t._s(i.item.Abbr))])]}}],null,!0)})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].Currency==i.item.Currency,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[i.item.index].Currency!=i.item.Currency}},"span",s,!1),a),[t._v(t._s(i.item.Currency))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.Currency=t.firstData[i.item.index].Currency,t.savePrice()}}},[t._v(t._s(t.firstData[i.item.index].Currency))])])],1)],1)]}}],null,!0),model:{value:t.collectivePricesToEdit,callback:function(e){t.collectivePricesToEdit=e},expression:"collectivePricesToEdit"}})],1)],1)],1)],1)},z=[],W=i("403a"),Q={data:()=>({checkbox:!1,selectedRows:[],dialog:!1,timen:null,airplanes:[],airplane:"",ruleDetail:!1,ruleInfo:"",countries:W["d"],baggageDialog:!1,commissionDialog:!1,baggageInfo:"",commissionInfo:"",searchAirplanes:"",collectiveCheckComDetail:!1,collectiveCheckComPrice:!1,airline:"",searchAirlines:"",validationDialog:!1,airlines:[],collectivePricesToEdit:[],validateProblems:[],shouldCallInsertFlightLock:!1,CodeSelect:"",baggageSelect:"",CommissionCodeSelect:""}),components:{AppTimePicker:B["a"]},computed:{editSegments(){return this.$store.getters["flightEdit/getEditedSegments"]},editPrices(){return this.$store.getters["flightEdit/getEditedPrices"]}},mounted(){},methods:{numberWithCommasADT(t,e){this.expandedTableItems[e].ADTFare=t.replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")},numberWithCommasCHD(t,e){this.expandedTableItems[e].CHDFare=t.replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")},numberWithCommasINF(t,e){this.expandedTableItems[e].INFFare=t.replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")},numberWithCommasADTMulti(t,e){this.expandedTableItems[e].ADTMultiWay=t.replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")},numberWithCommasCHDMulti(t,e){this.expandedTableItems[e].CHDMultiWay=t.replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")},numberWithCommasINFMulti(t,e){this.expandedTableItems[e].INFMultiWay=t.replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")},changeRule(t,e){this.expandedTableItems[e].Code=t.Code,this.expandedTableItems[e].CodeId=t.id},changeBaggage(t,e){this.expandedTableItems[e].BaggageCode=t.Code,this.expandedTableItems[e].BaggageId=t.Id},changeCommision(t,e){this.expandedTableItems[e].CommissionCode=t.Code,this.expandedTableItems[e].CommissionCodeId=t.CodeId},changeLevel(t,e){this.expandedTableItems[e].LevelId=t.Id,this.expandedTableItems[e].Level=t.Name},changeCurrency(t,e){this.expandedTableItems[e].Currency=t.Abbr},editCheckbox(t,e,i){switch(e){case"SegmentStatus":this.expandedTableItems[0].SegmentStatus=t;break}this.saveSegment(i)},checkProperties(t,e){for(var i in t)if(("string"===typeof t[i]||t[i]instanceof String)&&""==t[i]&&"PriceClass"!=i){let t,a="";switch(i){case"FlightNo":a="شماره پرواز";break;case"Duration":a="مدت زمان";break;case"SendList":a="ارسال لیست";break;case"CloseSaleFlight":a="توقف فروش";break;case"closeSaleQuotaFlight":a="توقف سهمیه";break;case"ADTFare":a="قیمت بزرگسال ";break;case"CHDFare":a="قیمت کودک";break;case"INFFare":a="قیمت نوزاد";break;case"FromCapacity":a="از ظرفیت";break;case"ToCapacity":a="تا ظرفیت";break;case"PriceClass":a="کلاس نرخی";break;case"Nationality":a="ملیت";break}this.validateProblems.push(a+" الزامی می باشد"),t=0==e?i.charAt(0).toLowerCase()+i.slice(1):i,this.$set(this.expandedTableItems[0],t,this.firstData[0][t])}return!this.validateProblems.length},changeCollectiveCallForDetails(t){t?this.$store.commit("flightEdit/setEditedSegments",{segment:!0,row:this.expandedTableItems[0].row}):this.$store.commit("flightEdit/setEditedSegments",{segment:!1,row:this.expandedTableItems[0].row})},checkObjectFull(t){if(Array.isArray(t)){let e=[];for(let i in t)e.push(this.checkObjectFull(t[i]));return!(this.cnLodash.uniq(e).length>1)&&e[0]}for(let e in t)if(!t[e])return!1;return!0},checkPriceObject(t){let e=[];for(let i in t)t[i].hasOwnProperty("adultCost")&&t[i].hasOwnProperty("childCost")&&t[i].hasOwnProperty("infantCost")&&t[i].hasOwnProperty("currency")&&t[i].hasOwnProperty("rateClass")&&t[i].hasOwnProperty("az")&&t[i].hasOwnProperty("ta")&&t[i].hasOwnProperty("level")&&t[i].hasOwnProperty("baggage")&&t[i].hasOwnProperty("rule")&&t[i].hasOwnProperty("commission")?e.push(!0):e.push(!1);return!(this.cnLodash.uniq(e).length>1)&&(1==e[0]&&this.checkObjectFull(t))},changeCollectiveCallForPrice(t){t?this.$store.commit("flightEdit/setOneEditedPrices",{price:!0,thisIsFromGeneral:this.costGeneralMode,shouldCallInsertFlightLock:!0,row:this.expandedTableItems[0].row}):this.$store.commit("flightEdit/setOneEditedPrices",{price:!1,thisIsFromGeneral:this.costGeneralMode,shouldCallInsertFlightLock:!0,row:this.expandedTableItems[0].row})},saveSegment(){this.validateProblems=[],this.expandedTableItems.forEach(t=>{let e={Id:t.segmentId,Origin:t.origin,Destination:t.destination,AirlineIataCode:t.airline.iata,AirplaneId:t.airplane.id,FlightNo:t.flightNo,DepartureDatetime:`${t.date.split(" ")[0]} ${t.flightTime}`,Duration:t.duration,CloseSaleFlight:t.closeSaleFlight,CloseSaleQuotaFlight:t.closeSaleQuotaFlight,SendList:t.sendList,Description:t.description,Status:t.SegmentStatus};this.checkProperties(e,0)?this.$store.commit("flightEdit/setEditedSegments",{segment:e,row:t.row}):this.validationDialog=!0})},saveDefaultCommisionCode(t){this.expandedTableItems[t].CommissionCodeId=this.firstData[t].CommissionCodeId,this.expandedTableItems[t].CommissionCode=this.firstData[t].CommissionCode,this.savePrice()},saveLevelCode(t){this.expandedTableItems[t].CommissionCodeId=this.firstData[t].CommissionCodeId,this.expandedTableItems[t].CommissionCode=this.firstData[t].CommissionCode,this.savePrice()},saveDefaultCode(t){this.CodeSelect="",this.expandedTableItems[t].CodeId=this.firstData[t].CodeId,this.expandedTableItems[t].Code=this.firstData[t].Code,this.savePrice()},saveDefaultBaggageCode(t){this.baggageSelect="",this.expandedTableItems[t].BaggageId=this.firstData[t].BaggageId,this.expandedTableItems[t].BaggageCode=this.firstData[t].BaggageCode,this.savePrice()},deleteItem(t){const e=this.expandedTableItems.indexOf(t);var i=confirm("آیا از حذف این کلاس نرخی اطمینان دارید؟");i&&(this.expandedTableItems.splice(e,1),this.expandedTableItems.map((t,e)=>{t.index=e}),this.firstData.splice(e,1),this.firstData.map((t,e)=>{t.index=e}),this.shouldCallInsertFlightLock=!0,this.savePrice())},ruleInfoClicked(t){this.ruleDetail=!0,this.ruleInfo=t},baggageInfoClicked(t){this.baggageDialog=!0,this.baggageInfo=t},commissionInfoClicked(t){this.commissionDialog=!0,this.commissionInfo=t},addItem(){let t={...this.firstData[0]};t.row=this.expandedTableItems[0].row,t.PriceClass="",t.Nationality={},t.Nationality.Include=[],t.Nationality.Exclude=[];let e=this.expandedTableItems.length;t.index=e,this.firstData.push(t),this.expandedTableItems.push(t),this.shouldCallInsertFlightLock=!0,this.savePrice()},savePrice(){this.validateProblems=[];let t=[];this.expandedTableItems.forEach((e,i)=>{if(console.log(e),this.checkProperties(e,i,3)){let i={Id:e.PriceDetailsId,Price:{Adult:{Fare:parseInt(e.ADTFare.replace(/,/g,"")),Tax:0,Commission:0,MultiWayFare:parseInt(e.ADTMultiWay.replace(/,/g,""))},Child:{Fare:parseInt(e.CHDFare.replace(/,/g,"")),Tax:0,Commission:0,MultiWayFare:parseInt(e.CHDMultiWay.replace(/,/g,""))},Infant:{Fare:parseInt(e.INFFare.replace(/,/g,"")),Tax:0,Commission:0,MultiWayFare:parseInt(e.INFMultiWay.replace(/,/g,""))}},Currency:e.Currency,PriceClass:e.PriceClass,Nationality:{Include:e.Nationality.Include,Exclude:e.Nationality.Exclude},FromCapacity:e.FromCapacity,ToCapacity:e.ToCapacity,LevelId:e.LevelId,BaggageId:e.BaggageId,CodeId:e.CodeId,CommissionCodeId:e.CommissionCodeId};t.push(i)}else this.validationDialog=!0}),this.$store.commit("flightEdit/setOneEditedPrices",{price:t,thisIsFromGeneral:this.costGeneralMode,shouldCallInsertFlightLock:this.shouldCallInsertFlightLock,row:this.expandedTableItems[0].row})},createClicked(t){this.selectedRows=t?[]:this.expandedTableItems},infoClick(){this.dialog=!0}},props:["value","parentRoute","title","isCollectivePrice","isCollectivePriceEdit","isCollectiveDetail","expandedHeader","expandedTableItems","CodeCommissions","editAllPrices","editAllDetails","levels","baggages","costGeneralMode","CodeRule","currencies","firstData"],watch:{collectivePricesToEdit:{handler:function(t,e){if(t.length<e.length){let i=e.filter(e=>!t.some(t=>t.PriceDetailsId==e.PriceDetailsId)),a=this.value.filter(t=>!i.some(e=>e.PriceDetailsId==t.PriceDetailsId));a.map(t=>{t.parentRoute=this.parentRoute}),this.$emit("input",a)}else if(t.length>e.length){let i=t.filter(t=>!e.some(e=>e.PriceDetailsId==t.PriceDetailsId)),a=[...this.value,...i];a.map(t=>{t.parentRoute=this.parentRoute}),this.$emit("input",a)}},deep:!0},editSegments:{handler:function(t){t.length||(this.collectiveCheckComDetail=!1)},deep:!0},editPrices:{handler:function(t){t.length||(this.collectiveCheckComPrice=!1)},deep:!0},editAllPrices(t){t?(this.$store.commit("flightEdit/setOneEditedPrices",{price:!0,thisIsFromGeneral:this.costGeneralMode,shouldCallInsertFlightLock:!0,row:this.expandedTableItems[0].row}),this.collectiveCheckComPrice=!0):(this.$store.commit("flightEdit/setOneEditedPrices",{price:!1,thisIsFromGeneral:this.costGeneralMode,shouldCallInsertFlightLock:!0,row:this.expandedTableItems[0].row}),this.collectiveCheckComPrice=!1)},editAllDetails(t){t?(this.$store.commit("flightEdit/setEditedSegments",{segment:!0,row:this.expandedTableItems[0].row}),this.collectiveCheckComDetail=!0):(this.$store.commit("flightEdit/setEditedSegments",{segment:!1,row:this.expandedTableItems[0].row}),this.collectiveCheckComDetail=!1)},searchAirplanes(t){t&&t.length>2&&this.axios(this.$store.state.baseUrl+"airplanes?name="+t).then(t=>{t.data.Items.forEach((t,e)=>{this.$set(t,"searchAirplane",t.airplaneName+t.airplaneCode)}),this.airplanes=t.data.Items})},searchAirlines(t){t&&t.length>1&&this.axios(this.$store.state.baseUrl+"airlines?name="+t).then(t=>{t.data.Items.forEach((t,e)=>{this.$set(t,"searchAirlines",t.name+t.iata)}),this.airlines=t.data.Items})}}},G=Q,Y=(i("46b7"),i("2877")),U=Object(Y["a"])(G,H,z,!1,null,null,null),q=U.exports,V=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{width:"100%"}},[e(h["a"],{attrs:{width:"500"},model:{value:t.validationDialog,callback:function(e){t.validationDialog=e},expression:"validationDialog"}},[e(n["a"],[e(c["d"],[t._v("اخطار")]),e(c["c"],[e("div",[t._v(t._s(t.validateProblem))])]),e(c["a"],[e(F["a"]),e(l["a"],{staticClass:"primary white--text",attrs:{depressed:""},on:{click:function(e){t.validationDialog=!1}}},[t._v("بستن")])],1)],1)],1),e(I["a"],{staticClass:"d-flex flex-column mx-0",staticStyle:{"min-width":"100%"}},[e(d["a"],{staticClass:"d-flex align-center pl-0",attrs:{color:"primary"}},[t.isCollectiveCapacity?e(o["a"],{attrs:{dense:"",ripple:!1},on:{change:t.changeCollectiveCallForCapacity},model:{value:t.collectiveCheck,callback:function(e){t.collectiveCheck=e},expression:"collectiveCheck"}}):t._e(),e("span",{staticClass:"px-1 primary--text"},[t._v(t._s(t.title))]),e(m["a"])],1),e(d["a"],{staticClass:"d-flex align-center py-0"},[e(I["a"],{staticClass:"d-flex",staticStyle:{width:"100%"}},[e(u["a"],{staticClass:"pa-0 capacityTable col-12",attrs:{"item-key":"row",headers:t.expandedHeader,"selectable-key":"isSelectable",items:t.expandedTableItems,"loading-text":"لطفا صبر کنید ... درحال دریافت اطلاعات","no-data-text":t.$t("noDataAvailable"),"hide-default-footer":"",dense:""},scopedSlots:t._u([{key:"item.cabinClass",fn:function(i){return[e(M["a"],{attrs:{"return-value":i.item.cabinClass,"save-text":"ذخیره","cancel-text":"",large:""},on:{"update:returnValue":function(e){return t.$set(i.item,"cabinClass",e)},"update:return-value":function(e){return t.$set(i.item,"cabinClass",e)},save:function(e){return t.save(i.item)},close:function(e){return t.save(i.item)}},scopedSlots:t._u([{key:"input",fn:function(){return[e(k["a"],{staticClass:"cabin",attrs:{items:["Economy","Business","FirstClass","Premium"],dense:"","hide-no-data":"","hide-details":""},scopedSlots:t._u([{key:"selection",fn:function({item:i}){return[e("span",{staticClass:"caption"},[t._v(t._s(i))])]}}],null,!0),model:{value:i.item.cabinClass,callback:function(e){t.$set(i.item,"cabinClass",e)},expression:"props.item.cabinClass"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[0].cabinClass==i.item.cabinClass,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[0].cabinClass!=i.item.cabinClass}},"span",s,!1),a),[t._v(t._s(i.item.cabinClass))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.cabinClass=t.firstData[0].cabinClass}}},[t._v(t._s(t.firstData[0].cabinClass))])])],1)]}},{key:"item.cabinClassCode",fn:function(i){return[e(M["a"],{attrs:{"return-value":i.item.cabinClassCode,"save-text":"ذخیره","cancel-text":"",large:""},on:{save:function(e){return t.save(i.item)},close:function(e){return t.save(i.item)}},scopedSlots:t._u([{key:"input",fn:function(){return[e(L["a"],{staticClass:"cabin",attrs:{items:["Y","C","F","A"],dense:"","hide-details":"",maxlength:"1"},scopedSlots:t._u([{key:"item",fn:function(i){return[e(r["a"],{staticClass:"mx-auto caption white--text",attrs:{label:"",small:"",dark:""}},[t._v(t._s(i.item))])]}}],null,!0),model:{value:i.item.cabinClassCode,callback:function(e){t.$set(i.item,"cabinClassCode",e)},expression:"props.item.cabinClassCode"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[0].cabinClassCode==i.item.cabinClassCode,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[0].cabinClassCode!=i.item.cabinClassCode}},"span",s,!1),a),[t._v(t._s(i.item.cabinClassCode))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.cabinClassCode=t.firstData[0].cabinClassCode}}},[t._v(t._s(t.firstData[0].cabinClassCode))])])],1)]}},{key:"item.capacity",fn:function(i){return[e(M["a"],{attrs:{"return-value":i.item.capacity,"save-text":"ذخیره","cancel-text":"",large:""},on:{close:function(e){return t.saveCapacity(t.firstData[0].capacity,i.item)}},scopedSlots:t._u([{key:"input",fn:function(){return[e($["a"],{attrs:{type:"number","hide-details":"","single-line":"",autofocus:""},model:{value:i.item.capacity,callback:function(e){t.$set(i.item,"capacity",e)},expression:"props.item.capacity"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[0].capacity==i.item.capacity,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[0].capacity!=i.item.capacity}},"span",s,!1),a),[t._v(t._s(i.item.capacity))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.capacity=t.firstData[0].capacity}}},[t._v(t._s(t.firstData[0].capacity))])])],1)]}},{key:"item.maxTour",fn:function(i){return[e(M["a"],{attrs:{"return-value":i.item.maxTour,"save-text":"ذخیره","cancel-text":"",large:""},on:{save:function(e){return t.save(i.item)},close:function(e){return t.save(i.item)}},scopedSlots:t._u([{key:"input",fn:function(){return[e($["a"],{attrs:{type:"number","hide-details":"","single-line":"",autofocus:""},model:{value:i.item.maxTour,callback:function(e){t.$set(i.item,"maxTour",e)},expression:"props.item.maxTour"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[0].maxTour==i.item.maxTour,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[0].maxTour!=i.item.maxTour}},"span",s,!1),a),[t._v(t._s(i.item.maxTour))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.maxTour=t.firstData[0].maxTour}}},[t._v(t._s(t.firstData[0].maxTour))])])],1)]}},{key:"item.maxOneway",fn:function(i){return[e(M["a"],{attrs:{"return-value":i.item.maxOneway,"save-text":"ذخیره","cancel-text":"",large:""},on:{save:function(e){return t.save(i.item)},close:function(e){return t.save(i.item)}},scopedSlots:t._u([{key:"input",fn:function(){return[e($["a"],{attrs:{type:"number","hide-details":"","single-line":"",autofocus:""},model:{value:i.item.maxOneway,callback:function(e){t.$set(i.item,"maxOneway",e)},expression:"props.item.maxOneway"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[0].maxOneway==i.item.maxOneway,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[0].maxOneway!=i.item.maxOneway}},"span",s,!1),a),[t._v(t._s(i.item.maxOneway))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.maxOneway=t.firstData[0].maxOneway}}},[t._v(t._s(t.firstData[0].maxOneway))])])],1)]}},{key:"item.maxRoundtrip",fn:function(i){return[e(M["a"],{attrs:{"return-value":i.item.maxRoundtrip,"save-text":"ذخیره","cancel-text":"",large:""},on:{save:function(e){return t.save(i.item)},close:function(e){return t.save(i.item)}},scopedSlots:t._u([{key:"input",fn:function(){return[e($["a"],{attrs:{type:"number","hide-details":"","single-line":"",autofocus:""},model:{value:i.item.maxRoundtrip,callback:function(e){t.$set(i.item,"maxRoundtrip",e)},expression:"props.item.maxRoundtrip"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[0].maxRoundtrip==i.item.maxRoundtrip,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[0].maxRoundtrip!=i.item.maxRoundtrip}},"span",s,!1),a),[t._v(t._s(i.item.maxRoundtrip))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.maxRoundtrip=t.firstData[0].maxRoundtrip}}},[t._v(t._s(t.firstData[0].maxRoundtrip))])])],1)]}},{key:"item.BtoB",fn:function(i){return[e(o["a"],{staticClass:"tableCheckboxes",class:{editCheckboxes:t.firstData[0].BtoB!=i.item.BtoB},attrs:{"false-value":0,"true-value":1,ripple:!1},on:{change:function(e){return t.editCheckbox(e,"BtoB")}},model:{value:i.item.BtoB,callback:function(e){t.$set(i.item,"BtoB",e)},expression:"props.item.BtoB"}})]}},{key:"item.BtoC",fn:function(i){return[e(o["a"],{staticClass:"tableCheckboxes",class:{editCheckboxes:t.firstData[0].BtoC!=i.item.BtoC},attrs:{"false-value":0,"true-value":1,ripple:!1},on:{change:function(e){return t.editCheckbox(e,"BtoC")}},model:{value:i.item.BtoC,callback:function(e){t.$set(i.item,"BtoC",e)},expression:"props.item.BtoC"}})]}},{key:"item.searchEngines",fn:function(i){return[e(o["a"],{staticClass:"tableCheckboxes",class:{editCheckboxes:t.firstData[0].searchEngines!=i.item.searchEngines},attrs:{"false-value":0,"true-value":1,ripple:!1},on:{change:function(e){return t.editCheckbox(e,"searchEngines")}},model:{value:i.item.searchEngines,callback:function(e){t.$set(i.item,"searchEngines",e)},expression:"props.item.searchEngines"}})]}},{key:"item.singleFlight",fn:function(i){return[e(o["a"],{staticClass:"tableCheckboxes",class:{editCheckboxes:t.firstData[0].singleFlight!=i.item.singleFlight},attrs:{"false-value":0,"true-value":1,ripple:!1},on:{change:function(e){return t.editCheckbox(e,"singleFlight")}},model:{value:i.item.singleFlight,callback:function(e){t.$set(i.item,"singleFlight",e)},expression:"props.item.singleFlight"}})]}},{key:"item.flightAndHotel",fn:function(i){return[e(o["a"],{staticClass:"tableCheckboxes",class:{editCheckboxes:t.firstData[0].flightAndHotel!=i.item.flightAndHotel},attrs:{"false-value":0,"true-value":1,ripple:!1},on:{change:function(e){return t.editCheckbox(e,"flightAndHotel")}},model:{value:i.item.flightAndHotel,callback:function(e){t.$set(i.item,"flightAndHotel",e)},expression:"props.item.flightAndHotel"}})]}},{key:"item.autoBuy",fn:function(i){return[e(o["a"],{staticClass:"tableCheckboxes",class:{editCheckboxes:t.firstData[0].autoBuy!=i.item.autoBuy},attrs:{"false-value":0,"true-value":1,ripple:!1},on:{change:function(e){return t.editCheckbox(e,"autoBuy")}},model:{value:i.item.autoBuy,callback:function(e){t.$set(i.item,"autoBuy",e)},expression:"props.item.autoBuy"}})]}},{key:"item.ClassStatus",fn:function(i){return[e(R["a"],{staticClass:"editSwitch",class:{editSwitchChanged:t.firstData[0].ClassStatus!=i.item.ClassStatus},attrs:{height:"24px","false-value":0,"true-value":1,"background-color":i.item.ClassStatus?"#4caf5075":"#f4433675",color:i.item.ClassStatus?"green":"red"},on:{change:function(e){return t.editCheckbox(e,"ClassStatus")}},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticStyle:{"text-align":"left"},style:i.item.ClassStatus?{color:"green"}:{color:"red"}},[t._v(t._s(i.item.ClassStatus?"فعال":"غیر فعال"))])]},proxy:!0}],null,!0),model:{value:i.item.ClassStatus,callback:function(e){t.$set(i.item,"ClassStatus",e)},expression:"props.item.ClassStatus"}})]}}])})],1)],1)],1)],1)},J=[],K={data:()=>({selectedRows:[],validationDialog:!1,validateProblem:"",collectiveCheck:!1}),computed:{editClasses(){return this.$store.getters["flightEdit/getEditedClasses"]}},created(){},methods:{createClicked(t){this.selectedRows=t?[]:this.expandedTableItems},checkProperties(t,e){let i=JSON.parse(JSON.stringify(t));for(var a in this.validateProblem="",delete i.SaleFlight,delete i.Webservice,delete i.B2C,delete i.B2B,delete i.Status,delete i.CabinClass,i)if(("string"===typeof i[a]||i[a]instanceof String)&&""==i[a]){let t="";switch(a){case"CabinClassCode":t=" کد کابین";break;case"Capacity":t="ظرفیت ";break;case"MaxTour":t="ح.ف.بلیت تور";break;case"MaxOneway":t="ح.ف.یک طرفه";break;case"MaxRoundtrip":t="ح.ف. دو طرفه";break}this.validateProblem=t+" الزامی می باشد";let i=a.charAt(0).toLowerCase()+a.slice(1);this.$set(this.expandedTableItems[e],i,this.firstData[e][i])}return!(this.validateProblem.length>1)},saveCapacity(t,e){let i={Id:e.classId,OldCapacity:t.toString(),NewCapacity:e.capacity.toString(),Quota:e.quota,QuotaAccountId:e.quotaAccountId};this.$store.commit("flightEdit/setOneCapacityClasses",{updated:i,row:this.expandedTableItems[0].row})},save(t){parseInt(t.twoWay)>parseInt(t.capacity)&&(this.expandedTableItems[0].maxRoundtrip=this.expandedTableItems[0].capacity),parseInt(t.MaxOneway)>parseInt(t.capacity)&&(this.expandedTableItems[0].MaxOneway=this.expandedTableItems[0].capacity),parseInt(t.tourTicket)>parseInt(t.capacity)&&(this.expandedTableItems[0].tourTicket=this.expandedTableItems[0].capacity);let e={Id:this.expandedTableItems[0].classId,Capacity:this.expandedTableItems[0].capacity,CabinClass:this.expandedTableItems[0].cabinClass,MaxRoundtrip:this.expandedTableItems[0].maxRoundtrip,MaxOneway:this.expandedTableItems[0].maxOneway,MaxTour:this.expandedTableItems[0].maxTour,B2B:this.expandedTableItems[0].BtoB,B2C:this.expandedTableItems[0].BtoC,Webservice:this.expandedTableItems[0].searchEngines,Tour:this.expandedTableItems[0].flightAndHotel,SaleFlight:this.expandedTableItems[0].singleFlight,CabinClassCode:this.expandedTableItems[0].cabinClassCode,Status:this.expandedTableItems[0].ClassStatus};this.checkProperties(e,t.row)?(this.$store.commit("flightEdit/setOneEditedClasses",{updated:e,row:this.expandedTableItems[0].row}),this.$store.commit("flightEdit/setQuota",this.expandedTableItems[0].quota)):this.validationDialog=!0},changeCollectiveCallForCapacity(t){t?this.$store.commit("flightEdit/setOneEditedClasses",{updated:!0,row:this.expandedTableItems[0].row}):this.$store.commit("flightEdit/setOneEditedClasses",{updated:!1,row:this.expandedTableItems[0].row})},editCheckbox(t,e){switch(e){case"BtoB":this.expandedTableItems[0].BtoB=t;break;case"BtoC":this.expandedTableItems[0].BtoC=t;break;case"searchEngines":this.expandedTableItems[0].searchEngines=t;break;case"singleFlight":this.expandedTableItems[0].singleFlight=t;break;case"flightAndHotel":this.expandedTableItems[0].flightAndHotel=t;break;case"autoBuy":this.expandedTableItems[0].autoBuy=t;break;case"ClassStatus":this.expandedTableItems[0].ClassStatus=t;break}let i={Id:this.expandedTableItems[0].classId,Capacity:this.expandedTableItems[0].capacity,CabinClass:this.expandedTableItems[0].cabinClass,MaxRoundtrip:this.expandedTableItems[0].maxRoundtrip,MaxOneway:this.expandedTableItems[0].maxOneway,MaxTour:this.expandedTableItems[0].maxTour,B2B:this.expandedTableItems[0].BtoB,B2C:this.expandedTableItems[0].BtoC,Webservice:this.expandedTableItems[0].searchEngines,Tour:this.expandedTableItems[0].flightAndHotel,SaleFlight:this.expandedTableItems[0].singleFlight,CabinClassCode:this.expandedTableItems[0].cabinClassCode,Status:this.expandedTableItems[0].ClassStatus};this.$store.commit("flightEdit/setOneEditedClasses",{updated:i,row:this.expandedTableItems[0].row})}},props:["title","isCollectiveCapacity","expandedHeader","expandedTableItems","firstData","editAllCapacities","isCollectiveCapacity"],mounted(){},watch:{selectedRows(){},editAllCapacities(t){t?(this.$store.commit("flightEdit/setOneEditedClasses",{updated:!0,row:this.expandedTableItems[0].row}),this.collectiveCheck=!0):(this.$store.commit("flightEdit/setOneEditedClasses",{updated:!1,row:this.expandedTableItems[0].row}),this.collectiveCheck=!1)}}},X=K,Z=(i("408c"),Object(Y["a"])(X,V,J,!1,null,null,null)),tt=Z.exports,et=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"mx-0",staticStyle:{"min-width":"100%"}},[e(d["a"],{staticClass:"d-flex align-center pr-1 pb-0",attrs:{color:"primary"}},[e("span",{staticClass:"px-1 primary--text"},[t._v(t._s(t.title))]),e(m["a"])],1)],1),e(u["a"],{staticClass:"nextRouteTable col-12 px-0",attrs:{"item-key":"row",items:t.tableFlights,loading:t.tableLoading,headers:t.headers,"loading-text":"لطفا صبر کنید ... درحال دریافت اطلاعات","no-data-text":t.$t("noDataAvailable"),"disable-pagination":"","hide-default-footer":"","disable-sort":""},scopedSlots:t._u([{key:"header[`DepartureDatetime`]",fn:function({header:i}){return[e("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.customSort("DepartureDatetime")}}},[e("span",[t._v(t._s(i.text))]),"desc"==t.sortby["DepartureDatetime"]?e("i",{staticClass:"v-icon notranslate icon-arrow-up icon-18",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e(),"asc"==t.sortby["DepartureDatetime"]?e("i",{staticClass:"v-icon notranslate icon-arrow-down icon-18",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e()])]}},{key:"header[`Capacity`]",fn:function({header:i}){return[e("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.customSort("Capacity")}}},[e("span",[t._v(t._s(i.text))]),"desc"==t.sortby["Capacity"]?e("i",{staticClass:"v-icon notranslate icon-arrow-up icon-18 theme--light",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e(),"asc"==t.sortby["Capacity"]?e("i",{staticClass:"v-icon notranslate icon-arrow-down icon-18 theme--light",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e()])]}},{key:"header[`Remain`]",fn:function({header:i}){return[e("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.customSort("Remain")}}},[e("span",[t._v(t._s(i.text))]),"desc"==t.sortby["Remain"]?e("i",{staticClass:"v-icon notranslate icon-arrow-up icon-18 theme--light",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e(),"asc"==t.sortby["Remain"]?e("i",{staticClass:"v-icon notranslate icon-arrow-down icon-18 theme--light",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e()])]}},{key:"header[`Lock`]",fn:function({header:i}){return[e("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.customSort("Lock")}}},[e("span",[t._v(t._s(i.text))]),"desc"==t.sortby["Lock"]?e("i",{staticClass:"v-icon notranslate icon-arrow-up icon-18 theme--light",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e(),"asc"==t.sortby["Lock"]?e("i",{staticClass:"v-icon notranslate icon-arrow-down icon-18 theme--light",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e()])]}},{key:"header[`Ticketed`]",fn:function({header:i}){return[e("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.customSort("Ticketed")}}},[e("span",[t._v(t._s(i.text))]),"desc"==t.sortby["Ticketed"]?e("i",{staticClass:"v-icon notranslate icon-arrow-up icon-18 theme--light",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e(),"asc"==t.sortby["Ticketed"]?e("i",{staticClass:"v-icon notranslate icon-arrow-down icon-18 theme--light",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e()])]}},{key:"header[`Reserve`]",fn:function({header:i}){return[e("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.customSort("Reserve")}}},[e("span",[t._v(t._s(i.text))]),"desc"==t.sortby["Reserve"]?e("i",{staticClass:"v-icon notranslate icon-arrow-up icon-18 theme--light",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e(),"asc"==t.sortby["Reserve"]?e("i",{staticClass:"v-icon notranslate icon-arrow-down icon-18 theme--light",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e()])]}},{key:"header[`Quota`]",fn:function({header:i}){return[e("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.customSort("Quota")}}},[e("span",[t._v(t._s(i.text))]),"desc"==t.sortby["Quota"]?e("i",{staticClass:"v-icon notranslate icon-arrow-up icon-18 theme--light",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e(),"asc"==t.sortby["Quota"]?e("i",{staticClass:"v-icon notranslate icon-arrow-down icon-18 theme--light",staticStyle:{"font-size":"18px",color:"white"},attrs:{"aria-hidden":"true"}}):t._e()])]}},{key:"item",fn:function({item:i,index:a}){return[e("tr",{staticClass:"noBorder"},[e("td",{staticClass:"text-center",staticStyle:{"border-bottom-right-radius":"10px",position:"relative"}},[i.isQuota?e("span",{staticClass:"quotaLine"}):t._e(),e("span",{staticClass:"px-1 font-weight-medium"},[t._v(t._s(i.Origin))]),e(p["a"],{staticClass:"px-0 mb-1 icon-arrow-right icon-18",attrs:{color:"primary",small:""}}),e("span",{staticClass:"px-1 font-weight-medium"},[t._v(t._s(i.Destination))])],1),e("td",{staticClass:"text-center font-weight-medium"},[t._v(" "+t._s(i.Departure)+" ")]),e("td",{staticClass:"text-center font-weight-medium"},[t._v(" "+t._s(i.DepartureDatetime.slice(10,16))+" ")]),e("td",{staticClass:"text-center font-weight-medium"},[t._v(" "+t._s(i.FlightSegments[0].Segment.FlightNo)+" ")]),e("td",{staticClass:"text-center font-weight-medium"},[t._v(" "+t._s(i.AirlineName)+" ("+t._s(i.FlightSegments[0].Segment.AirlineIataCode)+") ")]),e("td",{staticClass:"text-center font-weight-medium"},[t._v(" "+t._s(i.CabinClass)+" ")]),e("td",{staticClass:"text-center font-weight-medium"},[e(r["a"],{attrs:{"text-color":"#2CA62D",color:"#2CA62D47",small:""},on:{click:function(e){return t.capacityClicked(i)}}},[t._v(t._s(i.Capacity))])],1),e("td",{staticClass:"text-center font-weight-medium"},[e(r["a"],{attrs:{color:"#6E4FD747","text-color":"#6E4FD7",small:""}},[t._v(t._s(i.Seatremaining))])],1),e("td",{staticClass:"text-center font-weight-medium"},[e(r["a"],{attrs:{"text-color":"#FF9F1C",color:"#FF9F1C47",small:""}},[t._v(t._s(i.Locked))])],1),e("td",{staticClass:"text-center font-weight-medium"},[e(r["a"],{attrs:{"text-color":"#DF6FDB",color:"#DF6FDB47",small:""},on:{click:function(e){return t.ticketClicked(i)}}},[t._v(t._s(i.Ticketed))])],1),e("td",{staticClass:"text-center font-weight-medium"},[e(r["a"],{attrs:{"text-color":"#5189F6",color:"#5189F647",small:""}},[t._v(t._s(i.Reserved))])],1),e("td",{staticClass:"text-center font-weight-medium",staticStyle:{"border-bottom-left-radius":"10px"}},[e("span",{staticStyle:{"white-space":"nowrap",width:"5px",overflow:"hidden","text-overflow":"ellipsis"}},[e(r["a"],{attrs:{small:"","text-color":"#F4714E",color:"#F4714E47"},on:{click:function(e){return t.quotaClicked(i)}}},[t._v(t._s(i.QuotaName))])],1)]),e("td",{staticClass:"text-center"},[e(I["a"],t._l(t.expandItems,(function(i,s){return e("div",{key:s,staticClass:"ml-2"},[e(O["a"],{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:l,attrs:n}){return[e(p["a"],t._g(t._b({staticStyle:{cursor:"pointer"},attrs:{small:"",color:t.isExpanded[a][s]?"primary":""},on:{click:function(e){t.changeExpand(a,s),t.getExpandData(s)}}},"v-icon",n,!1),l),[t._v(t._s(i.icon))])]}}],null,!0)},[t._v(" "+t._s(i.name)+" ")])],1)})),0)],1)]),e("tr",{staticClass:"noBorder"},[e("td",{attrs:{colspan:"13"}},[e(I["a"],{staticClass:"d-flex flex-column align-end mx-0",staticStyle:{"max-width":"100%"}},[t.isExpanded[a][0]?e("div",{staticClass:"d-flex flex-column py-0",staticStyle:{"min-width":"100%"},attrs:{dense:""}},[e("detailsAndPrice",{attrs:{isCollectiveDetail:t.isCollectiveDetail,title:t.expandItems[0].name,expandedHeader:t.detailsHeader,expandedTableItems:t.detailsItems[a],firstData:t.detailsFirst[a],CodeCommissions:t.CodeCommissions}})],1):t._e(),t.isExpanded[a][1]?e("div",{staticClass:"d-flex flex-column",staticStyle:{"min-width":"100%"},attrs:{dense:""}},[e("capacityExpand",{attrs:{isCollectiveCapacity:t.isCollectiveCapacity,title:t.expandItems[1].name,expandedHeader:t.capacityHeader,expandedTableItems:t.capacityItems[a],firstData:t.capacityFirst[a]}})],1):t._e(),t.isExpanded[a][2]?e("div",{staticClass:"d-flex flex-column",staticStyle:{"min-width":"100%"},attrs:{dense:""}},t._l(t.priceItems[a],(function(i,s){return e("div",{key:s},[e("nextRoutePriceExpand",{attrs:{isCollectivePrice:t.isCollectivePrice,title:`${t.expandItems[2].name}(${t.newRoutes[s]})`,firstData:t.priceFirst[a][s].Prices,CodeRule:t.CodeRule,levels:t.levels,baggages:t.baggages,capacity:t.newCapacities[s],currencies:t.currencies,costGeneralMode:!1,CodeCommissions:t.CodeCommissions,expandedHeader:t.priceHeader,expandedTableItems:i.Prices}})],1)})),0):t._e(),t.isExpanded[a][3]?e("div",{staticClass:"d-flex flex-column",staticStyle:{"min-width":"100%"},attrs:{dense:""}},[e("nextRouteExpand",{attrs:{title:t.expandItems[3].name,flight:t.tableFlights[0],CodeRule:t.CodeRule,classIds:t.newClassIds,routes:t.newRoutes,capacities:t.newCapacities,CodeCommissions:t.CodeCommissions,levels:t.levels,baggages:t.baggages,currencies:t.currencies,index:t.newIndex}})],1):t._e()])],1)])]}}]),model:{value:t.selectedRows,callback:function(e){t.selectedRows=e},expression:"selectedRows"}})],1)},it=[],at=i("0670"),st=function(){var t=this,e=t._self._c;return e("div",[e(h["a"],{attrs:{width:"50%"},model:{value:t.ruleDetail,callback:function(e){t.ruleDetail=e},expression:"ruleDetail"}},[e(n["a"],[e(T["a"],{staticClass:"justify-self-right tabRules d-flex flex-column flight-declare-tabs"},[e(w["a"],{attrs:{color:"primary"}}),e(E["a"],{staticStyle:{height:"40px",color:"#b7b7b7","letter-spacing":"0px"}},[t._v(" قانون "+t._s(t.ruleInfo.Code)+" ")]),e(F["a"]),e(l["a"],{staticClass:"elevation-0 align-self-end",attrs:{color:"white"},on:{click:function(e){t.ruleDetail=!1}}},[e(p["a"],{staticClass:"icon-remove icon-18",attrs:{size:"20"}})],1)],1),t.ruleInfo.Penalties&&t.ruleInfo.Penalties.length?e(c["c"],t._l(t.ruleInfo.Penalties,(function(i,a){return e(n["a"],{key:a,staticClass:"mt-5 grey--text text--darken-2 text--darken-2",staticStyle:{"background-color":"#eeeeee"},attrs:{flat:""}},[e(I["a"],{staticClass:"d-flex justify-space-between align-center ma-0 pt-2",staticStyle:{width:"100%"}},[e(d["a"],{staticClass:"pb-0 grey--text text--darken-2 text--darken-4",staticStyle:{"max-width":"fit-content"}},[e("span",[t._v(" جریمه کنسلی")])]),e(d["a"],{staticClass:"pa-0",staticStyle:{width:"100%"}},[e(m["a"],{staticClass:"primary",staticStyle:{width:"100%"}})],1)],1),e("div",{staticClass:"d-flex justify-space-around pa-2"},[e("span",[t._v("بزرگسال: "+t._s(i.Cancel.ADT))]),e("span",[t._v("کودک: "+t._s(i.Cancel.CHD))]),e("span",[t._v("نوزاد: "+t._s(i.Cancel.INF))])]),e("div",{staticClass:"d-flex justify-space-around mt-5 pa-2"},[e("span",[t._v("نوع جریمه: "+t._s("Percent"==i.PriceType?"درصد":"مبلغ"))]),e("span",[t._v("نوع: "+t._s("hourly"==i.Type?"دقیقه ای":"daily"==i.Type?"روزانه":"عدم حضور"))]),"daily"==i.Type?e("span",[t._v(" تاساعت: "+t._s(i.HourOfDay))]):t._e(),e("span",[t._v(t._s(i.Value)+" "+t._s("hourly"==i.Type?"دقیقه مانده به پرواز":"روز مانده به پرواز"))])])],1)})),1):t._e(),t.ruleInfo.Rules&&t.ruleInfo.Rules.length?e(c["c"],t._l(t.ruleInfo.Rules,(function(i,a){return e(n["a"],{key:a,staticClass:"grey--text text--darken-2 text--darken-2",staticStyle:{"background-color":"#eeeeee"},attrs:{flat:""}},[e(I["a"],{staticClass:"d-flex justify-space-between align-center ma-0 pt-2",staticStyle:{width:"100%"}},[e(d["a"],{staticClass:"pb-0 grey--text text--darken-2 text--darken-4",staticStyle:{"max-width":"fit-content"}},[e("span",[t._v(" توضیحات متنی")])]),e(d["a"],{staticClass:"pa-0",staticStyle:{width:"100%"}},[e(m["a"],{staticClass:"primary",staticStyle:{width:"100%"}})],1)],1),e("div",{staticClass:"d-flex justify-space-around pa-2"},[e("span",[t._v("عنوان: "+t._s(i.SubTitle))]),e("span",[t._v("شرح: "+t._s(i.Text))])])],1)})),1):t._e()],1)],1),e(h["a"],{attrs:{width:"30%"},model:{value:t.baggageDialog,callback:function(e){t.baggageDialog=e},expression:"baggageDialog"}},[e(n["a"],{attrs:{flat:""}},[e(c["c"],{staticClass:"grey--text text--darken-2 text--darken-2"},[e(I["a"],{staticClass:"d-flex justify-space-between align-center ma-0 pt-2",staticStyle:{width:"100%"}},[e(m["a"],{staticClass:"primary",staticStyle:{width:"100%"}}),e(d["a"],{staticClass:"pb-0 grey--text text--darken-2 text--darken-4",staticStyle:{"max-width":"fit-content"}},[e("span",[t._v(" مقدار بار")]),e("span",[t._v(" "+t._s(t.baggageInfo.Code))])]),e(d["a"],{staticClass:"pa-0",staticStyle:{width:"100%"}},[e(m["a"],{staticClass:"primary",staticStyle:{width:"100%"}})],1)],1),e("div",{staticClass:"d-flex justify-space-around pa-2"},[e("table",{staticClass:"mt-3"},[e("thead",[e("tr",[e("th",{staticClass:"text-center"},[t._v("بزرگسال")]),e("th",{staticClass:"text-center"},[t._v("کودک")]),e("th",{staticClass:"text-center"},[t._v("نوزاد")])])]),e("tbody",[e("tr",[e("td",{staticClass:"text-center px-3"},[e("span",{staticClass:"pr-1"},[t._v(t._s(t.baggageInfo.Adt))]),e("span",[t._v(t._s(t.baggageInfo.Unit))])]),e("td",{staticClass:"text-center px-3"},[e("span",{staticClass:"pr-1"},[t._v(t._s(t.baggageInfo.Chd))]),e("span",[t._v(t._s(t.baggageInfo.Unit))])]),e("td",{staticClass:"text-center px-3"},[e("span",{staticClass:"pr-1"},[t._v(t._s(t.baggageInfo.Inf))]),e("span",[t._v(t._s(t.baggageInfo.Unit))])])])])])])],1),e(c["a"],[e(F["a"]),e(l["a"],{attrs:{depressed:""},on:{click:function(e){t.baggageDialog=!1}}},[t._v("بستن")])],1)],1)],1),e(h["a"],{attrs:{width:"30%"},model:{value:t.commissionDialog,callback:function(e){t.commissionDialog=e},expression:"commissionDialog"}},[e(n["a"],{attrs:{flat:""}},[e(c["c"],{staticClass:"grey--text text--darken-2 text--darken-2"},[e(I["a"],{staticClass:"d-flex justify-space-between align-center ma-0 pt-2",staticStyle:{width:"100%"}},[e(m["a"],{staticClass:"primary",staticStyle:{width:"100%"}}),e(d["a"],{staticClass:"pb-0 grey--text text--darken-2 text--darken-4 d-flex",staticStyle:{"max-width":"fit-content"}},[e("span",[t._v("کمسیسون")]),e("span",{staticClass:"mr-2"},[t._v(" "+t._s(t.commissionInfo.Code))])]),e(d["a"],{staticClass:"pa-0",staticStyle:{width:"100%"}},[e(m["a"],{staticClass:"primary",staticStyle:{width:"100%"}})],1)],1),e("div",{staticClass:"d-flex justify-space-around"},[e(j["a"],{staticClass:"mt-3"},[e("thead",[e("tr",[e("th",{staticClass:"text-center"},[t._v("گروه کمسیسونی")]),e("th",{staticClass:"text-center"},[t._v("بزرگسال")]),e("th",{staticClass:"text-center"},[t._v("کودک")]),e("th",{staticClass:"text-center"},[t._v("نوزاد")]),e("th",{staticClass:"text-center"},[t._v("نوع")])])]),e("tbody",t._l(t.commissionInfo.Commissions,(function(i,a){return e("tr",{key:a},[e("td",{staticClass:"text-center px-3"},[e("span",{staticClass:"pr-1"},[t._v(t._s(i.category))])]),e("td",{staticClass:"text-center px-3"},[e("span",{staticClass:"pr-1"},[t._v(t._s(i.Adt))])]),e("td",{staticClass:"text-center px-3"},[e("span",{staticClass:"pr-1"},[t._v(t._s(i.Chd))])]),e("td",{staticClass:"text-center px-3"},[e("span",{staticClass:"pr-1"},[t._v(t._s(i.Inf))])]),e("td",{staticClass:"text-center px-3"},[e("span",{staticClass:"pr-1"},[t._v(t._s(t._f("calcType")(i.CalcType)))])])])})),0)])],1)],1),e(c["a"],[e(F["a"]),e(l["a"],{attrs:{depressed:""},on:{click:function(e){t.commissionDialog=!1}}},[t._v("بستن")])],1)],1)],1),e(h["a"],{attrs:{width:"500"},model:{value:t.validationDialog,callback:function(e){t.validationDialog=e},expression:"validationDialog"}},[e(n["a"],[e(c["d"],[t._v("اخطار")]),e(c["c"],t._l(t.validateProblems,(function(i){return e("div",{key:i},[t._v(t._s(i))])})),0),e(c["a"],[e(F["a"]),e(l["a"],{staticClass:"primary white--text",attrs:{depressed:""},on:{click:function(e){t.validationDialog=!1}}},[t._v("بستن")])],1)],1)],1),e("div",{staticClass:"mx-0",staticStyle:{"min-width":"100%"}},[e(d["a"],{staticClass:"d-flex align-center pr-1 pb-0",attrs:{color:"primary"}},[e("span",{staticClass:"px-1 primary--text"},[t._v(t._s(t.title))]),e(m["a"])],1),e(d["a"],{staticClass:"d-flex py-0 align-center"},[e(I["a"],{staticClass:"d-flex py-0",staticStyle:{width:"100%"}},[e(u["a"],{staticClass:"expandedTable",staticStyle:{width:"100%"},attrs:{"item-key":"index",headers:t.expandedHeader,items:t.expandedTableItems,"disable-pagination":"","hide-default-footer":"","disable-sort":"",dense:"","loading-text":"لطفا صبر کنید ... درحال دریافت اطلاعات","no-data-text":t.$t("noDataAvailable")},scopedSlots:t._u([t.levels&&!t.costGeneralMode?{key:"footer",fn:function(){return[e(I["a"],{staticClass:"d-flex"},[e(l["a"],{staticClass:"caption mt-2 mr-3",attrs:{depressed:""},on:{click:t.addItem}},[e(p["a"],{staticClass:"icon-add icon-18",attrs:{small:""}}),t._v("افزودن کلاس نرخی ")],1),e(F["a"]),e(l["a"],{staticClass:"caption warning mt-2 ml-4",attrs:{depressed:""},on:{click:t.finalSave}},[t._v(" ذخیره ")])],1)]},proxy:!0}:null,{key:"item.PriceClass",fn:function(i){return[t.costGeneralMode?e("div",[e("span",{staticClass:"canSell",staticStyle:{border:"5px solid var(--v-success-lighten1)"}}),e("span",[t._v(t._s(i.item.PriceClass))])]):e("div",{staticStyle:{position:"relative"}},[e("div",[i.item.canSellInThisRange?e("span",{staticClass:"canSell",staticStyle:{border:"5px solid var(--v-success-lighten1)"}}):e("span",{staticClass:"canSell",staticStyle:{border:"5px solid var(--v-error-lighten1)"}})]),e(M["a"],{attrs:{"return-value":i.item.PriceClass,"save-text":"ذخیره","cancel-text":"",large:""},on:{save:t.savePrice,close:t.savePrice},scopedSlots:t._u([{key:"input",fn:function(){return[e(L["a"],{staticClass:"cabin",attrs:{items:["Y","C","F","A"],dense:"","hide-details":"",maxlength:"1"},scopedSlots:t._u([{key:"item",fn:function(i){return[e(r["a"],{staticClass:"mr-3 caption white--text",attrs:{label:"",small:"",dark:""}},[t._v(t._s(i.item))])]}}],null,!0),model:{value:i.item.PriceClass,callback:function(e){t.$set(i.item,"PriceClass",e)},expression:"props.item.PriceClass"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].PriceClass==i.item.PriceClass,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({staticClass:"pr-5",class:{edited:t.firstData[i.item.index].PriceClass!=i.item.PriceClass}},"span",s,!1),a),[t._v(t._s(i.item.PriceClass))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.PriceClass=t.firstData[i.item.index].PriceClass,t.savePrice()}}},[t._v(t._s(t.firstData[i.item.index].PriceClass))])])],1)],1)]}},{key:"item.NationalityInclude",fn:function(i){return[t.costGeneralMode?e("div",[e("span",{staticClass:"canSell",staticStyle:{border:"5px solid var(--v-success-lighten1)"}}),e("span",[t._v(t._s(i.item.Nationality.Include))])]):e("div",{staticStyle:{position:"relative"}},[e("div",[i.item.canSellInThisRange?e("span",{staticClass:"canSell",staticStyle:{border:"5px solid var(--v-success-lighten1)"}}):e("span",{staticClass:"canSell",staticStyle:{border:"5px solid #e63232"}})]),e(M["a"],{attrs:{"return-value":i.item.Nationality.Include,"save-text":"ذخیره","cancel-text":"",large:""},on:{save:t.savePrice,close:t.savePrice,open:function(t){i.item.Nationality.Include=[]}},scopedSlots:t._u([{key:"input",fn:function(){return[e(a["a"],{ref:"adultCost",staticClass:"centerinp nationailtySelect",attrs:{label:"انتخاب ملیت",items:t.countries,"item-text":"searchKey","item-value":"abb","hide-details":"",multiple:"",autocomplete:"off",outlined:"",dense:""},scopedSlots:t._u([{key:"item",fn:function({item:i,on:a,attrs:s}){return[e(v["a"],t._g(t._b({scopedSlots:t._u([{key:"default",fn:function({active:a}){return[e(g["a"],[e(o["a"],{attrs:{"input-value":a}})],1),e(y["a"],[e(y["c"],[e("span",{staticClass:"font-size-11"},[t._v(t._s(i.name_fa))])])],1)]}}],null,!0)},"v-list-item",s,!1),a))]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"font-size-11 text-start"},[t._v(t._s(i.item.name_fa))])]}},{key:"prepend-inner",fn:function(){return[e(p["a"],{attrs:{size:"12"}},[t._v("*")])]},proxy:!0}],null,!0),model:{value:i.item.Nationality.Include,callback:function(e){t.$set(i.item.Nationality,"Include",e)},expression:"props.item.Nationality.Include"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].Nationality.Include==i.item.Nationality.Include,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({staticClass:"pr-5",class:{edited:t.firstData[i.item.index].Nationality.Include!=i.item.Nationality.Include}},"span",s,!1),a),[t._v(t._s(i.item.Nationality.Include))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.Nationality.Include="",t.savePrice()}}},[t._v(t._s(t.firstData[i.item.index].Nationality.Include))])])],1)],1)]}},{key:"item.NationalityExclude",fn:function(i){return[t.costGeneralMode?e("div",[e("span",{staticClass:"canSell",staticStyle:{border:"5px solid var(--v-success-lighten1)"}}),e("span",[t._v(t._s(i.item.Nationality.Exclude))])]):e("div",{staticStyle:{position:"relative"}},[e("div",[i.item.canSellInThisRange?e("span",{staticClass:"canSell",staticStyle:{border:"5px solid var(--v-success-lighten1)"}}):e("span",{staticClass:"canSell",staticStyle:{border:"5px solid #e63232"}})]),e(M["a"],{attrs:{"return-value":i.item.Nationality.Exclude,"save-text":"ذخیره","cancel-text":"",large:""},on:{save:t.savePrice,close:t.savePrice,open:function(t){i.item.Nationality.Exclude=[]}},scopedSlots:t._u([{key:"input",fn:function(){return[e(a["a"],{ref:"adultCost",staticClass:"centerinp nationailtySelect",attrs:{label:"انتخاب ملیت",items:t.countries,"item-text":"searchKey","item-value":"abb","hide-details":"",multiple:"",autocomplete:"off",outlined:"",dense:""},scopedSlots:t._u([{key:"item",fn:function({item:i,on:a,attrs:s}){return[e(v["a"],t._g(t._b({scopedSlots:t._u([{key:"default",fn:function({active:a}){return[e(g["a"],[e(o["a"],{attrs:{"input-value":a}})],1),e(y["a"],[e(y["c"],[e("span",{staticClass:"font-size-11"},[t._v(t._s(i.name_fa))])])],1)]}}],null,!0)},"v-list-item",s,!1),a))]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"font-size-11 text-start"},[t._v(t._s(i.item.name_fa))])]}},{key:"prepend-inner",fn:function(){return[e(p["a"],{attrs:{size:"12"}},[t._v("*")])]},proxy:!0}],null,!0),model:{value:i.item.Nationality.Exclude,callback:function(e){t.$set(i.item.Nationality,"Exclude",e)},expression:"props.item.Nationality.Exclude"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].Nationality.Exclude==i.item.Nationality.Exclude,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({staticClass:"pr-5",class:{edited:t.firstData[i.item.index].Nationality.Exclude!=i.item.Nationality.Exclude}},"span",s,!1),a),[t._v(t._s(i.item.Nationality.Exclude))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.Nationality.Exclude="",t.savePrice()}}},[t._v(t._s(t.firstData[i.item.index].Nationality.Exclude))])])],1)],1)]}},{key:"item.FromCapacity",fn:function(i){return[t.costGeneralMode?e("div",[t._v(" "+t._s(i.item.FromCapacity)+" ")]):e("div",[e(M["a"],{attrs:{"return-value":i.item.FromCapacity,"save-text":"ذخیره","cancel-text":"",large:""},on:{save:t.savePrice,close:t.savePrice},scopedSlots:t._u([{key:"input",fn:function(){return[e($["a"],{attrs:{type:"number","hide-details":"","single-line":"",autofocus:""},model:{value:i.item.FromCapacity,callback:function(e){t.$set(i.item,"FromCapacity",e)},expression:"props.item.FromCapacity"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].FromCapacity==i.item.FromCapacity,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[i.item.index].FromCapacity!=i.item.FromCapacity}},"span",s,!1),a),[t._v(t._s(i.item.FromCapacity))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.FromCapacity=t.firstData[i.item.index].FromCapacity,t.savePrice()}}},[t._v(t._s(t.firstData[i.item.index].FromCapacity))])])],1)],1)]}},{key:"item.ToCapacity",fn:function(i){return[t.costGeneralMode?e("div",[t._v(" "+t._s(i.item.ToCapacity)+" ")]):e("div",[e(M["a"],{attrs:{"return-value":i.item.ToCapacity,"save-text":"ذخیره","cancel-text":"",large:""},on:{save:t.savePrice,close:t.savePrice},scopedSlots:t._u([{key:"input",fn:function(){return[e($["a"],{attrs:{type:"number","hide-details":"","single-line":"",autofocus:""},model:{value:i.item.ToCapacity,callback:function(e){t.$set(i.item,"ToCapacity",e)},expression:"props.item.ToCapacity"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].ToCapacity==i.item.ToCapacity,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[i.item.index].ToCapacity!=i.item.ToCapacity}},"span",s,!1),a),[t._v(t._s(i.item.ToCapacity))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.ToCapacity=t.firstData[i.item.index].ToCapacity,t.savePrice()}}},[t._v(t._s(t.firstData[i.item.index].ToCapacity))])])],1)],1)]}},{key:"item.Code",fn:function(i){return[t.costGeneralMode?e("div",[t._v(" "+t._s(i.item.Code)+" ")]):e("div",[e(M["a"],{attrs:{"return-value":i.item.Code,"save-text":"ذخیره","cancel-text":"",large:""},on:{"update:returnValue":function(e){return t.$set(i.item,"Code",e)},"update:return-value":function(e){return t.$set(i.item,"Code",e)},save:t.savePrice,close:t.savePrice},scopedSlots:t._u([{key:"input",fn:function(){return[e(k["a"],{staticClass:"centerinp rules",attrs:{items:t.CodeRule,"return-object":"",placeholder:i.item.Code,dense:"","hide-details":"","menu-props":{offsetY:!0}},on:{change:function(e){return t.changeRule(e,i.item.index)}},scopedSlots:t._u([{key:"item",fn:function(i){return[e("span",{staticClass:"caption mr-1 black--text"},[t._v(t._s(i.item.Code)),e(p["a"],{staticClass:"icon-info-circle icon-18",attrs:{size:"15"},on:{click:function(e){return t.ruleInfoClicked(i.item)}}})],1)]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"caption mr-1 black--text"},[t._v(t._s(i.item.Code)+" ")])]}}],null,!0),model:{value:t.CodeSelect,callback:function(e){t.CodeSelect=e},expression:"CodeSelect"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].Code==i.item.Code,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[i.item.index].Code!=i.item.Code}},"span",s,!1),a),[t._v(t._s(i.item.Code))])]}}],null,!0)},[e("span",{on:{click:function(e){return t.saveDefaultCode(i.item.index)}}},[t._v(t._s(t.firstData[i.item.index].Code))])])],1)],1)]}},{key:"item.BaggageCode",fn:function(i){return[t.costGeneralMode?e("div",[t._v(" "+t._s(i.item.BaggageCode)+" ")]):e("div",[e(M["a"],{attrs:{"return-value":i.item.BaggageCode,"save-text":"ذخیره","cancel-text":"",large:""},on:{"update:returnValue":function(e){return t.$set(i.item,"BaggageCode",e)},"update:return-value":function(e){return t.$set(i.item,"BaggageCode",e)},save:t.savePrice,close:t.savePrice},scopedSlots:t._u([{key:"input",fn:function(){return[e(k["a"],{staticClass:"centerinp rules",attrs:{items:t.baggages,"return-object":"",placeholder:i.item.BaggageCode,dense:"","hide-details":"","menu-props":{offsetY:!0}},on:{change:function(e){return t.changeBaggage(e,i.item.index)}},scopedSlots:t._u([{key:"item",fn:function(i){return[e("span",{staticClass:"caption mr-1 black--text"},[t._v(t._s(i.item.Code)),e(p["a"],{staticClass:"icon-info-circle icon-18",attrs:{size:"15"},on:{click:function(e){return t.baggageInfoClicked(i.item)}}})],1)]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"caption mr-1 black--text"},[t._v(t._s(i.item.Code))])]}}],null,!0),model:{value:t.baggageSelect,callback:function(e){t.baggageSelect=e},expression:"baggageSelect"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].BaggageCode==i.item.BaggageCode,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[i.item.index].BaggageCode!=i.item.BaggageCode}},"span",s,!1),a),[t._v(t._s(i.item.BaggageCode))])]}}],null,!0)},[e("span",{on:{click:function(e){return t.saveDefaultBaggageCode(i.item.index)}}},[t._v(t._s(t.firstData[i.item.index].BaggageCode))])])],1)],1)]}},{key:"item.CommissionCode",fn:function(i){return[t.costGeneralMode?e("div",[t._v(" "+t._s(i.item.CommissionCode?i.item.CommissionCode:"تعریف نشده")+" ")]):e("div",[e(M["a"],{attrs:{"return-value":i.item.CommissionCode,"save-text":"ذخیره","cancel-text":"",large:""},on:{"update:returnValue":function(e){return t.$set(i.item,"CommissionCode",e)},"update:return-value":function(e){return t.$set(i.item,"CommissionCode",e)},save:t.savePrice,close:t.savePrice},scopedSlots:t._u([{key:"input",fn:function(){return[e(L["a"],{staticClass:"centerinp",attrs:{items:t.CodeCommissions,"item-text":"Code",label:"کمیسیون","return-object":"",placeholder:i.item.CommissionCode,"hide-details":"",outlined:"",dense:"","menu-props":{offsetY:!0}},on:{change:function(e){return t.changeCommision(e,i.item.index)}},scopedSlots:t._u([{key:"item",fn:function(i){return[e("span",{staticClass:"caption mr-1 black--text"},[t._v(t._s(i.item.Code)),e(p["a"],{staticClass:"icon-info-circle icon-18",attrs:{size:"15"},on:{click:function(e){return e.stopPropagation(),t.commissionInfoClicked(i.item)}}})],1)]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"caption mr-1 black--text"},[t._v(t._s(i.item.Code))])]}}],null,!0)})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].CommissionCodeId==i.item.CommissionCodeId,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[i.item.index].CommissionCode!=i.item.CommissionCode}},"span",s,!1),a),[t._v(t._s(i.item.CommissionCode?i.item.CommissionCode:"تعریف نشده"))])]}}],null,!0)},[e("span",{on:{click:function(e){return t.saveDefaultCommisionCode(i.item.index)}}},[t._v(t._s(t.firstData[i.item.index].CommissionCode?t.firstData[i.item.index].CommissionCode:"تعریف نشده"))])])],1)],1)]}},{key:"item.LevelId",fn:function(i){return[t.costGeneralMode?e("div",[t._v(" "+t._s(-1!=i.item.LevelId?i.item.Level:"تعریف نشده")+" ")]):e("div",[e(M["a"],{attrs:{"return-value":i.item.LevelId,"save-text":"ذخیره","cancel-text":"",large:""},on:{"update:returnValue":function(e){return t.$set(i.item,"LevelId",e)},"update:return-value":function(e){return t.$set(i.item,"LevelId",e)},save:t.savePrice,close:t.savePrice},scopedSlots:t._u([{key:"input",fn:function(){return[e(k["a"],{staticClass:"centerinp rules",attrs:{items:t.levels,"return-object":"",placeholder:i.item.Level.toString(),dense:"","hide-details":"","menu-props":{offsetY:!0}},on:{change:function(e){return t.changeLevel(e,i.item.index)}},scopedSlots:t._u([{key:"item",fn:function(i){return[e("span",{staticClass:"caption mr-1 black--text"},[t._v(t._s(i.item.Name))])]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"caption mr-1 black--text"},[t._v(t._s(i.item.Name))])]}}],null,!0)})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].LevelId==i.item.LevelId,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[i.item.index].LevelId!=i.item.LevelId}},"span",s,!1),a),[t._v(t._s(i.item.Level))])]}}],null,!0)},[e("span",{on:{click:function(e){t.saveLevelCode(i.item.index),i.item.LevelId=t.firstData[i.item.index].LevelId,i.item.Level=t.firstData[i.item.index].Level,t.savePrice()}}},[t._v(t._s(t.firstData[i.item.index].Level))])])],1)],1)]}},{key:"item.ADTFare",fn:function(i){return[t.costGeneralMode?e("div",[t._v(" "+t._s(t._f("commaNumber")(i.item.ADTFare))+" ")]):e("div",[e(M["a"],{attrs:{"return-value":i.item.ADTFare,"save-text":"ذخیره","cancel-text":"",large:""},on:{save:t.savePrice,close:t.savePrice},scopedSlots:t._u([{key:"input",fn:function(){return[e($["a"],{attrs:{"hide-details":"","single-line":"",autofocus:""},on:{input:function(e){return t.numberWithCommasADT(e,i.item.index)}},model:{value:i.item.ADTFare,callback:function(e){t.$set(i.item,"ADTFare",e)},expression:"props.item.ADTFare"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].ADTFare==i.item.ADTFare,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[i.item.index].ADTFare!=i.item.ADTFare}},"span",s,!1),a),[t._v(t._s(t._f("commaNumber")(i.item.ADTFare)))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.ADTFare=t.firstData[i.item.index].ADTFare,t.savePrice()}}},[t._v(t._s(t._f("commaNumber")(t.firstData[i.item.index].ADTFare)))])])],1)],1)]}},{key:"item.CHDFare",fn:function(i){return[t.costGeneralMode?e("div",[t._v(" "+t._s(t._f("commaNumber")(i.item.CHDFare))+" ")]):e("div",[e(M["a"],{attrs:{"return-value":i.item.CHDFare,"save-text":"ذخیره","cancel-text":"",large:""},on:{save:t.savePrice,close:t.savePrice},scopedSlots:t._u([{key:"input",fn:function(){return[e($["a"],{attrs:{"hide-details":"","single-line":"",autofocus:""},on:{input:function(e){return t.numberWithCommasCHD(e,i.item.index)}},model:{value:i.item.CHDFare,callback:function(e){t.$set(i.item,"CHDFare",e)},expression:"props.item.CHDFare"}})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].CHDFare==i.item.CHDFare,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[i.item.index].CHDFare!=i.item.CHDFare}},"span",s,!1),a),[t._v(t._s(t._f("commaNumber")(i.item.CHDFare)))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.CHDFare=t.firstData[i.item.index].CHDFare,t.savePrice()}}},[t._v(t._s(t._f("commaNumber")(t.firstData[i.item.index].CHDFare)))])])],1)],1)]}},{key:"item.INFFare",fn:function(i){return[t.costGeneralMode?e("div",[t._v(" "+t._s(t._f("commaNumber")(i.item.INFFare))+" ")]):e("div",[e(M["a"],{attrs:{"return-value":i.item.INFFare,"save-text":"ذخیره","cancel-text":"",large:""},on:{save:t.savePrice,close:t.savePrice},scopedSlots:t._u([{key:"input",fn:function(){return[e($["a"],{attrs:{"hide-details":"","single-line":"",autofocus:""},on:{input:function(e){return t.numberWithCommasINF(e,i.item.index)}},model:{value:i.item.INFFare,callback:function(e){t.$set(i.item,"INFFare",e)},expression:"props.item.INFFare"}},[t._v(t._s(t._f("commaNumber")(i.item.INFFare)))])]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].INFFare==i.item.INFFare,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({staticClass:"dsdsds",class:{edited:t.firstData[i.item.index].INFFare!=i.item.INFFare}},"span",s,!1),a),[t._v(t._s(t._f("commaNumber")(i.item.INFFare)))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.INFFare=t.firstData[i.item.index].INFFare,t.savePrice()}}},[t._v(t._s(t._f("commaNumber")(t.firstData[i.item.index].INFFare)))])])],1)],1)]}},{key:"item.Currency",fn:function(i){return[t.costGeneralMode?e("div",[t._v(" "+t._s(i.item.Currency)+" ")]):e("div",[e(M["a"],{attrs:{"return-value":i.item.Currency,"save-text":"ذخیره","cancel-text":"",large:""},on:{"update:returnValue":function(e){return t.$set(i.item,"Currency",e)},"update:return-value":function(e){return t.$set(i.item,"Currency",e)},save:t.savePrice,close:t.savePrice},scopedSlots:t._u([{key:"input",fn:function(){return[e(k["a"],{staticClass:"centerinp rules",attrs:{items:t.currencies,"return-object":"",placeholder:i.item.Currency,dense:"","hide-details":"","menu-props":{offsetY:!0}},on:{change:function(e){return t.changeCurrency(e,i.item.index)}},scopedSlots:t._u([{key:"item",fn:function(i){return[e("span",{staticClass:"caption mr-1 black--text"},[t._v(t._s(i.item.Abbr))])]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"caption mr-1 black--text"},[t._v(t._s(i.item.Abbr))])]}}],null,!0)})]},proxy:!0}],null,!0)},[e(O["a"],{attrs:{"content-class":"clickToolTip",disabled:t.firstData[i.item.index].Currency==i.item.Currency,top:"","close-delay":"2000"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({class:{edited:t.firstData[i.item.index].Currency!=i.item.Currency}},"span",s,!1),a),[t._v(t._s(i.item.Currency))])]}}],null,!0)},[e("span",{on:{click:function(e){i.item.Currency=t.firstData[i.item.index].Currency,t.savePrice()}}},[t._v(t._s(t.firstData[i.item.index].Currency))])])],1)],1)]}},{key:"item.route",fn:function({item:i}){return[e("span",{staticClass:"px-1"},[t._v(t._s(i.origin))]),e(p["a"],{staticClass:"px-0 mb-1 icon-arrow-right icon-18",attrs:{color:"primary",small:""}}),e("span",{staticClass:"px-1"},[t._v(t._s(i.destination))])]}}],null,!0)})],1)],1)],1)],1)},lt=[],nt={data:()=>({checkbox:!1,selectedRows:[],dialog:!1,timen:null,airplanes:[],airplane:"",ruleDetail:!1,countries:W["d"],ruleInfo:"",commissionDialog:"",baggageDialog:!1,baggageInfo:"",commissionInfo:"",searchAirplanes:"",collectiveCheckComDetail:!1,collectiveCheckComPrice:!1,airline:"",costObj:[],searchAirlines:"",validationDialog:!1,airlines:[],validateProblems:[],shouldCallInsertFlightLock:!1,CodeSelect:"",baggageSelect:"",CommissionCodeSelect:""}),computed:{editSegments(){return this.$store.getters["flightEdit/getEditedSegments"]},editPrices(){return this.$store.getters["flightEdit/getEditedPrices"]}},methods:{numberWithCommasADT(t,e){this.expandedTableItems[e].ADTFare=t.replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")},numberWithCommasCHD(t,e){this.expandedTableItems[e].CHDFare=t.replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")},numberWithCommasINF(t,e){this.expandedTableItems[e].INFFare=t.replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")},numberWithCommasADTMulti(t,e){this.expandedTableItems[e].ADTMultiWay=t.replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")},numberWithCommasCHDMulti(t,e){this.expandedTableItems[e].CHDMultiWay=t.replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")},numberWithCommasINFMulti(t,e){this.expandedTableItems[e].INFMultiWay=t.replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")},changeRule(t,e){this.expandedTableItems[e].Code=t.Code,this.expandedTableItems[e].CodeId=t.id},changeBaggage(t,e){this.expandedTableItems[e].BaggageCode=t.Code,this.expandedTableItems[e].BaggageId=t.Id},changeCommision(t,e){this.expandedTableItems[e].CommissionCode=t.Code,this.expandedTableItems[e].CommissionCodeId=t.CodeId},changeLevel(t,e){this.expandedTableItems[e].LevelId=t.Id,this.expandedTableItems[e].Level=t.Name},changeCurrency(t,e){this.expandedTableItems[e].Currency=t.Abbr},editCheckbox(t,e,i){switch(e){case"SegmentStatus":this.expandedTableItems[0].SegmentStatus=t;break}this.saveSegment(i)},checkProperties(t,e){for(var i in t)if(("string"===typeof t[i]||t[i]instanceof String)&&""==t[i]&&"PriceClass"!=i){let t,a="";switch(i){case"FlightNo":a="شماره پرواز";break;case"Duration":a="مدت زمان";break;case"SendList":a="ارسال لیست";break;case"CloseSaleFlight":a="توقف فروش";break;case"ADTFare":a="قیمت بزرگسال ";break;case"CHDFare":a="قیمت کودک";break;case"INFFare":a="قیمت نوزاد";break;case"FromCapacity":a="از ظرفیت";break;case"ToCapacity":a="تا ظرفیت";break;case"PriceClass":a="کلاس نرخی";break}this.validateProblems.push(a+" الزامی می باشد"),t=0==e?i.charAt(0).toLowerCase()+i.slice(1):i,this.$set(this.expandedTableItems[0],t,this.firstData[0][t])}return!this.validateProblems.length},changeCollectiveCallForDetails(t){t?this.$store.commit("flightEdit/setEditedSegments",{segment:!0,row:this.expandedTableItems[0].row}):this.$store.commit("flightEdit/setEditedSegments",{segment:!1,row:this.expandedTableItems[0].row})},checkObjectFull(t){if(Array.isArray(t)){let e=[];for(let i in t)e.push(this.checkObjectFull(t[i]));return!(this.cnLodash.uniq(e).length>1)&&e[0]}for(let e in t)if(!t[e])return!1;return!0},checkPriceObject(t){let e=[];for(let i in t)t[i].hasOwnProperty("adultCost")&&t[i].hasOwnProperty("childCost")&&t[i].hasOwnProperty("infantCost")&&t[i].hasOwnProperty("currency")&&t[i].hasOwnProperty("rateClass")&&t[i].hasOwnProperty("az")&&t[i].hasOwnProperty("ta")&&t[i].hasOwnProperty("level")&&t[i].hasOwnProperty("baggage")&&t[i].hasOwnProperty("rule")&&t[i].hasOwnProperty("commission")?e.push(!0):e.push(!1);return!(this.cnLodash.uniq(e).length>1)&&(1==e[0]&&this.checkObjectFull(t))},changeCollectiveCallForPrice(t){t?this.$store.commit("flightEdit/setOneEditedPrices",{price:!0,thisIsFromGeneral:this.costGeneralMode,shouldCallInsertFlightLock:!0,row:this.expandedTableItems[0].row}):this.$store.commit("flightEdit/setOneEditedPrices",{price:!1,thisIsFromGeneral:this.costGeneralMode,shouldCallInsertFlightLock:!0,row:this.expandedTableItems[0].row})},saveDefaultCommisionCode(t){this.expandedTableItems[t].CommissionCodeId=this.firstData[t].CommissionCodeId,this.expandedTableItems[t].CommissionCode=this.firstData[t].CommissionCode,this.savePrice()},saveLevelCode(t){this.expandedTableItems[t].CommissionCodeId=this.firstData[t].CommissionCodeId,this.expandedTableItems[t].CommissionCode=this.firstData[t].CommissionCode,this.savePrice()},saveDefaultCode(t){this.CodeSelect="",this.expandedTableItems[t].CodeId=this.firstData[t].CodeId,this.expandedTableItems[t].Code=this.firstData[t].Code,this.savePrice()},saveDefaultBaggageCode(t){this.baggageSelect="",this.expandedTableItems[t].BaggageId=this.firstData[t].BaggageId,this.expandedTableItems[t].BaggageCode=this.firstData[t].BaggageCode,this.savePrice()},deleteItem(t){const e=this.expandedTableItems.indexOf(t);var i=confirm("آیا از حذف این کلاس نرخی اطمینان دارید؟");i&&(this.expandedTableItems.splice(e,1),this.expandedTableItems.map((t,e)=>{t.index=e}),this.firstData.splice(e,1),this.firstData.map((t,e)=>{t.index=e}),this.shouldCallInsertFlightLock=!0,this.savePrice())},ruleInfoClicked(t){this.ruleDetail=!0,this.ruleInfo=t},baggageInfoClicked(t){this.baggageDialog=!0,this.baggageInfo=t},commissionInfoClicked(t){this.commissionDialog=!0,this.commissionInfo=t},addItem(){let t={...this.firstData[0]};t.row=this.expandedTableItems[0].row,t.PriceClass="",t.Nationality={},t.Nationality.Include=[],t.Nationality.Exclude=[];let e=this.expandedTableItems.length;t.index=e,this.firstData.push(t),this.expandedTableItems.push(t),this.savePrice()},savePrice(){this.validateProblems=[];let t=[];this.expandedTableItems.forEach((e,i)=>{if(this.checkProperties(e,i,3)){let i={Id:e.PriceDetailsId,Price:{Adult:{Fare:parseInt(e.ADTFare.replace(/,/g,"")),Tax:0,Commission:0,MultiWayFare:parseInt(e.ADTMultiWay.replace(/,/g,""))},Child:{Fare:parseInt(e.CHDFare.replace(/,/g,"")),Tax:0,Commission:0,MultiWayFare:parseInt(e.CHDMultiWay.replace(/,/g,""))},Infant:{Fare:parseInt(e.INFFare.replace(/,/g,"")),Tax:0,Commission:0,MultiWayFare:parseInt(e.INFMultiWay.replace(/,/g,""))}},Currency:e.Currency,PriceClass:e.PriceClass,FromCapacity:e.FromCapacity,Nationality:{Include:e.Nationality.Include,Exclude:e.Nationality.Exclude},ToCapacity:e.ToCapacity,LevelId:e.LevelId,BaggageId:e.BaggageId,CodeId:e.CodeId,CommissionCodeId:e.CommissionCodeId};t.push(i)}else this.validationDialog=!0}),this.costObj=t},finalSave(){this.rateClassCheck("PriceClass")?this.checkOverlap("FromCapacity","ToCapacity")?this.$toast.error("خطای همپوشانی"):this.FullCheck("FromCapacity","ToCapacity")?this.axios.put(this.$store.state.baseUrl+"inventory/prices",{Prices:this.costObj.filter(Boolean)}).then(()=>{this.$toast.success("قیمت ادامه مسیر با موفقیت تغییر یافت")}).catch(()=>{this.$toast.error("خطا")}):this.$toast.error("ظرفیت به طور کامل پر نشده است"):this.$toast.error("کلاسی نرخی باید متفاوت باشد")},between(t,e,i){return t>=e&&t<=i},simplify(t){var e=[],i=!1,a=!1,s=!1;return t.forEach((l,n)=>{1==l.az&&(a=!0),l.ta==this.capacity&&(s=!0),e=[],t.forEach((t,i)=>{l.ta!=this.capacity&&this.between(parseInt(l.ta)+1,t.az,t.ta)&&e.push(l)}),0==e.length&&l.ta!=this.capacity&&(i=!0)}),!i&a&s},compare(t,e){return t.az<e.az?-1:t.az>e.az?1:0},FullCheck(t,e){var i=[];return this.costObj.forEach(a=>{i.push({az:a[t],ta:a[e]})}),this.simplify(i.sort(this.compare))},rateClassCheck(t){if(this.costObj.some(e=>!e[t]))return!1;let e=this.cnLodash.unionBy(this.costObj,t);return this.costObj.length==e.length},checkOverlap(t,e){var i=!1;return this.costObj.forEach((a,s)=>{this.costObj.forEach((l,n)=>{n>s&&a.CodeId==l.CodeId&&a.LevelId==l.LevelId&&a.Nationality.Include.length===l.Nationality.Include.length&&a.Nationality.Include.every((function(t,e){return t===l.Nationality.Include[e]}))&&a.Nationality.Exclude.length===l.Nationality.Exclude.length&&a.Nationality.Exclude.every((function(t,e){return t===l.Nationality.Exclude[e]}))&&parseInt(l[t])===parseInt(a[t])&&parseInt(l[e])===parseInt(a[e])&&(i=!0)})}),i},createClicked(t){this.selectedRows=t?[]:this.expandedTableItems},infoClick(){this.dialog=!0}},props:["capacity","title","isCollectivePrice","isCollectiveDetail","expandedHeader","expandedTableItems","CodeCommissions","levels","baggages","costGeneralMode","CodeRule","currencies","firstData"],watch:{editSegments:{handler:function(t){t.length||(this.collectiveCheckComDetail=!1)},deep:!0},editPrices:{handler:function(t){t.length||(this.collectiveCheckComPrice=!1)},deep:!0},searchAirplanes(t){t&&t.length>2&&this.axios(this.$store.state.baseUrl+"airplanes?name="+t).then(t=>{t.data.Items.forEach((t,e)=>{this.$set(t,"searchAirplane",t.airplaneName+t.airplaneCode)}),this.airplanes=t.data.Items})},searchAirlines(t){t&&t.length>1&&this.axios(this.$store.state.baseUrl+"airlines?name="+t).then(t=>{t.data.Items.forEach((t,e)=>{this.$set(t,"searchAirlines",t.name+t.iata)}),this.airlines=t.data.Items})}}},ct=nt,ot=(i("2f99"),Object(Y["a"])(ct,st,lt,!1,null,null,null)),rt=ot.exports,dt=i("c53c"),ut={name:"nextRouteExpand",props:["routes","title","CodeCommissions","levels","baggages","CodeRule","currencies","capacities","flight","index","classIds"],data:()=>({paths:[],searchTable:"",costObjCollective:[{}],CabinClass:"",newRoutes:[],newIndex:0,nextRouteData:[],headers:[{text:"مسیر",value:"route",align:"center",sortable:!1},{text:"تاریخ حرکت",value:"DepartureDatetime",align:"center"},{text:"ساعت پرواز",value:"flightTime",align:"center"},{text:"شماره پرواز",value:"flightNo",align:"center",sortable:!1},{text:"ایرلاین",value:"airline",align:"center",sortable:!1},{text:"کلاس کابین",value:"CabinClass",align:"center",sortable:!1},{text:"ظرفیت",value:"Capacity",align:"center"},{text:"مانده",value:"Remain",align:"center"},{text:"درحال",value:"Lock",align:"center"},{text:"تیکت",value:"Ticketed",align:"center"},{text:"رزرو",value:"Reserve",align:"center"},{text:"سهمیه",value:"Quota",align:"center"},{text:"",value:"expands",align:"left",sortable:!1}],detailsHeader:[{text:"مسیر",value:"route"},{text:"شماره پرواز ",value:"flightNo"},{text:"تاریخ میلادی",value:"date"},{text:"ایرلاین",value:"airline"},{text:"هواپیما",value:"airplane"},{text:"طول",value:"duration"},{text:"ساعت پرواز",value:"flightTime"},{text:"ساعت رسیدن",value:"arrivalTime"},{text:"ارسال لیست",value:"sendList"},{text:"توقف فروش",value:"closeSaleFlight"},{text:"توضیحات",value:"description"},{text:"وضعیت",value:"SegmentStatus",sortable:!1}],capacityHeader:[{text:"کلاس کابین",value:"cabinClass",align:"right",sortable:!1},{text:"کد کابین",value:"cabinClassCode",sortable:!1,align:"right"},{text:"ظرفیت",value:"capacity",sortable:!1,align:"right"},{text:"ح.ف.بلیت تور",value:"maxTour",align:"right",sortable:!1},{text:"ح.ف.یک طرفه",value:"maxOneway",sortable:!1,align:"right"},{text:"ح.ف. دو طرفه",value:"maxRoundtrip",sortable:!1,align:"right"},{text:"B2B",value:"BtoB",sortable:!1,align:"right"},{text:"B2C",value:"BtoC",sortable:!1,align:"right"},{text:"موتور های جستجو",value:"searchEngines",sortable:!1,align:"right"},{text:"پرواز تک",value:"singleFlight",sortable:!1,align:"right"},{text:"پرواز+هتل",value:"flightAndHotel",sortable:!1,align:"right"},{text:"خرید اتوماتیک",value:"autoBuy",sortable:!1,align:"right"},{text:"وضعیت",value:"ClassStatus",sortable:!1,align:"right"}],priceHeader:[{text:"کلاس",value:"PriceClass",align:"right",width:"7%"},{text:"ملیت شامل",value:"NationalityInclude",align:"right",width:"7%"},{text:"ملیت به جز",value:"NationalityExclude",align:"right",width:"7%"},{text:"از ظرفیت",value:"FromCapacity",width:"6%",align:"right"},{text:"تا ظرفیت",value:"ToCapacity",align:"right",width:"6%"},{text:"قانون",value:"Code",align:"right"},{text:"بار",value:"BaggageCode",align:"right"},{text:"کمیسیون",value:"CommissionCode",align:"right"},{text:"گروه قیمتی",value:"LevelId",align:"right"},{text:"بزرگسال",value:"ADTFare",align:"right"},{text:"کودک",value:"CHDFare",align:"right"},{text:"نوزاد",value:"INFFare",align:"right"},{text:"ارز",value:"Currency",align:"right"},{text:"حذف",value:"action",align:"right"}],overlay:!0,PriceFlightLocks:[],airlines:[],newClassIds:[],newCapacities:[],editSucceed:!1,newFlight:"",pathselect:{},origin:"",destination:"",previewSnackbar:!0,detailsItems:[],costObj:[],validationDialog:!1,capacityItems:[],priceItems:[],expandItems:[{name:"مشخصات",icon:"icon-info-circle icon-18"},{name:"ظرفیت",icon:"icon-profile icon-18"},{name:"قیمت",icon:"icon-dollar-circle icon-18"},{name:"ادامه مسیر",icon:"icon-swap icon-18"}],sortby:{},tableFlights:[],validateProblems:[],isExpanded:[],nothingToShow:!0,capacity:1,selectedRows:[],originAirports:[],searchOriginLocation:null,searchDestLocation:null,DestAirports:[],oppositePath:!1,overlay:!1,firstExpand:[!0,!0,!0],detailsFirst:[],capacityFirst:[],priceFirst:[],priceForGeneral:[],priceFirstForGeneral:[],FlightLocks:[],originError:"",destinationError:"",snackbarCapacity:!1,snackbarCapacityText:"",snackbarCapacityColor:"",snackbar:!1,snackbarText:"",snackbarColor:"",acceptedFlightLocksLenghts:"",isCollectivePrice:!1,snackbarCost:!1,snackbarCostText:"",snackbarCostColor:"",moreThanTwo:!1,depDate:"",retDate:"",tableLoading:!1,mode1:"persian",mode2:"persian",datesEdit:[],searchAirlines:"",searchAirlinesCol:"",isCollectiveCapacity:!1,isCollectiveDetail:!1,isCollectivePriceToSend:!1,isCollectiveClassToSend:!1,isCollectiveDetailToSend:!1,airlines:[],airplanes:[],flightNumber:"",airline:"",searchAirplanes:"",collectiveDetailEdit:!1,collectiveCapacityEdit:!1,collectivePriceEdit:!1}),components:{costDeclare:dt["a"],nextRoutePriceExpand:rt,capacityExpand:tt,detailsAndPrice:q},computed:{primary(){return at["a"].framework.theme.themes.light.primary},greyy(){return"#ececec"}},methods:{between(t,e,i){return t>=e&&t<=i},simplify(t){var e=[],i=!1,a=!1,s=!1;return t.forEach((l,n)=>{1==l.az&&(a=!0),l.ta==this.capacity&&(s=!0),e=[],t.forEach((t,i)=>{l.ta!=this.capacity&&this.between(parseInt(l.ta)+1,t.az,t.ta)&&e.push(l)}),0==e.length&&l.ta!=this.capacity&&(i=!0)}),!i&a&s},compare(t,e){return t.az<e.az?-1:t.az>e.az?1:0},FullCheck(t,e){var i=[];return this.costObj.forEach(a=>{i.push({az:a[t],ta:a[e]})}),this.simplify(i.sort(this.compare))},rateClassCheck(t){let e=this.cnLodash.unionBy(this.costObj,t);return this.costObj.length==e.length},checkOverlap(t,e){var i=!1;return this.costObj.forEach((a,s)=>{this.costObj.forEach((l,n)=>{n>s&&a.CodeId==l.CodeId&&a.LevelId==l.LevelId&&a.Nationality.Include.length===l.Nationality.Include.length&&a.Nationality.Include.every((function(t,e){return t===l.Nationality.Include[e]}))&&a.Nationality.Exclude.length===l.Nationality.Exclude.length&&a.Nationality.Exclude.every((function(t,e){return t===l.Nationality.Exclude[e]}))&&parseInt(l[t])===parseInt(a[t])&&parseInt(l[e])===parseInt(a[e])&&(i=!0)})}),i},validatePricesAndUpdate(){if(this.isCollectivePriceToSend||this.isCollectiveClassToSend||this.isCollectiveDetailToSend)this.isCollectivePriceToSend&&(this.isCollectivePriceToSend=!1,this.axios.post(this.$store.state.baseUrl+"inventory/prices",{FlightLocks:this.PriceFlightLocks}).then(t=>{t.data.Success?(this.$toast.success("ویرایش گروهی قیمت موفق"),this.$store.commit("flightEdit/setEditedSegments","")):(this.$toast.error("ویرایش گروهی قیمت ناموفق"),this.$store.commit("flightEdit/setEditedSegments",""))}).catch(t=>{this.$toast.error("ویرایش گروهی قیمت ناموفق"),this.$store.commit("flightEdit/setEditedSegments","")})),this.isCollectiveClassToSend&&(this.$store.getters["flightEdit/getEditedClasses"].length&&this.$store.dispatch("flightEdit/updateClasses").then(()=>{this.$toast.success("ویرایش گروهی ظرفیت موفق"),this.$store.commit("flightEdit/setOneEditedClasses","")}).catch(t=>{this.$toast.error("ویرایش گروهی ظرفیت ناموفق"),this.$store.commit("flightEdit/setOneEditedClasses","")}),this.$store.getters["flightEdit/getEditedCapacities"].length&&this.$store.dispatch("flightEdit/updateClassesCapacity").then(()=>{this.$toast.success("ویرایش گروهی ظرفیت موفق"),this.$store.commit("flightEdit/setOneCapacityClasses","")}).catch(t=>{this.$toast.error("ویرایش گروهی ظرفیت ناموفق"),this.$store.commit("flightEdit/setOneCapacityClasses","")}),this.isCollectiveClassToSend=!1),this.isCollectiveDetailToSend&&(this.$store.dispatch("flightEdit/updateSegments").then(()=>{this.$toast.success("ویرایش گروهی مشخصات موفق"),this.$store.commit("flightEdit/setEditedSegments","")}).catch(t=>{this.$toast.error("ویرایش گروهی مشخصات ناموفق"),this.$store.commit("flightEdit/setEditedSegments","")}),this.isCollectiveDetailToSend=!1),this.searchFlights();else{if(this.validateProblems=[],this.$store.getters["flightEdit/getEditedPrices"].length)for(let t=0;t<this.$store.getters["flightEdit/getEditedPrices"].length;t++){if(this.$store.getters["flightEdit/getEditedPrices"][t]){let e;this.costObjFirst=this.$store.getters["flightEdit/getEditedPrices"][t],this.costObj=this.costObjFirst.price,this.$store.getters["flightDeclare/getFlightsToEdit"].map(t=>t.Prices.map(i=>this.costObj.filter(a=>{i.PriceDetailsId==a.Id&&(e=t)}))),this.capacity=e.Capacity-e.QuotaCount;let i=[e.Origin,e.Destination],a=e.DepartureDatetime;this.rateClassCheck("PriceClass")?this.checkOverlap("FromCapacity","ToCapacity")?this.validateProblems[t]=`خطای همپوشانی در مسیر ${i[0]} به ${i[1]} در تاریخ ${a}`:this.costObjFirst.thisIsFromGeneral||this.FullCheck("FromCapacity","ToCapacity")?(this.$store.getters["flightEdit/getEditedSegments"].length&&this.$store.dispatch("flightEdit/updateSegments").then(()=>{this.$toast.success("ویرایش مشخصات موفق"),this.$store.commit("flightEdit/setEditedSegments","")}).catch(t=>{this.$toast.error("ویرایش مشخصات ناموفق"),this.$store.commit("flightEdit/setEditedSegments","")}),this.$store.getters["flightEdit/getEditedClasses"].length&&this.$store.dispatch("flightEdit/updateClasses").then(()=>{this.$toast.success("ویرایش ظرفیت موفق"),this.$store.commit("flightEdit/setOneEditedClasses","")}).catch(t=>{this.$toast.error("ویرایش ظرفیت ناموفق"),this.$store.commit("flightEdit/setOneEditedClasses","")}),this.$store.getters["flightEdit/getEditedCapacities"].length&&this.$store.dispatch("flightEdit/updateClassesCapacity").then(()=>{this.$toast.success("ویرایش ظرفیت موفق"),this.$store.commit("flightEdit/setOneCapacityClasses","")}).catch(t=>{this.$toast.error("ویرایش ظرفیت ناموفق"),this.$store.commit("flightEdit/setOneCapacityClasses","")}),this.costObjFirst.shouldCallInsertFlightLock?this.$store.dispatch("flightEdit/insertPrices",e).then(()=>{this.$toast.success("ویرایش قیمت موفق"),this.$store.commit("flightEdit/setOneEditedPrices","")}).catch(t=>{this.$toast.error("ویرایش قیمت ناموفق"),this.$store.commit("flightEdit/setOneEditedPrices","")}):this.$store.dispatch("flightEdit/updatePrices").then(()=>{this.$toast.success("ویرایش قیمت موفق"),this.$store.commit("flightEdit/setOneEditedPrices","")}).catch(t=>{this.$toast.error("ویرایش قیمت ناموفق"),this.$store.commit("flightEdit/setOneEditedPrices","")})):this.validateProblems[t]=`خطای عدم تکمیل ظرفیت در مسیر ${i[0]} به ${i[1]} در تاریخ ${a}`:this.validateProblems[t]=`خطای کلاس نرخی در مسیر ${i[0]} به ${i[1]} در تاریخ ${a}`}this.validateProblems.length&&(this.validationDialog=!0)}else this.$store.getters["flightEdit/getEditedSegments"].length&&this.$store.dispatch("flightEdit/updateSegments").then(()=>{this.$toast.success("ویرایش مشخصات موفق"),this.$store.commit("flightEdit/setEditedSegments","")}).catch(t=>{this.$toast.error("ویرایش مشخصات ناموفق"),this.$store.commit("flightEdit/setEditedSegments","")}),this.$store.getters["flightEdit/getEditedCapacities"].length&&this.$store.dispatch("flightEdit/updateClassesCapacity").then(()=>{this.$toast.success("ویرایش ظرفیت موفق"),this.$store.commit("flightEdit/setOneCapacityClasses","")}).catch(t=>{this.$toast.error("ویرایش ظرفیت ناموفق"),this.$store.commit("flightEdit/setOneCapacityClasses","")}),this.$store.getters["flightEdit/getEditedClasses"].length&&this.$store.dispatch("flightEdit/updateClasses").then(()=>{this.$toast.success("ویرایش ظرفیت موفق"),this.$store.commit("flightEdit/setOneEditedClasses","")}).catch(t=>{this.$toast.error("ویرایش ظرفیت ناموفق"),this.$store.commit("flightEdit/setOneEditedClasses","")});this.validateProblems.length&&(this.validationDialog=!0)}},calculatePrices(){this.priceForGeneral=[],this.priceFirstForGeneral=[],this.$store.getters["flightDeclare/getFlightsToEdit"].forEach((t,e)=>{let i=t.Capacity-t.Seatremaining-t.QuotaCount-t.Reserved+1;t.Prices.forEach((a,s)=>{a.row=e,a.index=s,a.flightLocksId=t.FlightLocksId,a.canSellInThisRange=i>=a.FromCapacity&&i<a.ToCapacity,i>=a.FromCapacity&&a.ToCapacity}),this.priceForGeneral.push(t.Prices)}),this.priceForGeneral=this.priceForGeneral.map(t=>t.filter(({canSellInThisRange:t})=>t))},changeExpand(t,e){this.$set(this.isExpanded[t],e,!this.isExpanded[t][e])},setTableFlights(){this.isExpanded=[],this.tableFlights=this.cnLodash.orderBy(this.tableFlights,["DepartureDatetime"],["asc"]),this.tableFlights.map((t,e)=>{this.isExpanded.push([!1,!1,!1,!1]),this.$set(this.tableFlights[e],"row",e),this.$set(this.tableFlights[e],"Departure",new Date(t.DepartureDatetime.slice(0,10)).toLocaleString("fa-IR",{year:"numeric",day:"numeric",month:"numeric"})),this.$set(this.tableFlights[e],"QuotaName",t.Quota?`${t.Name} ${t.Family} ${t.CompanyName?t.CompanyName:""}`:t.QuotaCount),this.$set(this.tableFlights[e],"isQuota",t.Quota),this.$set(this.tableFlights[e],"quotaEnable",t.Quota),this.$set(this.tableFlights[e],"classId",t.FlightSegments[0].FlightSegmentsClassId)}),this.overlay=!1},removeCostObj(t){this.costObjCollective.splice(t,1)},removeDetail(t){this.collectiveDetailsData.splice(t,1)},checkObjectFull(t){if(Array.isArray(t)){let e=[];for(let i in t)e.push(this.checkObjectFull(t[i]));return!(this.cnLodash.uniq(e).length>1)&&e[0]}for(let e in t)if(!t[e])return!1;return!0},checkPriceObject(t){let e=[];for(let i in t)t[i].hasOwnProperty("adultCost")&&t[i].hasOwnProperty("childCost")&&t[i].hasOwnProperty("infantCost")&&t[i].hasOwnProperty("currency")&&t[i].hasOwnProperty("rateClass")&&t[i].hasOwnProperty("az")&&t[i].hasOwnProperty("ta")&&t[i].hasOwnProperty("level")&&t[i].hasOwnProperty("baggage")&&t[i].hasOwnProperty("rule")&&t[i].hasOwnProperty("commission")?e.push(!0):e.push(!1);return!(this.cnLodash.uniq(e).length>1)&&(1==e[0]&&this.checkObjectFull(t))},firstSubmitCollectiveDetails(){let t=[];this.$store.getters["flightEdit/getEditedSegments"].forEach((e,i)=>{if(e){this.$set(this.isExpanded[i],0,!1);for(let e=0;e<this.detailsItems[i].length;e++){let a={Id:this.detailsItems[i][e].segmentId,Origin:this.detailsItems[i][e].origin,Destination:this.detailsItems[i][e].destination,AirlineIataCode:this.collectiveDetailsData[e].airlineCollective?this.collectiveDetailsData[e].airlineCollective.iata:this.detailsItems[i][e].airline.iata,AirplaneId:this.collectiveDetailsData[e].airplaneCollective?this.collectiveDetailsData[e].airplaneCollective.id:this.detailsItems[i][e].airplane.id,FlightNo:this.collectiveDetailsData[e].flightNoCollective?this.collectiveDetailsData[e].flightNoCollective:this.detailsItems[i][e].flightNo,DepartureDatetime:this.collectiveDetailsData[e].flightTimeCollective?`${this.detailsItems[i][e].date.split(" ")[0]} ${this.collectiveDetailsData[e].flightTimeCollective.trim()}`:`${this.detailsItems[i][e].date.split(" ")[0]} ${this.detailsItems[i][e].flightTime.trim()}`,Duration:this.collectiveDetailsData[e].durationCollective?60*parseInt(this.collectiveDetailsData[e].durationCollective.split(":")[0])+parseInt(this.collectiveDetailsData[e].durationCollective.split(":")[1]):this.detailsItems[i][e].duration,CloseSaleFlight:this.collectiveDetailsData[e].closeSaleFlightCollective?this.collectiveDetailsData[e].closeSaleFlightCollective:this.detailsItems[i][e].closeSaleFlight,SendList:this.collectiveDetailsData[e].sendListCollective?this.collectiveDetailsData[e].sendListCollective:this.detailsItems[i][e].sendList,Description:this.collectiveDetailsData[e].descriptionCollective?this.collectiveDetailsData[e].descriptionCollective:this.detailsItems[i][e].description,Status:"-1"==this.collectiveDetailsData[e].segmentStatusCollective?this.detailsItems[i][e].SegmentStatus:this.collectiveDetailsData[e].segmentStatusCollective};t.push(a)}this.$store.commit("flightEdit/setCollectiveEditedSegments",t);for(let t=0;t<this.detailsItems[i].length;t++)this.collectiveDetailsData[t].airlineCollective&&(this.$set(this.detailsItems[i][t].airline,"iata",this.collectiveDetailsData[t].airlineCollective.iata),this.$set(this.detailsItems[i][t].airline,"name",this.collectiveDetailsData[t].airlineCollective.name)),this.collectiveDetailsData[t].airplaneCollective&&(this.$set(this.detailsItems[i][t].airplane,"id",this.collectiveDetailsData[t].airplaneCollective.id),this.$set(this.detailsItems[i][t].airplane,"airplaneName",this.collectiveDetailsData[t].airplaneCollective.airplaneName)),this.collectiveDetailsData[t].flightNoCollective&&this.$set(this.detailsItems[i][t],"flightNo",this.collectiveDetailsData[t].flightNoCollective),this.collectiveDetailsData[t].flightTimeCollective&&this.$set(this.detailsItems[i][t],"flightTime",this.collectiveDetailsData[t].flightTimeCollective),this.collectiveDetailsData[t].durationCollective&&this.$set(this.detailsItems[i][t],"duration",60*parseInt(this.collectiveDetailsData[t].durationCollective.split(":")[0])+parseInt(this.collectiveDetailsData[t].durationCollective.split(":")[1])),this.collectiveDetailsData[t].closeSaleFlightCollective&&this.$set(this.detailsItems[i][t],"closeSaleFlight",this.collectiveDetailsData[t].closeSaleFlightCollective),this.collectiveDetailsData[t].sendListCollective&&this.$set(this.detailsItems[i][t],"sendList",this.collectiveDetailsData[t].sendListCollective),this.collectiveDetailsData[t].descriptionCollective&&this.$set(this.detailsItems[i][t],"description",this.collectiveDetailsData[t].descriptionCollective),-1!=this.collectiveDetailsData[t].segmentStatusCollective&&this.$set(this.detailsItems[i][t],"SegmentStatus",this.collectiveDetailsData[t].segmentStatusCollective);this.$set(this.isExpanded[i],0,!0),this.isCollectiveDetailToSend=!0}})},validateCollectivePrice(t){let e=[],i=this.$store.getters["flightDeclare/getFlightsToEdit"];this.$store.getters["flightEdit/getEditedPrices"].forEach((t,a)=>{t.price&&e.push(i[a].Capacity)});let a=this.cnLodash.uniq(e).length;return a>1?(alert(" ظرفیت پرواز های انتخابی شبیه به هم نیستند"),!1):1==a&&(this.capacity=e[0],this.costObj=t,this.rateClassCheck("rateClass")?this.checkOverlap("az","ta")?(alert("هم پوشانی در ویرایش گروهی قیمت"),!1):!!this.FullCheck("az","ta")||(alert("ظرفیت پر نشده است یا  ظرفیت گروهی بیش از ظرفیت پرواز است"),!1):(alert("کلاس نرخی ها در ویرایش گروهی قیمت باید متفاوت باشد"),!1))},getExpandData(t){0==t&&this.firstExpand[t]?this.nextRouteData.forEach((t,e)=>{t.FlightSegments.forEach((i,a)=>{this.detailsItems[e]=[],this.detailsItems[e][a]={},this.$set(this.detailsItems[e][a],"flightLocksId",t.FlightLocksId),this.$set(this.detailsItems[e][a],"row",e),this.$set(this.detailsItems[e][a],"origin",i.Segment.Origin),this.$set(this.detailsItems[e][a],"flightNo",i.Segment.FlightNo),this.$set(this.detailsItems[e][a],"destination",i.Segment.Destination),this.detailsItems[e][a].airplane={},this.$set(this.detailsItems[e][a].airplane,"id",i.Segment.AirplaneID),this.$set(this.detailsItems[e][a].airplane,"airplaneName",i.Segment.Airplane),this.$set(this.detailsItems[e][a],"date",i.Segment.DepartureDatetime),this.$set(this.detailsItems[e][a],"persianDate",new Date(i.Segment.DepartureDatetime).toLocaleString("fa-IR",{year:"numeric",day:"numeric",month:"numeric"})),this.detailsItems[e][a].airline={},this.$set(this.detailsItems[e][a].airline,"iata",i.Segment.AirlineIataCode),this.$set(this.detailsItems[e][a].airline,"name",i.Segment.Airline),this.$set(this.detailsItems[e][a],"flightTime",i.Segment.DepartureDatetime.slice(11,16)),this.$set(this.detailsItems[e][a],"duration",i.Segment.Duration),this.$set(this.detailsItems[e][a],"arrivalTime",i.Segment.ArrivalDatetime.slice(11,16)),this.$set(this.detailsItems[e][a],"sendList",i.Segment.SendList),this.$set(this.detailsItems[e][a],"closeSaleFlight",i.Segment.CloseSaleFlight),this.$set(this.detailsItems[e][a],"description",i.Segment.SegmentDescriotion),this.$set(this.detailsItems[e][a],"SegmentStatus",i.Segment.SegmentStatus),this.$set(this.detailsItems[e][a],"segmentId",i.Segment.SegmentId),this.detailsFirst[e]=JSON.parse(JSON.stringify(this.detailsItems[e])),this.firstExpand[a]=!1})}):1==t&&this.firstExpand[t]?this.nextRouteData.forEach((e,i)=>{this.capacityItems[i]=[{}],this.$set(this.capacityItems[i][0],"row",i),this.$set(this.capacityItems[i][0],"classId",e.FlightSegments[0].Class.ClassId),this.$set(this.capacityItems[i][0],"flightLocksId",e.FlightLocksId),this.$set(this.capacityItems[i][0],"cabinClass",e.CabinClass),this.$set(this.capacityItems[i][0],"quota",e.Quota),this.$set(this.capacityItems[i][0],"quotaAccountId",e.QuotaAccountId),this.$set(this.capacityItems[i][0],"cabinClassCode",e.FlightSegments[0].Class.CabinClassCode),this.$set(this.capacityItems[i][0],"capacity",e.FlightSegments[0].Class.Capacity),this.$set(this.capacityItems[i][0],"maxTour",e.FlightSegments[0].Class.MaxTour),this.$set(this.capacityItems[i][0],"maxOneway",e.FlightSegments[0].Class.MaxOneway),this.$set(this.capacityItems[i][0],"maxRoundtrip",e.FlightSegments[0].Class.MaxOneway),this.$set(this.capacityItems[i][0],"BtoB",e.FlightSegments[0].Class.Btob),this.$set(this.capacityItems[i][0],"BtoC",e.FlightSegments[0].Class.Btoc),this.$set(this.capacityItems[i][0],"searchEngines",e.FlightSegments[0].Class.Webservice),this.$set(this.capacityItems[i][0],"singleFlight",e.FlightSegments[0].Class.SaleFlight),this.$set(this.capacityItems[i][0],"flightAndHotel",e.FlightSegments[0].Class.Tour),this.$set(this.capacityItems[i][0],"ClassStatus",e.FlightSegments[0].Class.ClassStatus),this.capacityFirst[i]=JSON.parse(JSON.stringify(this.capacityItems[i])),this.firstExpand[t]=!1}):2==t&&this.firstExpand[t]&&(this.priceItems=[],this.nextRouteData.forEach((t,e)=>{let i=t.Capacity-t.Seatremaining-t.QuotaCount-t.Reserved+1;t.prices.forEach(a=>{a.Prices.forEach((a,s)=>{a.row=e,a.index=s,a.flightLocksId=t.FlightLocksId;let l=this.levels.filter(t=>t.Id==a.LevelId)[0];a.Level=l?l.Name:"تعریف نشده",a.canSellInThisRange=i>=a.FromCapacity&&i<a.ToCapacity,i>=a.FromCapacity&&a.ToCapacity})}),this.priceItems.push(t.prices)}),this.priceFirst=JSON.parse(JSON.stringify(this.priceItems)),this.firstExpand[t]=!1)},firstSubmitCollectivePrice(){if(this.validateCollectivePrice(this.costObjCollective)&&this.checkPriceObject(this.costObjCollective)){let t=[],e=[];this.costObjCollective.forEach((i,a)=>{let s={Code:i.rule.Code,ADTTax:"0",CHDTax:"0",CodeId:i.rule.id,INFTax:"0",ADTFare:i.adultCost,CHDFare:i.childCost,INFFare:i.infantCost,ADTMultiWay:i.adultCostMulti,CHDMultiWay:i.childCostMulti,INFMultiWay:i.infantCostMulti,LevelId:i.level.Id,Currency:i.currency.Abbr,BaggageId:i.baggage.Id,PriceClass:i.rateClass,ToCapacity:i.ta,BaggageCode:i.baggage.Code,FromCapacity:i.az,Nationality:{Include:i.nationalityInclude,Exclude:i.nationalityExclude},CommissionCode:i.commission.Code,CommissionCodeId:i.commission.CodeId,PriceDetailsId:28,row:0,index:0,flightLocksId:0,Level:i.level.Name,canSellInThisRange:!0},l={Price:{Adult:{Fare:parseInt(i.adultCost.replace(/,/g,"")),Tax:0,Commission:0,MultiWayFare:parseInt(i.adultCostMulti.replace(/,/g,""))},Child:{Fare:parseInt(i.childCost.replace(/,/g,"")),Tax:0,Commission:0,MultiWayFare:parseInt(i.childCostMulti.replace(/,/g,""))},Infant:{Fare:parseInt(i.infantCost.replace(/,/g,"")),Tax:0,Commission:0,MultiWayFare:parseInt(i.infantCostMulti.replace(/,/g,""))}},Currency:i.currency.Abbr,PriceClass:i.rateClass,FromCapacity:i.az,Nationality:{Include:i.nationalityInclude,Exclude:i.nationalityExclude},ToCapacity:i.ta,LevelId:i.level.Id,BaggageId:i.baggage.Id,CodeId:i.rule.id,CommissionCodeId:i.commission.CodeId};t.push(l),e.push(s)}),this.PriceFlightLocks=[],this.$store.getters["flightEdit/getEditedPrices"].forEach((i,a)=>{if(i.price){this.$set(this.isExpanded[a],2,!1);let i={FlightLockId:this.priceItems[a][0].flightLocksId,Prices:t},s=[i];this.PriceFlightLocks.push({Flights:s}),this.priceItems[a]=e,this.$set(this.isExpanded[a],2,!0)}}),this.isCollectivePriceToSend=!0}else this.checkPriceObject(this.costObjCollective)||alert("لطفا فیلد های ویرایش گروهی قیمت را پر نمایید")},firstSubmitCollectiveCapacity(){let t=[],e=[];this.$store.getters["flightEdit/getEditedClasses"].forEach((i,a)=>{if(i){this.$set(this.isExpanded[a],1,!1);let i={Id:this.capacityItems[a][0].classId,Capacity:this.capacityItems[a][0].capacity,CabinClass:"-1"!=this.collectiveCapacityData.cabinClassCollective?this.collectiveCapacityData.cabinClassCollective:this.capacityItems[a][0].cabinClass,MaxRoundtrip:this.collectiveCapacityData.maxRoundtripCollective?this.collectiveCapacityData.maxRoundtripCollective:this.capacityItems[a][0].maxRoundtrip,MaxOneway:this.collectiveCapacityData.maxOnewayCollective?this.collectiveCapacityData.maxOnewayCollective:this.capacityItems[a][0].maxOneway,MaxTour:this.collectiveCapacityData.maxTourCollective?this.collectiveCapacityData.maxTourCollective:this.capacityItems[a][0].maxTour,B2B:"-1"!=this.collectiveCapacityData.BtoBCollective?this.collectiveCapacityData.BtoBCollective:this.capacityItems[a][0].BtoB,B2C:"-1"!=this.collectiveCapacityData.BtoCCollective?this.collectiveCapacityData.BtoCCollective:this.capacityItems[a][0].BtoC,Webservice:"-1"!=this.collectiveCapacityData.searchEnginesCollective?this.collectiveCapacityData.searchEnginesCollective:this.capacityItems[a][0].searchEngines,Tour:"-1"!=this.collectiveCapacityData.flightAndHotelCollective?this.collectiveCapacityData.flightAndHotelCollective:this.capacityItems[a][0].flightAndHotel,SaleFlight:"-1"!=this.collectiveCapacityData.singleFlightCollective?this.collectiveCapacityData.singleFlightCollective:this.capacityItems[a][0].singleFlight,CabinClassCode:this.collectiveCapacityData.cabinClassCodeCollective?this.collectiveCapacityData.cabinClassCodeCollective:this.capacityItems[a][0].cabinClassCode,Status:"-1"!=this.collectiveCapacityData.ClassStatusCollective?this.collectiveCapacityData.ClassStatusCollective:this.capacityItems[a][0].ClassStatus};if(t.push(i),this.$store.commit("flightEdit/setEditedClasses",t),this.collectiveCapacityData.capacityCollective){let t={Id:this.capacityItems[a][0].classId,OldCapacity:this.capacityItems[a][0].capacity.toString(),NewCapacity:this.collectiveCapacityData.capacityCollective.toString(),Quota:this.capacityItems[a][0].quota,QuotaAccountId:this.capacityItems[a][0].quotaAccountId};e.push(t),this.$store.commit("flightEdit/setCapacityClasses",e)}"-1"!=this.collectiveCapacityData.cabinClassCollective&&this.$set(this.capacityItems[a][0],"cabinClass",this.collectiveCapacityData.cabinClassCollective),this.collectiveCapacityData.cabinClassCodeCollective&&this.$set(this.capacityItems[a][0],"cabinClassCode",this.collectiveCapacityData.cabinClassCodeCollective),this.collectiveCapacityData.capacityCollective&&this.$set(this.capacityItems[a][0],"capacity",this.collectiveCapacityData.capacityCollective),this.collectiveCapacityData.maxRoundtripCollective&&this.$set(this.capacityItems[a][0],"maxRoundtrip",this.collectiveCapacityData.maxRoundtripCollective),this.collectiveCapacityData.maxOnewayCollective&&this.$set(this.capacityItems[a][0],"maxOneway",this.collectiveCapacityData.maxOnewayCollective),this.collectiveCapacityData.maxTourCollective&&this.$set(this.capacityItems[a][0],"maxTour",this.collectiveCapacityData.maxTourCollective),"-1"!=this.collectiveCapacityData.BtoBCollective&&this.$set(this.capacityItems[a][0],"BtoB",parseInt(this.collectiveCapacityData.BtoBCollective)),"-1"!=this.collectiveCapacityData.BtoCCollective&&this.$set(this.capacityItems[a][0],"BtoC",parseInt(this.collectiveCapacityData.BtoCCollective)),"-1"!=this.collectiveCapacityData.searchEnginesCollective&&this.$set(this.capacityItems[a][0],"searchEngines",parseInt(this.collectiveCapacityData.searchEnginesCollective)),"-1"!=this.collectiveCapacityData.flightAndHotelCollective&&this.$set(this.capacityItems[a][0],"flightAndHotel",parseInt(this.collectiveCapacityData.flightAndHotelCollective)),"-1"!=this.collectiveCapacityData.singleFlightCollective&&this.$set(this.capacityItems[a][0],"singleFlight",parseInt(this.collectiveCapacityData.singleFlightCollective)),"-1"!=this.collectiveCapacityData.ClassStatusCollective&&this.$set(this.capacityItems[a][0],"ClassStatus",parseInt(this.collectiveCapacityData.ClassStatusCollective)),this.$set(this.isExpanded[a],1,!0),this.isCollectiveClassToSend=!0}})}},mounted(){this.newIndex=this.index+1;let t={IsQuota:this.flight.Quota,QuotaAccountId:this.flight.QuotaAccountId,ClassId:this.classIds,Level:this.index};this.newIndex>4&&this.expandItems.splice(-1,1),this.tableLoading=!0,this.axios(this.$store.state.baseUrl+"inventory/continueFlight",{params:t}).then(t=>{this.newClassIds=[...this.classIds,t.data.Items[0].FlightSegments[0].Class.ClassId],this.newCapacities=[...this.capacities,t.data.Items[0].Capacity],this.tableFlights=t.data.Items,this.nextRouteData=t.data.Items,this.newRoutes=[...this.routes,`${t.data.Items[0].Origin} - ${t.data.Items[0].Destination}`],this.setTableFlights(),this.tableLoading=!1}).catch(()=>{this.tableLoading=!1})}},ht=ut,mt=(i("575a"),Object(Y["a"])(ht,et,it,!1,null,null,null)),pt=mt.exports,Ct=i("5c1f"),vt={name:"flightManagment",data:()=>({paths:[],origins:[],destinations:[],selectSource:1,pricesToEdit:[],searchTable:"",costObjCollective:[{}],costObjCollectiveEdit:{},CabinClass:"",QuotaOnSearchField:"-1",headers:[{text:"مسیر",value:"route",align:"center",sortable:!1},{text:"تاریخ حرکت",value:"DepartureDatetime",align:"center"},{text:"ساعت پرواز",value:"flightTime",align:"center"},{text:"شماره پرواز",value:"flightNo",align:"center",sortable:!1},{text:"ایرلاین",value:"airline",align:"center",sortable:!1},{text:"کلاس کابین",value:"CabinClass",align:"center",sortable:!1},{text:"ظرفیت",value:"Capacity",align:"center"},{text:"مانده",value:"Remain",align:"center"},{text:"درحال",value:"Lock",align:"center"},{text:"تیکت",value:"Ticketed",align:"center"},{text:"رزرو",value:"Reserve",align:"center"},{text:"سهمیه",value:"Quota",align:"center"},{text:"",value:"expands",align:"left",sortable:!1}],detailsHeader:[{text:"مسیر",value:"route"},{text:"شماره پرواز ",value:"flightNo"},{text:"تاریخ میلادی",value:"date"},{text:"ایرلاین",value:"airline"},{text:"هواپیما",value:"airplane"},{text:"طول",value:"duration"},{text:"ساعت پرواز",value:"flightTime"},{text:"ساعت رسیدن",value:"arrivalTime"},{text:"ارسال لیست",value:"sendList"},{text:"توقف فروش",value:"closeSaleFlight"},{text:"توقف سهمیه",value:"closeSaleQuotaFlight"},{text:"توضیحات",value:"description"},{text:"وضعیت",value:"SegmentStatus",sortable:!1}],capacityHeader:[{text:"کلاس کابین",value:"cabinClass",align:"right",sortable:!1},{text:"کد کابین",value:"cabinClassCode",sortable:!1,align:"right"},{text:"ظرفیت",value:"capacity",sortable:!1,align:"right"},{text:"ح.ف.بلیت تور",value:"maxTour",align:"right",sortable:!1},{text:"ح.ف.یک طرفه",value:"maxOneway",sortable:!1,align:"right"},{text:"ح.ف. دو طرفه",value:"maxRoundtrip",sortable:!1,align:"right"},{text:"B2B",value:"BtoB",sortable:!1,align:"right"},{text:"B2C",value:"BtoC",sortable:!1,align:"right"},{text:"موتور های جستجو",value:"searchEngines",sortable:!1,align:"right"},{text:"پرواز تک",value:"singleFlight",sortable:!1,align:"right"},{text:"پرواز+هتل",value:"flightAndHotel",sortable:!1,align:"right"},{text:"خرید اتوماتیک",value:"autoBuy",sortable:!1,align:"right"},{text:"وضعیت",value:"ClassStatus",sortable:!1,align:"right"}],priceHeader:[{text:"کلاس",value:"PriceClass",align:"right",width:"7%"},{text:"ملیت شامل",value:"NationalityInclude",align:"right",width:"7%"},{text:"ملیت به جز",value:"NationalityExclude",align:"right",width:"7%"},{text:"از ظرفیت",value:"FromCapacity",width:"6%",align:"right"},{text:"تا ظرفیت",value:"ToCapacity",align:"right",width:"6%"},{text:"قانون",value:"Code",align:"right"},{text:"بار",value:"BaggageCode",align:"right"},{text:"کمیسیون",value:"CommissionCode",align:"right"},{text:"گروه قیمتی",value:"LevelId",align:"right"},{text:"بزرگسال",value:"ADTFare",align:"right"},{text:"کودک",value:"CHDFare",align:"right"},{text:"نوزاد",value:"INFFare",align:"right"},{text:" بزرگسال دوطرفه",value:"ADTMultiWay",align:"right"},{text:"کودک دوطرفه",value:"CHDMultiWay",align:"right"},{text:"نوزاد دوطرفه",value:"INFMultiWay",align:"right"},{text:"ارز",value:"Currency",align:"right"},{text:"حذف",value:"action",align:"right"}],finalSubmitLoading:!1,priceHeaderGeneral:[{text:"کلاس",value:"PriceClass",align:"right",width:"7%"},{text:"ملیت شامل",value:"NationalityInclude",align:"right",width:"7%"},{text:"ملیت به جز",value:"NationalityExclude",align:"right",width:"7%"},{text:"از ظرفیت",value:"FromCapacity",width:"6%",align:"right"},{text:"تا ظرفیت",value:"ToCapacity",width:"6%",align:"right"},{text:"قانون",value:"Code",align:"right"},{text:"بار",value:"BaggageCode",align:"right"},{text:"کمیسیون",value:"CommissionCode",align:"right"},{text:"گروه قیمتی",value:"LevelId",align:"right"},{text:"بزرگسال",value:"ADTFare",align:"right",width:100},{text:"کودک",value:"CHDFare",align:"right",width:100},{text:"نوزاد",value:"INFFare",align:"right",width:100},{text:" بزرگسال دوطرفه",value:"ADTMultiWay",align:"right"},{text:"کودک دوطرفه",value:"CHDMultiWay",align:"right"},{text:"نوزاد دوطرفه",value:"INFMultiWay",align:"right"},{text:"ارز",value:"Currency",align:"right"}],overlay:!0,PriceFlightLocks:[],airlines:[],editSucceed:!1,pathselect:{origin:"",destination:""},origin:"",destination:"",previewSnackbar:!0,detailsItems:[],costObj:[],validationDialog:!1,checkFull:!1,capacityItems:[],priceItems:[],expandItems:[{name:"مشخصات",icon:"icon-info-circle icon-18"},{name:"ظرفیت",icon:"icon-profile icon-18"},{name:"قیمت",icon:"icon-dollar-circle icon-18"},{name:"ادامه مسیر",icon:"icon-swap icon-18"}],sortby:{},tableFlights:[],baggages:[],validateProblems:[],isExpanded:[],nothingToShow:!0,capacity:1,selectedRows:[],CodeRule:[],levels:[],currencies:[],CodeCommissions:[],originAirports:[],searchOriginLocation:null,editAllPrices:!1,editAllDetails:!1,editAllCapacities:!1,searchDestLocation:null,DestAirports:[],overlay:!1,firstExpand:[!0,!0,!0,!0],detailsFirst:[],capacityFirst:[],priceFirst:[],priceForGeneral:[],priceFirstForGeneral:[],FlightLocks:[],originError:"",destinationError:"",snackbarCapacity:!1,snackbarCapacityText:"",snackbarCapacityColor:"",snackbar:!1,snackbarText:"",snackbarColor:"",acceptedFlightLocksLenghts:"",isCollectivePrice:!1,isCollectivePriceEdit:!1,snackbarCost:!1,snackbarCostText:"",snackbarCostColor:"",moreThanTwo:!1,mode1:"persian",mode2:"persian",datesEdit:[],searchAirlines:"",searchAirlinesCol:"",isCollectiveCapacity:!1,isCollectiveDetail:!1,isCollectivePriceToSend:!1,isCollectiveClassToSend:!1,isCollectiveDetailToSend:!1,airlines:[],airplanes:[],flightNumber:"",airline:"",collectiveDetailsData:[{flightNoCollective:"",airplaneCollective:"",airlineCollective:"",flightTimeCollective:"",durationCollective:"",closeSaleFlightCollective:"",closeSaleFlightQoutaCollective:"",descriptionCollective:"",sendListCollective:"",segmentStatusCollective:"-1"}],collectivePriceData:[{priceClassCollective:"",fromCapacityCollective:"",toCapacityCollective:"",codeSelectCollective:"",commissionCodeCollective:"",levelCollective:"",ADTFareCollective:"",CHDFareCollective:"",INFFareCollective:""}],searchAirplanes:"",collectiveCapacityData:{cabinClassCollective:"-1",cabinClassCodeCollective:"",capacityCollective:"",maxTourCollective:"",maxOnewayCollective:"",maxRoundtripCollective:"",BtoBCollective:"-1",BtoCCollective:"-1",searchEnginesCollective:"-1",singleFlightCollective:"-1",flightAndHotelCollective:"-1",autoBuyCollective:"-1",ClassStatusCollective:"-1"},collectiveDetailEdit:!1,collectiveCapacityEdit:!1,collectivePriceSubmit:!1,collectivePriceEdit:!1}),components:{costDeclare:dt["a"],detailsAndPrice:q,capacityExpand:tt,nextRouteExpand:pt,AppTimePicker:B["a"],datePicker:Ct["b"]},watch:{collectiveDetailEdit(){this.firstExpand=[!0,!0,!0,!0],this.getExpandData(0),this.collectiveDetailEdit?(this.isCollectiveDetail=!0,this.$store.getters["flightDeclare/getFlightsToEdit"].forEach((t,e)=>{this.$set(this.isExpanded[e],0,!0)})):(this.isCollectiveDetail=!1,this.$store.getters["flightDeclare/getFlightsToEdit"].forEach((t,e)=>{this.$set(this.isExpanded[e],0,!1)}))},collectiveCapacityEdit(){this.firstExpand=[!0,!0,!0,!0],this.getExpandData(1),this.collectiveCapacityEdit?(this.isCollectiveCapacity=!0,this.$store.getters["flightDeclare/getFlightsToEdit"].forEach((t,e)=>{this.$set(this.isExpanded[e],1,!0)})):(this.isCollectiveCapacity=!1,this.$store.getters["flightDeclare/getFlightsToEdit"].forEach((t,e)=>{this.$set(this.isExpanded[e],1,!1)}))},collectivePriceSubmit(){this.firstExpand=[!0,!0,!0,!0],this.getExpandData(2),this.collectivePriceSubmit?(this.isCollectivePrice=!0,this.$store.getters["flightDeclare/getFlightsToEdit"].forEach((t,e)=>{this.$set(this.isExpanded[e],2,!0)})):(this.isCollectivePrice=!1,this.$store.getters["flightDeclare/getFlightsToEdit"].forEach((t,e)=>{this.$set(this.isExpanded[e],2,!1)}))},collectivePriceEdit(){this.firstExpand=[!0,!0,!0,!0],this.getExpandData(2),this.collectivePriceEdit?(this.isCollectivePriceEdit=!0,this.$store.getters["flightDeclare/getFlightsToEdit"].forEach((t,e)=>{this.$set(this.isExpanded[e],2,!0)})):(this.isCollectivePriceEdit=!1,this.$store.getters["flightDeclare/getFlightsToEdit"].forEach((t,e)=>{this.$set(this.isExpanded[e],2,!1)}))},searchOriginLocation(t){t&&t.length>2&&this.axios(this.$store.state.baseUrl+"airportlist?q="+t).then(t=>{t.data.Items.forEach(t=>{this.$set(t,"searchKey",t.cityCode+t.airportCode+t.cityNameEn+t.airportNameEn+t.cityNameFa+t.airportNameFa)}),this.originAirports=t.data.Items.filter(t=>!t.isCity)})},searchDestLocation(t){t&&t.length>2&&this.axios(this.$store.state.baseUrl+"airportlist?q="+t).then(t=>{t.data.Items.forEach(t=>{this.$set(t,"searchKey",t.cityCode+t.airportCode+t.cityNameEn+t.airportNameEn+t.cityNameFa+t.airportNameFa)}),this.DestAirports=t.data.Items.filter(t=>!t.isCity)})},searchAirlines(t){t&&t.length>1&&this.axios(this.$store.state.baseUrl+"airlines?name="+t).then(t=>{t.data.Items.forEach((t,e)=>{this.$set(t,"searchAirlines",t.name+t.iata)}),this.airlines=t.data.Items})},searchAirlinesCol(t){t&&t.length>1&&this.axios(this.$store.state.baseUrl+"airlines?name="+t).then(t=>{t.data.Items.forEach((t,e)=>{this.$set(t,"searchAirlinesCol",t.name+t.iata)}),this.airlines=t.data.Items})},searchAirplanes(t){t&&t.length>2&&this.axios(this.$store.state.baseUrl+"airplanes?name="+t).then(t=>{t.data.Items.forEach((t,e)=>{this.$set(t,"searchAirplane",t.airplaneName+t.airplaneCode)}),this.airplanes=t.data.Items})}},created(){this.handleDatePickers(),this.getcurrency(),this.getLevels(),this.getBaggages(),this.getcodecommissions(),this.getRules()},methods:{checkIsDisabled(t){return!t.FlightSegments[0].Class.ClassStatus||!t.FlightSegments[0].Segment.SegmentStatus},rangeBegin(){this.$set(this.datesEdit,1,"")},handleDatePickers(){this.datesEdit.push((new this.$persianDate).calendar("g").toString()),this.datesEdit.push((new this.$persianDate).calendar("g").addDay(14).toString())},customSort(t){this.$store.commit("flightDeclare/sortFlights",{sortby:[t],sortWhat:[this.sortby[t]]}),"desc"==this.sortby[t]?this.sortby[t]="asc":this.sortby[t]="desc",this.firstExpand=[!0,!0,!0,!0],this.setTableFlights()},async searchFlights(){if(this.pathselect.origin||this.pathselect.destination){this.originError="",this.tableFlights=[],this.priceForGeneral=[],this.pricesToEdit=[],this.priceFirstForGeneral=[],this.costObjCollectiveEdit={},this.sortby={DepartureDatetime:"desc",Capacity:"desc",Remain:"desc",Lock:"desc",Ticketed:"desc",Reserve:"desc",Quota:"desc"},this.overlay=!0,this.$store.commit("flightDeclare/setFlightsToEdit","delete"),this.firstExpand=[!0,!0,!0,!0];let t={StartDate:this.datesEdit[0],EndDate:this.datesEdit[1],Origin:this.pathselect.origin,Destination:this.pathselect.destination,FlightNo:this.flightNumber,CabinClass:"All"!=this.CabinClass?this.CabinClass:void 0,AirlineIata:this.airline.iata,Quota:this.QuotaOnSearchField,Type:"ByDate"};this.$store.dispatch("flightDeclare/setFlightsToEditByDate",t).then(t=>{this.setTableFlights(),this.overlay=!1}).catch(()=>{this.overlay=!1})}else this.originError="مسیر الزامی است"},restoreDefault(){this.searchFlights()},async getcurrency(){let t=await this.axios(this.$store.state.baseUrl+"currencies");this.currencies=t.data.Items},async getLevels(){let t=await this.axios(this.$store.state.baseUrl+"category?Type=level");this.levels=t.data.Items,this.levels=this.levels.reverse(),this.levels.push({Id:-1,Name:"تعریف نشده"})},async getBaggages(){let t=await this.axios(this.$store.state.baseUrl+"inventory/baggage");this.baggages=t.data.Items},async getcodecommissions(){let t=await this.axios(this.$store.state.baseUrl+"category?Type=commission"),e=await this.axios(this.$store.state.baseUrl+"inventory/codeCommissions"),i=t.data.Items;this.CodeCommissions=e.data.CodeCommissions,this.CodeCommissions.map(t=>{t.Commissions.map(t=>{let e=i.find(e=>e.Id===t.CommissionCategoryId);t.category=e.Name})}),this.CodeCommissions=this.CodeCommissions.reverse(),this.CodeCommissions.push({CodeId:-1,Code:"تعریف نشده",Commissions:[]})},async getRules(){let t=await this.axios(this.$store.state.baseUrl+"inventory/codeRules");this.CodeRule=t.data.CodeRule},between(t,e,i){return t>=e&&t<=i},simplify(t,e){var i=[],a=!1,s=!1,l=!1;return t.forEach((e,n)=>{1==e.az&&(s=!0),e.ta==this.capacity&&(l=!0),i=[],t.forEach((t,a)=>{e.ta<this.capacity&&this.between(parseInt(e.ta)+1,t.az,t.ta)&&i.push(e)}),0==i.length&&e.ta<this.capacity&&(a=!0)}),e&&e>0&&(l=!0),!a&s&l},compare(t,e){return t.az<e.az?-1:t.az>e.az?1:0},FullCheck(t,e,i){var a=[];return this.costObj.forEach(i=>{a.push({az:i[t],ta:i[e]})}),this.simplify(a.sort(this.compare),i)},rateClassCheck(t){if(this.costObj.some(e=>!e[t]))return!1;let e=this.cnLodash.unionBy(this.costObj,t);return this.costObj.length==e.length},checkOverlap(t,e){var i=!1;return this.costObj.forEach((a,s)=>{this.costObj.forEach((l,n)=>{n>s&&a.CodeId==l.CodeId&&a.LevelId==l.LevelId&&a.Nationality.Include.length===l.Nationality.Include.length&&a.Nationality.Include.every((function(t,e){return t===l.Nationality.Include[e]}))&&a.Nationality.Exclude.length===l.Nationality.Exclude.length&&a.Nationality.Exclude.every((function(t,e){return t===l.Nationality.Exclude[e]}))&&parseInt(l[t])===parseInt(a[t])&&parseInt(l[e])===parseInt(a[e])&&(i=!0)})}),i},checkOverlapCollectivePrices(t,e){var i=!1;return this.costObj.forEach((a,s)=>{this.costObj.forEach((l,n)=>{n>s&&a.rule.id==l.rule.id&&a.level.Id==l.level.Id&&a.nationalityInclude.length===l.nationalityInclude.length&&a.nationalityInclude.every((function(t,e){return t===l.nationalityInclude[e]}))&&a.nationalityExclude.length===l.nationalityExclude.length&&a.nationalityExclude.every((function(t,e){return t===l.nationalityExclude[e]}))&&parseInt(l[t])===parseInt(a[t])&&parseInt(l[e])===parseInt(a[e])&&(i=!0)})}),i},changePriceObjForRequest(t){let e={Id:t.PriceDetailsId,Price:{Adult:{Fare:this.costObjCollectiveEdit.adultCost?parseFloat(this.costObjCollectiveEdit.adultCost.replace(/,/g,"")):parseInt(t.ADTFare.replace(/,/g,"")),Tax:parseFloat(t.ADTTax),Commission:0,MultiWayFare:this.costObjCollectiveEdit.adultCostMulti?parseFloat(this.costObjCollectiveEdit.adultCostMulti.replace(/,/g,"")):parseInt(t.ADTMultiWay.replace(/,/g,""))},Child:{Fare:this.costObjCollectiveEdit.childCost?parseFloat(this.costObjCollectiveEdit.childCost.replace(/,/g,"")):parseInt(t.CHDFare.replace(/,/g,"")),Tax:parseFloat(t.CHDTax),Commission:0,MultiWayFare:this.costObjCollectiveEdit.childCostMulti?parseFloat(this.costObjCollectiveEdit.childCostMulti.replace(/,/g,"")):parseInt(t.CHDMultiWay.replace(/,/g,""))},Infant:{Fare:this.costObjCollectiveEdit.infantCost?parseFloat(this.costObjCollectiveEdit.infantCost.replace(/,/g,"")):parseInt(t.INFFare.replace(/,/g,"")),Tax:parseFloat(t.INFTax),Commission:0,MultiWayFare:this.costObjCollectiveEdit.infantCostMulti?parseFloat(this.costObjCollectiveEdit.infantCostMulti.replace(/,/g,"")):parseInt(t.INFMultiWay.replace(/,/g,""))}},Currency:this.costObjCollectiveEdit.currency?this.costObjCollectiveEdit.currency.Abbr:t.Currency,PriceClass:this.costObjCollectiveEdit.rateClass?this.costObjCollectiveEdit.rateClass:t.PriceClass,Nationality:{Exclude:this.cnLodash.isEmpty(this.costObjCollectiveEdit.nationalityExclude)?t.Nationality.Exclude:this.costObjCollectiveEdit.nationalityExclude,Include:this.cnLodash.isEmpty(this.costObjCollectiveEdit.nationalityInclude)?t.Nationality.Include:this.costObjCollectiveEdit.nationalityInclude},FromCapacity:t.FromCapacity,ToCapacity:t.ToCapacity,LevelId:this.costObjCollectiveEdit.level?this.costObjCollectiveEdit.level.Id:t.LevelId,BaggageId:this.costObjCollectiveEdit.baggage?this.costObjCollectiveEdit.baggage.Id:t.BaggageId,CodeId:this.costObjCollectiveEdit.rule?this.costObjCollectiveEdit.rule.id:t.CodeId,CommissionCodeId:this.costObjCollectiveEdit.commission?this.costObjCollectiveEdit.commission.CodeId:t.CommissionCodeId,parentRoute:t.parentRoute,row:t.row};return e},checkOverlapForEditedPrices(t,e){let i=this.$store.state.flightDeclare.flightsToEdit.map(t=>({...t})),a=[...i.filter(e=>e.row==t)];return e.map(t=>{a[0].Prices=a[0].Prices.map(e=>e.PriceDetailsId==t.Id?{...e,ADTTax:t.Price.Adult.Tax,CHDTax:t.Price.Child.Tax,CodeId:t.CodeId,INFTax:t.Price.Infant.Tax,ADTFare:t.Price.Adult.Fare,CHDFare:t.Price.Child.Fare,INFFare:t.Price.Infant.Fare,LevelId:t.LevelId,Currency:t.Currency,BaggageId:t.BaggageId,PriceClass:t.PriceClass,ToCapacity:t.ToCapacity,ADTMultiWay:t.Price.Adult.MultiWayFare,CHDMultiWay:t.Price.Child.MultiWayFare,INFMultiWay:t.Price.Infant.MultiWayFare,Nationality:{Include:t.Nationality.Include,Exclude:t.Nationality.Exclude},FromCapacity:t.FromCapacity,CommissionCodeId:t.CommissionCodeId}:e)}),this.costObj=a[0].Prices,this.checkOverlap("FromCapacity","ToCapacity")},editPrices(){let t,e,i=this.pricesToEdit.map(t=>this.changePriceObjForRequest(t));if(this.validateProblems.splice(0),i.length){let a=this.cnLodash.groupBy(i,"row");Object.entries(a).forEach(([i,a],s)=>{let l=a[0].parentRoute;this.capacity=l.Capacity-l.QuotaCount,t=[l.Origin,l.Destination],e=l.DepartureDatetime,this.checkOverlapForEditedPrices(i,a)&&(this.validateProblems[s]=`خطای همپوشانی در مسیر ${t[0]} به ${t[1]} در تاریخ ${e}`),this.rateClassCheck("PriceClass")||(this.validateProblems[s]=`خطای کلاس نرخی در مسیر ${t[0]} به ${t[1]} در تاریخ ${e}`)}),this.validateProblems.length?this.validationDialog=!0:this.$store.dispatch("flightEdit/simpleUpdatePrices",i).then(()=>{this.pricesToEdit.splice(0),this.$toast.success("ویرایش قیمت‌ها با موفقیت انجام شد."),this.searchFlights()}).catch(t=>{this.$toast.error("ویرایش قیمت‌ها با خطا مواجه شد.")})}else this.$toast.error("لطفا یکی از سطرها را انتخاب نمایید")},validatePricesAndUpdate(){if(this.collectivePriceEdit)this.editPrices();else if(this.isCollectivePriceToSend||this.isCollectiveClassToSend||this.isCollectiveDetailToSend)this.isCollectivePriceToSend&&(this.isCollectivePriceToSend=!1,this.finalSubmitLoading=!0,this.axios.post(this.$store.state.baseUrl+"inventory/prices",{FlightLocks:this.PriceFlightLocks}).then(t=>{t.data.Success?(this.$toast.success("ویرایش گروهی قیمت موفق"),this.finalSubmitLoading=!1,this.$store.commit("flightEdit/setOneEditedPrices","")):(this.$toast.error("ویرایش گروهی قیمت ناموفق"),this.$store.commit("flightEdit/setOneEditedPrices",""))}).catch(t=>{this.$toast.error("ویرایش گروهی قیمت ناموفق"),this.$store.commit("flightEdit/setOneEditedPrices",""),this.finalSubmitLoading=!1})),this.isCollectiveClassToSend&&(this.$store.getters["flightEdit/getEditedClasses"].length&&this.$store.dispatch("flightEdit/updateClasses").then(()=>{this.$toast.success("ویرایش گروهی ظرفیت موفق"),this.$store.commit("flightEdit/setOneEditedClasses",""),this.finalSubmitLoading=!1,this.searchFlights()}).catch(t=>{this.finalSubmitLoading=!1,this.$toast.error("ویرایش گروهی ظرفیت ناموفق"),this.$store.commit("flightEdit/setOneEditedClasses","")}),this.$store.getters["flightEdit/getEditedCapacities"].length&&this.$store.dispatch("flightEdit/updateClassesCapacity").then(()=>{this.$toast.success("ویرایش گروهی ظرفیت موفق"),this.$store.commit("flightEdit/setOneCapacityClasses",""),this.finalSubmitLoading=!1,this.searchFlights()}).catch(t=>{this.finalSubmitLoading=!1,this.$toast.error("ویرایش گروهی ظرفیت ناموفق"),this.$store.commit("flightEdit/setOneCapacityClasses","")}),this.isCollectiveClassToSend=!1),this.isCollectiveDetailToSend&&(this.$store.dispatch("flightEdit/updateSegments").then(()=>{this.$toast.success("ویرایش گروهی مشخصات موفق"),this.$store.commit("flightEdit/setEditedSegments","")}).catch(t=>{this.$toast.error("ویرایش گروهی مشخصات ناموفق"),this.$store.commit("flightEdit/setEditedSegments","")}),this.isCollectiveDetailToSend=!1);else{if(this.validateProblems=[],this.$store.getters["flightEdit/getEditedPrices"].length)for(let t=0;t<this.$store.getters["flightEdit/getEditedPrices"].length;t++){if(this.$store.getters["flightEdit/getEditedPrices"][t]){let e;this.costObjFirst=this.$store.getters["flightEdit/getEditedPrices"][t],this.costObj=this.costObjFirst.price,this.$store.getters["flightDeclare/getFlightsToEdit"].map(t=>t.Prices.map(i=>this.costObj.filter(a=>{i.PriceDetailsId==a.Id&&(e=t)}))),this.capacity=e.Capacity-e.QuotaCount;let i=[e.Origin,e.Destination],a=e.DepartureDatetime;this.rateClassCheck("PriceClass")?this.checkOverlap("FromCapacity","ToCapacity")?this.validateProblems[t]=`خطای همپوشانی در مسیر ${i[0]} به ${i[1]} در تاریخ ${a}`:this.costObjFirst.thisIsFromGeneral||this.FullCheck("FromCapacity","ToCapacity",e.QuotaCount)?(this.$store.getters["flightEdit/getEditedSegments"].length&&this.$store.dispatch("flightEdit/updateSegments").then(()=>{this.$toast.success("ویرایش مشخصات موفق"),this.$store.commit("flightEdit/setEditedSegments","")}).catch(t=>{this.$toast.error("ویرایش مشخصات ناموفق"),this.$store.commit("flightEdit/setEditedSegments","")}),this.$store.getters["flightEdit/getEditedClasses"].length&&this.$store.dispatch("flightEdit/updateClasses").then(()=>{this.$toast.success("ویرایش ظرفیت موفق"),this.$store.commit("flightEdit/setOneEditedClasses","")}).catch(t=>{this.$toast.error("ویرایش ظرفیت ناموفق"),this.$store.commit("flightEdit/setOneEditedClasses","")}),this.$store.getters["flightEdit/getEditedCapacities"].length&&this.$store.dispatch("flightEdit/updateClassesCapacity").then(()=>{this.$toast.success("ویرایش ظرفیت موفق"),this.$store.commit("flightEdit/setOneCapacityClasses","")}).catch(t=>{this.$toast.error("ویرایش ظرفیت ناموفق"),this.$store.commit("flightEdit/setOneCapacityClasses","")}),this.costObjFirst.shouldCallInsertFlightLock?this.$store.dispatch("flightEdit/insertPrices",{segment:e,i:t}).then(()=>{this.$toast.success("ویرایش قیمت موفق"),this.$store.commit("flightEdit/setOneEditedPrices","")}).catch(t=>{this.$toast.error("ویرایش قیمت ناموفق"),this.$store.commit("flightEdit/setOneEditedPrices","")}):this.$store.dispatch("flightEdit/updatePrices").then(()=>{this.$toast.success("ویرایش قیمت موفق"),this.$store.commit("flightEdit/setOneEditedPrices","")}).catch(t=>{this.$toast.error("ویرایش قیمت ناموفق"),this.$store.commit("flightEdit/setOneEditedPrices","")})):this.validateProblems[t]=`خطای عدم تکمیل ظرفیت در مسیر ${i[0]} به ${i[1]} در تاریخ ${a}`:this.validateProblems[t]=`خطای کلاس نرخی در مسیر ${i[0]} به ${i[1]} در تاریخ ${a}`}this.validateProblems.length&&(this.validationDialog=!0)}else this.$store.getters["flightEdit/getEditedSegments"].length&&this.$store.dispatch("flightEdit/updateSegments").then(()=>{this.$toast.success("ویرایش مشخصات موفق"),this.$store.commit("flightEdit/setEditedSegments","")}).catch(t=>{this.$toast.error("ویرایش مشخصات ناموفق"),this.$store.commit("flightEdit/setEditedSegments","")}),this.$store.getters["flightEdit/getEditedCapacities"].length&&this.$store.dispatch("flightEdit/updateClassesCapacity").then(()=>{this.$toast.success("ویرایش ظرفیت موفق"),this.$store.commit("flightEdit/setOneCapacityClasses","")}).catch(t=>{this.$toast.error("ویرایش ظرفیت ناموفق"),this.$store.commit("flightEdit/setOneCapacityClasses","")}),this.$store.getters["flightEdit/getEditedClasses"].length&&this.$store.dispatch("flightEdit/updateClasses").then(()=>{this.$toast.success("ویرایش ظرفیت موفق"),this.$store.commit("flightEdit/setOneEditedClasses","")}).catch(t=>{this.$toast.error("ویرایش ظرفیت ناموفق"),this.$store.commit("flightEdit/setOneEditedClasses","")});this.validateProblems.length&&(this.validationDialog=!0)}},calculatePrices(){this.priceForGeneral=[],this.priceFirstForGeneral=[],this.$store.getters["flightDeclare/getFlightsToEdit"].forEach((t,e)=>{let i=t.Capacity-t.Seatremaining-t.QuotaCount-t.Reserved+1;t.Prices.forEach((a,s)=>{a.row=e,a.index=s,a.flightLocksId=t.FlightLocksId;let l=this.levels.filter(t=>t.Id==a.LevelId)[0];a.Level=l?l.Name:"تعریف نشده",a.canSellInThisRange=i>=a.FromCapacity&&i<=a.ToCapacity}),this.priceForGeneral.push(t.Prices)}),this.priceForGeneral=this.priceForGeneral.map(t=>t.filter(({canSellInThisRange:t})=>t))},getExpandData(t){0==t&&this.firstExpand[t]?this.$store.getters["flightDeclare/getFlightsToEdit"].forEach((t,e)=>{t.FlightSegments.forEach((i,a)=>{this.detailsItems[e]=[],this.detailsItems[e][a]={},this.$set(this.detailsItems[e][a],"flightLocksId",t.FlightLocksId),this.$set(this.detailsItems[e][a],"row",e),this.$set(this.detailsItems[e][a],"origin",i.Segment.Origin),this.$set(this.detailsItems[e][a],"flightNo",i.Segment.FlightNo),this.$set(this.detailsItems[e][a],"destination",i.Segment.Destination),this.detailsItems[e][a].airplane={},this.$set(this.detailsItems[e][a].airplane,"id",i.Segment.AirplaneID),this.$set(this.detailsItems[e][a].airplane,"airplaneName",i.Segment.Airplane),this.$set(this.detailsItems[e][a],"date",i.Segment.DepartureDatetime),this.$set(this.detailsItems[e][a],"persianDate",new Date(i.Segment.DepartureDatetime).toLocaleString("fa-IR",{year:"numeric",day:"numeric",month:"numeric"})),this.detailsItems[e][a].airline={},this.$set(this.detailsItems[e][a].airline,"iata",i.Segment.AirlineIataCode),this.$set(this.detailsItems[e][a].airline,"name",i.Segment.Airline),this.$set(this.detailsItems[e][a],"flightTime",i.Segment.DepartureDatetime.slice(11,16)),this.$set(this.detailsItems[e][a],"duration",i.Segment.Duration),this.$set(this.detailsItems[e][a],"arrivalTime",i.Segment.ArrivalDatetime.slice(11,16)),this.$set(this.detailsItems[e][a],"sendList",i.Segment.SendList),this.$set(this.detailsItems[e][a],"closeSaleFlight",i.Segment.CloseSaleFlight),this.$set(this.detailsItems[e][a],"closeSaleQuotaFlight",i.Segment.CloseSaleQuotaFlight),this.$set(this.detailsItems[e][a],"description",i.Segment.SegmentDescriotion),this.$set(this.detailsItems[e][a],"SegmentStatus",i.Segment.SegmentStatus),this.$set(this.detailsItems[e][a],"segmentId",i.Segment.SegmentId),this.detailsFirst[e]=JSON.parse(JSON.stringify(this.detailsItems[e])),this.firstExpand[a]=!1})}):1==t&&this.firstExpand[t]?this.$store.getters["flightDeclare/getFlightsToEdit"].forEach((e,i)=>{this.capacityItems[i]=[{}],this.$set(this.capacityItems[i][0],"row",i),this.$set(this.capacityItems[i][0],"classId",e.FlightSegments[0].Class.ClassId),this.$set(this.capacityItems[i][0],"flightLocksId",e.FlightLocksId),this.$set(this.capacityItems[i][0],"cabinClass",e.CabinClass),this.$set(this.capacityItems[i][0],"quota",e.Quota),this.$set(this.capacityItems[i][0],"quotaAccountId",e.QuotaAccountId),this.$set(this.capacityItems[i][0],"cabinClassCode",e.FlightSegments[0].Class.CabinClassCode),this.$set(this.capacityItems[i][0],"capacity",e.FlightSegments[0].Class.Capacity),this.$set(this.capacityItems[i][0],"maxTour",e.FlightSegments[0].Class.MaxTour),this.$set(this.capacityItems[i][0],"maxOneway",e.FlightSegments[0].Class.MaxOneway),this.$set(this.capacityItems[i][0],"maxRoundtrip",e.FlightSegments[0].Class.MaxOneway),this.$set(this.capacityItems[i][0],"BtoB",e.FlightSegments[0].Class.Btob),this.$set(this.capacityItems[i][0],"BtoC",e.FlightSegments[0].Class.Btoc),this.$set(this.capacityItems[i][0],"searchEngines",e.FlightSegments[0].Class.Webservice),this.$set(this.capacityItems[i][0],"singleFlight",e.FlightSegments[0].Class.SaleFlight),this.$set(this.capacityItems[i][0],"flightAndHotel",e.FlightSegments[0].Class.Tour),this.$set(this.capacityItems[i][0],"ClassStatus",e.FlightSegments[0].Class.ClassStatus),this.capacityFirst[i]=JSON.parse(JSON.stringify(this.capacityItems[i])),this.firstExpand[t]=!1}):2==t&&this.firstExpand[t]&&(this.priceItems=[],this.$store.getters["flightDeclare/getFlightsToEdit"].forEach((t,e)=>{let i=t.Capacity-t.Seatremaining-t.QuotaCount-t.Reserved+1;t.Prices.forEach((a,s)=>{a.row=e,a.index=s,a.flightLocksId=t.FlightLocksId;let l=this.levels.filter(t=>t.Id==a.LevelId)[0];a.Level=l?l.Name:"تعریف نشده",a.canSellInThisRange=i>=a.FromCapacity&&i<a.ToCapacity,i>=a.FromCapacity&&a.ToCapacity}),this.priceItems.push(t.Prices)}),this.priceFirst=JSON.parse(JSON.stringify(this.priceItems)),this.firstExpand[t]=!1)},quotaClicked(t){const e=this.$router.resolve({name:"editCabinDeclaration",query:{fromEditFlight:JSON.stringify(t)}});window.open(e.href,"_blank")},ticketClicked(t,e){let i={classType:e,item:t},a={flight:JSON.stringify(t)};e&&(a.classType=e),this.$store.commit("flightStore/setTicketReportHeaders",t),this.overlay=!0,this.$store.dispatch("flightStore/setTicketReportItems",i).then(()=>{this.overlay=!1;const t=this.$router.resolve({name:"ticketReport",query:a});window.open(t.href,"_blank")}).catch(()=>{this.overlay=!1})},capacityClicked(t){this.$store.commit("flightStore/setTicketReportHeaders",t);const e=this.$router.resolve({name:"seats"});window.open(e.href,"_blank")},changeExpand(t,e){this.$set(this.isExpanded[t],e,!this.isExpanded[t][e])},setTableFlights(){this.collectiveDetailEdit=!1,this.collectiveCapacityEdit=!1,this.collectivePriceSubmit=!1,this.collectivePriceEdit=!1,this.tableFlights=[],setTimeout(()=>{this.calculatePrices()},0),0==this.$store.getters["flightDeclare/getFlightsToEdit"].length?(this.nothingToShow=!0,this.$toast.error("پروازی با این مشخصات یافت نشد")):this.nothingToShow=!1,this.isExpanded=[],this.tableFlights=JSON.parse(JSON.stringify(this.$store.getters["flightDeclare/getFlightsToEdit"]));let t=this.tableFlights[0].DepartureDatetime+this.tableFlights[0].flightNo,e=!0;this.tableFlights.map((i,a)=>{t!=i.DepartureDatetime+i.flightNo&&(e=!e),this.$set(this.tableFlights[a],"same",e),t=i.DepartureDatetime+i.flightNo,this.isExpanded.push([!1,!1,!1]),this.$set(this.tableFlights[a],"row",a),this.$set(this.tableFlights[a],"Departure",new this.$persianDate(i.DepartureDatetime.slice(0,10)).toString("ddd YYYY/MM/DD")+"-"+new this.$persianDate(i.DepartureDatetime.slice(0,10)).toString("jddd jYYYY/jMM/jDD")),this.$set(this.tableFlights[a],"QuotaName",i.Quota?`${i.Name} ${i.Family} ${i.CompanyName?i.CompanyName:""}`:i.QuotaCount),this.$set(this.tableFlights[a],"isQuota",i.Quota),this.$set(this.tableFlights[a],"quotaEnable",i.Quota),this.$set(this.tableFlights[a],"classId",i.FlightSegments[0].FlightSegmentsClassId)}),this.overlay=!1},removeCostObj(t){this.costObjCollective.splice(t,1)},removeDetail(t){this.collectiveDetailsData.splice(t,1)},checkObjectFull(t,e){if(Array.isArray(t)){let i=[];for(let a in t)i.push(this.checkObjectFull(t[a],e));return!(this.cnLodash.uniq(i).length>1)&&i[0]}{let i=!0;for(let a in t)(!e||"az"!=a&&"ta"!=a)&&(t[a]||(i=!1));return i}},checkPriceObject(t,e=!1){let i=[];for(let a in t)t[a].hasOwnProperty("az")&&t[a].hasOwnProperty("ta")&&t[a].hasOwnProperty("adultCost")&&t[a].hasOwnProperty("childCost")&&t[a].hasOwnProperty("infantCost")&&t[a].hasOwnProperty("currency")&&t[a].hasOwnProperty("rateClass")&&t[a].hasOwnProperty("level")&&t[a].hasOwnProperty("baggage")&&t[a].hasOwnProperty("rule")&&t[a].hasOwnProperty("commission")?i.push(!0):i.push(!1);return!(this.cnLodash.uniq(i).length>1)&&(1==i[0]&&this.checkObjectFull(t,e))},firstSubmitCollectiveDetails(){let t=[];this.$store.getters["flightEdit/getEditedSegments"].forEach((e,i)=>{if(e){this.$set(this.isExpanded[i],0,!1);for(let e=0;e<this.detailsItems[i].length;e++){let a={Id:this.detailsItems[i][e].segmentId,Origin:this.detailsItems[i][e].origin,Destination:this.detailsItems[i][e].destination,AirlineIataCode:this.collectiveDetailsData[e].airlineCollective?this.collectiveDetailsData[e].airlineCollective.iata:this.detailsItems[i][e].airline.iata,AirplaneId:this.collectiveDetailsData[e].airplaneCollective?this.collectiveDetailsData[e].airplaneCollective.id:this.detailsItems[i][e].airplane.id,FlightNo:this.collectiveDetailsData[e].flightNoCollective?this.collectiveDetailsData[e].flightNoCollective:this.detailsItems[i][e].flightNo,DepartureDatetime:this.collectiveDetailsData[e].flightTimeCollective?`${this.detailsItems[i][e].date.split(" ")[0]} ${this.collectiveDetailsData[e].flightTimeCollective.trim()}`:`${this.detailsItems[i][e].date.split(" ")[0]} ${this.detailsItems[i][e].flightTime.trim()}`,Duration:this.collectiveDetailsData[e].durationCollective?60*parseInt(this.collectiveDetailsData[e].durationCollective.split(":")[0])+parseInt(this.collectiveDetailsData[e].durationCollective.split(":")[1]):this.detailsItems[i][e].duration,CloseSaleFlight:this.collectiveDetailsData[e].closeSaleFlightCollective?this.collectiveDetailsData[e].closeSaleFlightCollective:this.detailsItems[i][e].closeSaleFlight,CloseSaleQuotaFlight:this.collectiveDetailsData[e].closeSaleFlightQoutaCollective?this.collectiveDetailsData[e].closeSaleFlightQoutaCollective:this.detailsItems[i][e].closeSaleQuotaFlight,SendList:this.collectiveDetailsData[e].sendListCollective?this.collectiveDetailsData[e].sendListCollective:this.detailsItems[i][e].sendList,Description:this.collectiveDetailsData[e].descriptionCollective?this.collectiveDetailsData[e].descriptionCollective:this.detailsItems[i][e].description,Status:"-1"==this.collectiveDetailsData[e].segmentStatusCollective?this.detailsItems[i][e].SegmentStatus:this.collectiveDetailsData[e].segmentStatusCollective};t.push(a)}this.$store.commit("flightEdit/setCollectiveEditedSegments",t);for(let t=0;t<this.detailsItems[i].length;t++)this.collectiveDetailsData[t].airlineCollective&&(this.$set(this.detailsItems[i][t].airline,"iata",this.collectiveDetailsData[t].airlineCollective.iata),this.$set(this.detailsItems[i][t].airline,"name",this.collectiveDetailsData[t].airlineCollective.name)),this.collectiveDetailsData[t].airplaneCollective&&(this.$set(this.detailsItems[i][t].airplane,"id",this.collectiveDetailsData[t].airplaneCollective.id),this.$set(this.detailsItems[i][t].airplane,"airplaneName",this.collectiveDetailsData[t].airplaneCollective.airplaneName)),this.collectiveDetailsData[t].flightNoCollective&&this.$set(this.detailsItems[i][t],"flightNo",this.collectiveDetailsData[t].flightNoCollective),this.collectiveDetailsData[t].flightTimeCollective&&this.$set(this.detailsItems[i][t],"flightTime",this.collectiveDetailsData[t].flightTimeCollective),this.collectiveDetailsData[t].durationCollective&&this.$set(this.detailsItems[i][t],"duration",60*parseInt(this.collectiveDetailsData[t].durationCollective.split(":")[0])+parseInt(this.collectiveDetailsData[t].durationCollective.split(":")[1])),this.collectiveDetailsData[t].closeSaleFlightCollective&&this.$set(this.detailsItems[i][t],"closeSaleFlight",this.collectiveDetailsData[t].closeSaleFlightCollective),this.collectiveDetailsData[t].closeSaleFlightQoutaCollective&&this.$set(this.detailsItems[i][t],"closeSaleQuotaFlight",this.collectiveDetailsData[t].closeSaleFlightQoutaCollective),this.collectiveDetailsData[t].sendListCollective&&this.$set(this.detailsItems[i][t],"sendList",this.collectiveDetailsData[t].sendListCollective),this.collectiveDetailsData[t].descriptionCollective&&this.$set(this.detailsItems[i][t],"description",this.collectiveDetailsData[t].descriptionCollective),-1!=this.collectiveDetailsData[t].segmentStatusCollective&&this.$set(this.detailsItems[i][t],"SegmentStatus",this.collectiveDetailsData[t].segmentStatusCollective);this.$set(this.isExpanded[i],0,!0),this.isCollectiveDetailToSend=!0}})},validateCollectivePriceEdit(t){return!!t[0].hasError},validateCollectivePrice(t){let e=[],i=0,a=this.$store.getters["flightDeclare/getFlightsToEdit"];this.$store.getters["flightEdit/getEditedPrices"].forEach((t,s)=>{t.price&&(e.push(a[s].Capacity-a[s].QuotaCount),i=a[s].QuotaCount)});let s=this.cnLodash.uniq(e).length;return s>1?(alert(" ظرفیت پرواز های انتخابی شبیه به هم نیستند"),!1):1==s&&(this.capacity=e[0],this.costObj=t,this.rateClassCheck("rateClass")?this.checkOverlapCollectivePrices("az","ta")?(alert("هم پوشانی در ویرایش گروهی قیمت"),!1):!!this.FullCheck("az","ta",i)||(alert("ظرفیت پر نشده است یا  ظرفیت گروهی بیش از ظرفیت پرواز است"),!1):(alert("کلاس نرخی ها در ویرایش گروهی قیمت باید متفاوت باشد"),!1))},firstSubmitCollectivePrice(){if(this.validateCollectivePrice(this.costObjCollective)&&this.checkPriceObject(this.costObjCollective)){let t=[],e=[];this.costObjCollective.forEach((i,a)=>{let s={Code:i.rule.Code,ADTTax:"0",CHDTax:"0",CodeId:i.rule.id,INFTax:"0",ADTFare:i.adultCost,CHDFare:i.childCost,INFFare:i.infantCost,Nationality:{Include:i.nationalityInclude,Exclude:i.nationalityExclude},ADTMultiWay:i.adultCostMulti,CHDMultiWay:i.childCostMulti,INFMultiWay:i.infantCostMulti,LevelId:i.level.Id,Currency:i.currency.Abbr,BaggageId:i.baggage.Id,PriceClass:i.rateClass,ToCapacity:i.ta,BaggageCode:i.baggage.Code,FromCapacity:i.az,CommissionCode:i.commission.Code,CommissionCodeId:i.commission.CodeId,PriceDetailsId:28,row:0,index:0,flightLocksId:i.flightLocksId,Level:i.level.Name,canSellInThisRange:!0},l={Price:{Adult:{Fare:parseInt(i.adultCost.replace(/,/g,"")),Tax:0,Commission:0,MultiWayFare:parseInt(i.adultCostMulti.replace(/,/g,""))},Child:{Fare:parseInt(i.childCost.replace(/,/g,"")),Tax:0,Commission:0,MultiWayFare:parseInt(i.childCostMulti.replace(/,/g,""))},Infant:{Fare:parseInt(i.infantCost.replace(/,/g,"")),Tax:0,Commission:0,MultiWayFare:parseInt(i.infantCostMulti.replace(/,/g,""))}},Nationality:{Include:i.nationalityInclude,Exclude:i.nationalityExclude},Currency:i.currency.Abbr,PriceClass:i.rateClass,FromCapacity:i.az,ToCapacity:i.ta,LevelId:i.level.Id,BaggageId:i.baggage.Id,CodeId:i.rule.id,CommissionCodeId:i.commission.CodeId};t.push(l),e.push(s)}),this.PriceFlightLocks=[],this.$store.getters["flightEdit/getEditedPrices"].forEach((i,a)=>{if(i.price){this.$set(this.isExpanded[a],2,!1);let i=this.priceItems[a][0].flightLocksId,s={FlightLockId:i,Prices:t},l=[s];this.PriceFlightLocks.push({Flights:l}),this.priceItems[a]=e,this.priceItems[a].forEach(t=>{t.flightLocksId=i}),this.$set(this.isExpanded[a],2,!0)}}),this.isCollectivePriceToSend=!0}else this.checkPriceObject(this.costObjCollective)||alert("لطفا فیلد های ویرایش گروهی قیمت را پر نمایید")},getPaths(){this.axios(this.$store.state.baseUrl+"inventory/distinctroutes").then(t=>{this.paths=t.data.items,this.origins=t.data.items.map(t=>t.origin),this.destinations=t.data.items.map(t=>t.destination)}).catch(t=>{})},firstSubmitCollectiveCapacity(){let t=[],e=[];this.$store.getters["flightEdit/getEditedClasses"].forEach((i,a)=>{if(i){this.$set(this.isExpanded[a],1,!1);let i={Id:this.capacityItems[a][0].classId,Capacity:this.capacityItems[a][0].capacity,CabinClass:"-1"!=this.collectiveCapacityData.cabinClassCollective?this.collectiveCapacityData.cabinClassCollective:this.capacityItems[a][0].cabinClass,MaxRoundtrip:this.collectiveCapacityData.maxRoundtripCollective?this.collectiveCapacityData.maxRoundtripCollective:this.capacityItems[a][0].maxRoundtrip,MaxOneway:this.collectiveCapacityData.maxOnewayCollective?this.collectiveCapacityData.maxOnewayCollective:this.capacityItems[a][0].maxOneway,MaxTour:this.collectiveCapacityData.maxTourCollective?this.collectiveCapacityData.maxTourCollective:this.capacityItems[a][0].maxTour,B2B:"-1"!=this.collectiveCapacityData.BtoBCollective?this.collectiveCapacityData.BtoBCollective:this.capacityItems[a][0].BtoB,B2C:"-1"!=this.collectiveCapacityData.BtoCCollective?this.collectiveCapacityData.BtoCCollective:this.capacityItems[a][0].BtoC,Webservice:"-1"!=this.collectiveCapacityData.searchEnginesCollective?this.collectiveCapacityData.searchEnginesCollective:this.capacityItems[a][0].searchEngines,Tour:"-1"!=this.collectiveCapacityData.flightAndHotelCollective?this.collectiveCapacityData.flightAndHotelCollective:this.capacityItems[a][0].flightAndHotel,SaleFlight:"-1"!=this.collectiveCapacityData.singleFlightCollective?this.collectiveCapacityData.singleFlightCollective:this.capacityItems[a][0].singleFlight,CabinClassCode:this.collectiveCapacityData.cabinClassCodeCollective?this.collectiveCapacityData.cabinClassCodeCollective:this.capacityItems[a][0].cabinClassCode,Status:"-1"!=this.collectiveCapacityData.ClassStatusCollective?this.collectiveCapacityData.ClassStatusCollective:this.capacityItems[a][0].ClassStatus};if(t.push(i),this.$store.commit("flightEdit/setEditedClasses",t),this.collectiveCapacityData.capacityCollective){let t={Id:this.capacityItems[a][0].classId,OldCapacity:this.capacityItems[a][0].capacity.toString(),NewCapacity:this.collectiveCapacityData.capacityCollective.toString(),Quota:this.capacityItems[a][0].quota,QuotaAccountId:this.capacityItems[a][0].quotaAccountId};e.push(t),this.$store.commit("flightEdit/setCapacityClasses",e)}"-1"!=this.collectiveCapacityData.cabinClassCollective&&this.$set(this.capacityItems[a][0],"cabinClass",this.collectiveCapacityData.cabinClassCollective),this.collectiveCapacityData.cabinClassCodeCollective&&this.$set(this.capacityItems[a][0],"cabinClassCode",this.collectiveCapacityData.cabinClassCodeCollective),this.collectiveCapacityData.capacityCollective&&this.$set(this.capacityItems[a][0],"capacity",this.collectiveCapacityData.capacityCollective),this.collectiveCapacityData.maxRoundtripCollective&&this.$set(this.capacityItems[a][0],"maxRoundtrip",this.collectiveCapacityData.maxRoundtripCollective),this.collectiveCapacityData.maxOnewayCollective&&this.$set(this.capacityItems[a][0],"maxOneway",this.collectiveCapacityData.maxOnewayCollective),this.collectiveCapacityData.maxTourCollective&&this.$set(this.capacityItems[a][0],"maxTour",this.collectiveCapacityData.maxTourCollective),"-1"!=this.collectiveCapacityData.BtoBCollective&&this.$set(this.capacityItems[a][0],"BtoB",parseInt(this.collectiveCapacityData.BtoBCollective)),"-1"!=this.collectiveCapacityData.BtoCCollective&&this.$set(this.capacityItems[a][0],"BtoC",parseInt(this.collectiveCapacityData.BtoCCollective)),"-1"!=this.collectiveCapacityData.searchEnginesCollective&&this.$set(this.capacityItems[a][0],"searchEngines",parseInt(this.collectiveCapacityData.searchEnginesCollective)),"-1"!=this.collectiveCapacityData.flightAndHotelCollective&&this.$set(this.capacityItems[a][0],"flightAndHotel",parseInt(this.collectiveCapacityData.flightAndHotelCollective)),"-1"!=this.collectiveCapacityData.singleFlightCollective&&this.$set(this.capacityItems[a][0],"singleFlight",parseInt(this.collectiveCapacityData.singleFlightCollective)),"-1"!=this.collectiveCapacityData.ClassStatusCollective&&this.$set(this.capacityItems[a][0],"ClassStatus",parseInt(this.collectiveCapacityData.ClassStatusCollective)),this.$set(this.isExpanded[a],1,!0),this.isCollectiveClassToSend=!0}})}},computed:{todayJ(){return(new this.$persianDate).calendar("j").toString()},retDate(){return 0!=this.datesEdit.length?this.datesEdit[1]:""},displayRetDate(){if(this.retDate){let t="jYYYY/jMM/jDD";return this.$options.filters.simplePersian(new this.$persianDate(this.retDate).toString(t),"fa")}return""}},mounted(){this.getPaths();let t=this.$store.getters["flightDeclare/getAcceptedFlightLocks"];this.acceptedFlightLocksLenghts=t.length,this.$route.query.flightLocks&&(this.overlay=!0,this.$store.dispatch("flightDeclare/setFlightsToEdit",t).then(t=>{this.setTableFlights(),this.overlay=!1,this.$toast.success("پرواز با موفقیت ایجاد شد")}).catch(t=>{this.overlay=!1,this.$toast.error("ایجاد پرواز با خطا مواجه شد!")}))}},gt=vt,ft=(i("0e36"),Object(Y["a"])(gt,N,A,!1,null,null,null));e["default"]=ft.exports},bc17:function(t,e,i){},c53c:function(t,e,i){"use strict";var a=i("c6a6"),s=i("8336"),l=i("b0af"),n=i("99d9"),c=i("ac7c"),o=i("62ad"),r=i("169a"),d=i("ce7e"),u=i("132d"),h=i("da13"),m=i("1800"),p=i("5d23"),C=i("0fd9"),v=i("b974"),g=i("1f4f"),f=i("2fa4"),y=i("71a3"),x=i("fe57"),b=i("9a96"),_=i("8654"),D=function(){var t=this,e=t._self._c;return e("div",{staticClass:"costdeclaration container"},[e(C["a"],{staticClass:"d-flex flex-column ma-0",staticStyle:{width:"100%"}},[e(r["a"],{attrs:{"max-width":"400"},model:{value:t.rateClassDialogError,callback:function(e){t.rateClassDialogError=e},expression:"rateClassDialogError"}},[e(l["a"],[e(n["d"],[e(u["a"],{staticClass:"ml-2 icon-danger-triangle icon-18 px-2",attrs:{color:"warning"}}),t._v(" توجه")],1),e(n["c"],[e("ul",{staticClass:"px-4 body-1"},[e("li",[t._v("کلاس نرخی باید با "),e("b",[t._v("حروف بزرگ")]),t._v(" نوشته شود.")]),e("li",[t._v("از حروف "),e("b",[t._v("Y ،O ،F ،C")]),t._v(" استفاده نشود.")])])]),e(n["a"],[e(s["a"],{attrs:{text:""},on:{click:function(e){t.rateClassDialogError=!1}}},[t._v(" بستن ")])],1)],1)],1),e(r["a"],{attrs:{width:"50%"},on:{"click:outside":function(e){t.ruleDetail=!1}},model:{value:t.ruleDetail,callback:function(e){t.ruleDetail=e},expression:"ruleDetail"}},[e(l["a"],[e(x["a"],{staticClass:"justify-self-right tabRules d-flex flex-column flight-declare-tabs",model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(b["a"],{attrs:{color:"primary"}}),e(y["a"],{staticStyle:{height:"40px",color:"#b7b7b7","letter-spacing":"0px"}},[t._v(" قانون "+t._s(t.ruleInfo.Code)+" ")]),e(f["a"]),e(s["a"],{staticClass:"elevation-0 align-self-end",attrs:{color:"white"},on:{click:function(e){t.ruleDetail=!1}}},[e(u["a"],{staticClass:"icon-remove icon-18",attrs:{size:"12"}})],1)],1),t.ruleInfo.Penalties&&t.ruleInfo.Penalties.length?e(n["c"],t._l(t.ruleInfo.Penalties,(function(i,a){return e(l["a"],{key:a,staticClass:"mt-5 grey--text text--darken-2",staticStyle:{"background-color":"#eeeeee"},attrs:{flat:""}},[e(C["a"],{staticClass:"d-flex justify-space-between align-center ma-0 pt-2",staticStyle:{width:"100%"}},[e(o["a"],{staticClass:"pb-0 grey--text text--darken-4",staticStyle:{"max-width":"fit-content"}},[e("span",[t._v(" جریمه کنسلی")])]),e(o["a"],{staticClass:"pa-0",staticStyle:{width:"100%"}},[e(d["a"],{staticClass:"primary",staticStyle:{width:"100%"}})],1)],1),e("div",{staticClass:"d-flex justify-space-around pa-2"},[e("span",[t._v("بزرگسال: "+t._s(i.Cancel.ADT))]),e("span",[t._v("کودک: "+t._s(i.Cancel.CHD))]),e("span",[t._v("نوزاد: "+t._s(i.Cancel.INF))])]),e("div",{staticClass:"d-flex justify-space-around mt-5 pa-2"},[e("span",[t._v("نوع جریمه: "+t._s("Percent"==i.PriceType?"درصد":"مبلغ"))]),e("span",[t._v("نوع: "+t._s("hourly"==i.Type?"دقیقه ای":"daily"==i.Type?"روزانه":"عدم حضور"))]),"daily"==i.Type?e("span",[t._v(" تاساعت: "+t._s(i.HourOfDay))]):t._e(),e("span",[t._v(t._s(i.Value)+" "+t._s("hourly"==i.Type?"دقیقه مانده به پرواز":"روز مانده به پرواز"))])])],1)})),1):t._e(),t.ruleInfo.Rules&&t.ruleInfo.Rules.length?e(n["c"],t._l(t.ruleInfo.Rules,(function(i,a){return e(l["a"],{key:a,staticClass:"grey--text text--darken-2",staticStyle:{"background-color":"#eeeeee"},attrs:{flat:""}},[e(C["a"],{staticClass:"d-flex justify-space-between align-center ma-0 pt-2",staticStyle:{width:"100%"}},[e(o["a"],{staticClass:"pb-0 grey--text text--darken-4",staticStyle:{"max-width":"fit-content"}},[e("span",[t._v(" توضیحات متنی")])]),e(o["a"],{staticClass:"pa-0",staticStyle:{width:"100%"}},[e(d["a"],{staticClass:"primary",staticStyle:{width:"100%"}})],1)],1),e("div",{staticClass:"d-flex justify-space-around pa-2"},[e("span",[t._v("عنوان: "+t._s(i.SubTitle))]),e("span",[t._v("شرح: "+t._s(i.Text))])])],1)})),1):t._e()],1)],1),e(r["a"],{attrs:{width:"30%"},model:{value:t.baggageDialog,callback:function(e){t.baggageDialog=e},expression:"baggageDialog"}},[e(l["a"],{attrs:{flat:""}},[e(n["c"],{staticClass:"grey--text text--darken-2"},[e(C["a"],{staticClass:"d-flex justify-space-between align-center ma-0 pt-2",staticStyle:{width:"100%"}},[e(d["a"],{staticClass:"primary",staticStyle:{width:"100%"}}),e(o["a"],{staticClass:"pb-0 grey--text text--darken-4",staticStyle:{"max-width":"fit-content"}},[e("span",[t._v(" مقدار بار")]),e("span",[t._v(" "+t._s(t.baggageInfo.Code))])]),e(o["a"],{staticClass:"pa-0",staticStyle:{width:"100%"}},[e(d["a"],{staticClass:"primary",staticStyle:{width:"100%"}})],1)],1),e("div",{staticClass:"d-flex justify-space-around pa-2"},[e("table",{staticClass:"mt-3"},[e("thead",[e("tr",[e("th",{staticClass:"text-center"},[t._v("بزرگسال")]),e("th",{staticClass:"text-center"},[t._v("کودک")]),e("th",{staticClass:"text-center"},[t._v("نوزاد")])])]),e("tbody",[e("tr",[e("td",{staticClass:"text-center px-3"},[e("span",{staticClass:"pr-1"},[t._v(t._s(t.baggageInfo.Adt))]),e("span",[t._v(t._s(t.baggageInfo.Unit))])]),e("td",{staticClass:"text-center px-3"},[e("span",{staticClass:"pr-1"},[t._v(t._s(t.baggageInfo.Chd))]),e("span",[t._v(t._s(t.baggageInfo.Unit))])]),e("td",{staticClass:"text-center px-3"},[e("span",{staticClass:"pr-1"},[t._v(t._s(t.baggageInfo.Inf))]),e("span",[t._v(t._s(t.baggageInfo.Unit))])])])])])])],1),e(n["a"],[e(f["a"]),e(s["a"],{attrs:{depressed:""},on:{click:function(e){t.baggageDialog=!1}}},[t._v("بستن")])],1)],1)],1),e(r["a"],{attrs:{width:"40%"},model:{value:t.commissionDialog,callback:function(e){t.commissionDialog=e},expression:"commissionDialog"}},[e(l["a"],{attrs:{flat:""}},[e(n["c"],{staticClass:"grey--text text--darken-2"},[e(C["a"],{staticClass:"d-flex justify-space-between align-center ma-0 pt-2",staticStyle:{width:"100%"}},[e(d["a"],{staticClass:"primary",staticStyle:{width:"100%"}}),e(o["a"],{staticClass:"pb-0 grey--text text--darken-4 d-flex",staticStyle:{"max-width":"fit-content"}},[e("span",[t._v("کمسیسون")]),e("span",{staticClass:"mr-2"},[t._v(" "+t._s(t.commissionInfo.Code))])]),e(o["a"],{staticClass:"pa-0",staticStyle:{width:"100%"}},[e(d["a"],{staticClass:"primary",staticStyle:{width:"100%"}})],1)],1),e("div",{staticClass:"d-flex justify-space-around"},[e(g["a"],{staticClass:"mt-3"},[e("thead",[e("tr",[e("th",{staticClass:"text-center"},[t._v("گروه کمسیسونی")]),e("th",{staticClass:"text-center"},[t._v("بزرگسال")]),e("th",{staticClass:"text-center"},[t._v("کودک")]),e("th",{staticClass:"text-center"},[t._v("نوزاد")]),e("th",{staticClass:"text-center"},[t._v("نوع")])])]),e("tbody",t._l(t.commissionInfo.Commissions,(function(i,a){return e("tr",{key:a},[e("td",{staticClass:"text-center px-3"},[e("span",{staticClass:"pr-1"},[t._v(t._s(i.category))])]),e("td",{staticClass:"text-center px-3"},[e("span",{staticClass:"pr-1"},[t._v(t._s(i.Adt))])]),e("td",{staticClass:"text-center px-3"},[e("span",{staticClass:"pr-1"},[t._v(t._s(i.Chd))])]),e("td",{staticClass:"text-center px-3"},[e("span",{staticClass:"pr-1"},[t._v(t._s(i.Inf))])]),e("td",{staticClass:"text-center px-3"},[e("span",{staticClass:"pr-1"},[t._v(t._s(t._f("calcType")(i.CalcType)))])])])})),0)])],1)],1),e(n["a"],[e(f["a"]),e(s["a"],{attrs:{depressed:""},on:{click:function(e){t.commissionDialog=!1}}},[t._v("بستن")])],1)],1)],1),e("div",{staticClass:"d-flex justify-space-between px-0"},[e("div",{staticClass:"col-5 pl-0",staticStyle:{"min-width":"48%"}},[e(d["a"],{staticClass:"primary"})],1),e("div",{staticClass:"px-0 d-flex pt-0 justify-center",staticStyle:{"min-width":"5%",height:"15px"}},[e("span",{staticStyle:{color:"var(--v-primary-base)"}},[t._v(t._s(t.value.rateClass||"- -"))])]),e("div",{staticClass:"col-5 pr-0",staticStyle:{"min-width":"48%"}},[e(d["a"],{staticClass:"primary"})],1)]),e("div",{staticClass:"d-flex"},[e(o["a"],{staticClass:"py-2 smallpadding",staticStyle:{"max-width":"8%",position:"relative"}},[e(_["a"],{ref:"rateClasses",attrs:{label:t.$t("classCode"),maxlength:"1",error:t.rateClassError,placeholder:" ",dense:"",type:"text",outlined:""},on:{keydown:t.checkRateClass},model:{value:t.value.rateClass,callback:function(e){t.$set(t.value,"rateClass",e)},expression:"value.rateClass"}})],1),e(o["a"],{staticClass:"py-2 smallpadding",staticStyle:{"max-width":"7.25%"},attrs:{cols:"1"}},[e(_["a"],{staticClass:"centerinp",attrs:{type:"number",dense:"",rules:[t.rules.minRule],autocomplete:"off",max:t.capacity,error:t.azError,label:"*از",disabled:t.disableFromTo,outlined:""},on:{input:function(e){return t.updateCom()}},model:{value:t.value.az,callback:function(e){t.$set(t.value,"az",e)},expression:"value.az"}})],1),e(o["a"],{staticClass:"py-2 smallpadding",staticStyle:{"max-width":"7.25%"},attrs:{cols:"1"}},[e(_["a"],{ref:"ta",staticClass:"centerinp",attrs:{type:"number",min:t.az,dense:"",rules:[t.rules.minRule],"error-messages":t.capacityError,autocomplete:"off",error:t.taError,max:t.capacity,label:"*تا",disabled:t.disableFromTo,outlined:""},on:{blur:t.fixValue,input:function(e){return t.updateCom()}},model:{value:t.value.ta,callback:function(e){t.$set(t.value,"ta",e)},expression:"value.ta"}})],1),e(o["a"],{staticClass:"smallpadding py-2 col-2",staticStyle:{"max-width":"14.5%"}},[e(v["a"],{ref:"rules",staticClass:"centerinp rules",attrs:{items:t.newCodeRule,"return-object":"",dense:"",error:t.ruleError,"hide-details":"","menu-props":{offsetY:!0},label:"قوانین",outlined:""},on:{input:function(e){return t.updateCom()}},scopedSlots:t._u([{key:"prepend-inner",fn:function(){return[e(u["a"],{attrs:{size:"12"}},[t._v("*")])]},proxy:!0},{key:"item",fn:function(i){return[e("div",{staticClass:"d-flex justify-space-between",staticStyle:{width:"100%"}},[e("span",{staticClass:"caption mr-1 black--text"},[t._v(t._s(i.item.Code))]),e(u["a"],{staticClass:"icon-info-circle icon-18",attrs:{size:"15"},on:{click:function(e){return t.ruleInfoClicked(i.item)}}})],1)]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"caption mr-1 black--text"},[t._v(t._s(i.item.Code))])]}}]),model:{value:t.value.rule,callback:function(e){t.$set(t.value,"rule",e)},expression:"value.rule"}})],1),e(o["a"],{staticClass:"smallpadding py-2 col-2",staticStyle:{"max-width":"14.5%"}},[e(v["a"],{ref:"baggage",staticClass:"centerinp rules",attrs:{items:t.newBaggages,"return-object":"",dense:"",error:t.baggageError,"hide-details":"","menu-props":{offsetY:!0},label:"بار",outlined:""},on:{input:function(e){return t.updateCom()}},scopedSlots:t._u([{key:"prepend-inner",fn:function(){return[e(u["a"],{attrs:{size:"12"}},[t._v("*")])]},proxy:!0},{key:"item",fn:function(i){return[e("div",{staticClass:"d-flex justify-space-between",staticStyle:{width:"100%"}},[e("span",{staticClass:"caption mr-1 black--text"},[t._v(t._s(i.item.Code))]),e(u["a"],{staticClass:"icon-info-circle icon-18",attrs:{size:"15"},on:{click:function(e){return t.baggageInfoClicked(i.item)}}})],1)]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"caption mr-1 black--text"},[t._v(t._s(i.item.Code))])]}}]),model:{value:t.value.baggage,callback:function(e){t.$set(t.value,"baggage",e)},expression:"value.baggage"}})],1),e(o["a"],{staticClass:"py-2 smallpadding col-2",staticStyle:{"max-width":"14.5%"}},[e(v["a"],{ref:"commission",staticClass:"centerinp",attrs:{items:t.newCodeCommissions,label:"کمیسیون","hide-details":"",outlined:"",dense:"","menu-props":{offsetY:!0},error:t.commissionError,"no-data-text":"کمسیسون وجود ندارد"},on:{input:function(e){return t.updateCom()}},scopedSlots:t._u([{key:"prepend-inner",fn:function(){return[e(u["a"],{attrs:{size:"12"}},[t._v("*")])]},proxy:!0},{key:"item",fn:function(i){return[e("div",{staticClass:"d-flex justify-space-between",staticStyle:{width:"100%"}},[e("span",{staticClass:"caption mr-1 black--text"},[t._v(t._s(i.item.Code))]),e(u["a"],{staticClass:"icon-info-circle icon-18",attrs:{size:"15"},on:{click:function(e){return e.stopPropagation(),t.commissionInfoClicked(i.item)}}})],1)]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"caption mr-1 black--text",staticStyle:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},[t._v(t._s(i.item.Code))])]}}]),model:{value:t.value.commission,callback:function(e){t.$set(t.value,"commission",e)},expression:"value.commission"}})],1),e(o["a"],{staticClass:"py-2 smallpadding",staticStyle:{"max-width":"14.5%"}},[e(v["a"],{ref:"commission",staticClass:"centerinp rules",attrs:{items:t.newLevels,label:"گروه قیمتی","hide-details":"",outlined:"",autocomplete:"off",dense:"","menu-props":{offsetY:!0},error:t.levelsError,"no-data-text":"گروه قیمتی وجود ندارد"},on:{input:function(e){return t.updateCom()}},scopedSlots:t._u([{key:"item",fn:function(i){return[e("span",{staticClass:"caption black--text"},[t._v(t._s(i.item.Name))])]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"black--text",staticStyle:{"font-size":"10px"}},[t._v(t._s(i.item.Name))])]}}]),model:{value:t.value.level,callback:function(e){t.$set(t.value,"level",e)},expression:"value.level"}})],1),e(o["a"],{staticClass:"py-2 smallpadding",staticStyle:{"max-width":"14.5%",position:"relative"}},[e(u["a"],{staticClass:"refreshIcon icon-refresh-circle icon-18",class:{active:t.refreshLoading},attrs:{"x-small":""},on:{click:t.refreshDate}}),e(v["a"],{ref:"currency",staticClass:"centerinp",attrs:{dense:"",items:t.newCurrencies,label:"نوع ارز",outlined:"","hide-details":"",error:t.currencyError,"return-object":"","menu-props":{offsetY:!0},"no-data-text":"ارز وجود ندارد"},on:{input:function(e){return t.updateCom()}},scopedSlots:t._u([{key:"item",fn:function(i){return[e("span",{staticClass:"caption mr-3 black--text"},[t._v(t._s(i.item.TXT))])]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"caption mr-3 black--text"},[t._v(t._s(i.item.TXT))])]}}]),model:{value:t.value.currency,callback:function(e){t.$set(t.value,"currency",e)},expression:"value.currency"}})],1)],1),e("div",{staticClass:"d-flex"},[e(o["a"],{staticClass:"smallpadding d-flex align-center",staticStyle:{"max-width":"8%"}},[e("span",{staticStyle:{"font-size":"12px"}},[t._v("قیمت")])]),e(o["a"],{staticClass:"py-2 smallpadding",staticStyle:{"max-width":"13.5%"}},[e(a["a"],{ref:"adultCost",staticClass:"centerinp nationailtySelect",attrs:{min:"0",label:"ملیت شامل",items:t.countries,"item-value":"abb","item-text":"searchKey","hide-details":"",multiple:"",autocomplete:"off",outlined:"",dense:""},on:{input:t.updateCom},scopedSlots:t._u([{key:"item",fn:function({item:i,on:a,attrs:s}){return[e(h["a"],t._g(t._b({scopedSlots:t._u([{key:"default",fn:function({active:a}){return[e(m["a"],[e(c["a"],{attrs:{"input-value":a}})],1),e(p["a"],[e(p["c"],[e("span",{staticClass:"font-size-11"},[t._v(t._s(i.name_fa))])])],1)]}}],null,!0)},"v-list-item",s,!1),a))]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"font-size-11 text-start"},[t._v(t._s(i.item.name_fa))])]}},{key:"prepend-inner",fn:function(){return[e(u["a"],{attrs:{size:"12"}},[t._v("*")])]},proxy:!0}]),model:{value:t.value.nationalityInclude,callback:function(e){t.$set(t.value,"nationalityInclude",e)},expression:"value.nationalityInclude"}})],1),e(o["a"],{staticClass:"py-2 smallpadding",staticStyle:{"max-width":"13.5%"}},[e(a["a"],{ref:"adultCost",staticClass:"centerinp nationailtySelect",attrs:{min:"0",label:"ملیت به جز",items:t.countries,"item-text":"searchKey","item-value":"abb","hide-details":"",multiple:"",autocomplete:"off",outlined:"",dense:""},on:{input:t.updateCom},scopedSlots:t._u([{key:"item",fn:function({item:i,on:a,attrs:s}){return[e(h["a"],t._g(t._b({scopedSlots:t._u([{key:"default",fn:function({active:a}){return[e(m["a"],[e(c["a"],{attrs:{"input-value":a}})],1),e(p["a"],[e(p["c"],[e("span",{staticClass:"font-size-11"},[t._v(t._s(i.name_fa))])])],1)]}}],null,!0)},"v-list-item",s,!1),a))]}},{key:"selection",fn:function(i){return[e("span",{staticClass:"font-size-11 text-start"},[t._v(t._s(i.item.name_fa))])]}},{key:"prepend-inner",fn:function(){return[e(u["a"],{attrs:{size:"12"}},[t._v("*")])]},proxy:!0}]),model:{value:t.value.nationalityExclude,callback:function(e){t.$set(t.value,"nationalityExclude",e)},expression:"value.nationalityExclude"}})],1),e(o["a"],{staticClass:"py-2 smallpadding",staticStyle:{"max-width":"13.5%"}},[e(_["a"],{ref:"adultCost",staticClass:"centerinp",attrs:{min:"0",error:t.adultCostError,label:" بزرگسال (یکطرفه)","hide-details":"",autocomplete:"off",outlined:"",dense:""},on:{keydown:t.checkEnglish,input:function(e){t.value.adultCost=t.numberWithComma(e),!t.adultMultiDown&&(t.value.adultCostMulti=t.value.adultCost)}},scopedSlots:t._u([{key:"prepend-inner",fn:function(){return[e(u["a"],{attrs:{size:"12"}},[t._v("*")])]},proxy:!0}]),model:{value:t.value.adultCost,callback:function(e){t.$set(t.value,"adultCost",e)},expression:"value.adultCost"}})],1),e(o["a"],{staticClass:"py-2 smallpadding",staticStyle:{"max-width":"13.5%"}},[e(_["a"],{ref:"childCost",staticClass:"centerinp",attrs:{min:"0",dense:"",error:t.childCostError,label:" کودک (یکطرفه)",autocomplete:"off",outlined:"","hide-details":""},on:{keydown:t.checkEnglish,input:function(e){t.value.childCost=t.numberWithComma(e),!t.childMultiDown&&(t.value.childCostMulti=t.value.childCost)}},scopedSlots:t._u([{key:"prepend-inner",fn:function(){return[e(u["a"],{attrs:{size:"12"}},[t._v("*")])]},proxy:!0}]),model:{value:t.value.childCost,callback:function(e){t.$set(t.value,"childCost",e)},expression:"value.childCost"}})],1),e(o["a"],{staticClass:"py-2 smallpadding",staticStyle:{"max-width":"13.5%"}},[e(_["a"],{ref:"infantCost",staticClass:"centerinp",attrs:{outlined:"",min:"0",dense:"",error:t.infantCostError,autocomplete:"off",label:"نوزاد(یکطرفه)","hide-details":""},on:{keydown:t.checkEnglish,input:function(e){t.value.infantCost=t.numberWithComma(e),!t.infantMultiDown&&(t.value.infantCostMulti=t.value.infantCost)}},scopedSlots:t._u([{key:"prepend-inner",fn:function(){return[e(u["a"],{attrs:{size:"12"}},[t._v("*")])]},proxy:!0}]),model:{value:t.value.infantCost,callback:function(e){t.$set(t.value,"infantCost",e)},expression:"value.infantCost"}})],1),e(o["a"],{staticClass:"py-2 smallpadding",staticStyle:{"max-width":"13.5%"}},[t.numberOfFlights<2?e(_["a"],{ref:"adultCost",staticClass:"centerinp",attrs:{min:"0",error:t.adultCostErrorMulti,label:" بزرگسال (دوطرفه)","hide-details":"",autocomplete:"off",outlined:"",dense:""},on:{keydown:function(e){t.checkEnglish,t.adultMultiDown=!0},input:function(e){return t.numberWithCommasMulti(e,0)}},scopedSlots:t._u([{key:"prepend-inner",fn:function(){return[e(u["a"],{attrs:{size:"12"}},[t._v("*")])]},proxy:!0}],null,!1,2883456625),model:{value:t.value.adultCostMulti,callback:function(e){t.$set(t.value,"adultCostMulti",e)},expression:"value.adultCostMulti"}}):t._e()],1),e(o["a"],{staticClass:"py-2 smallpadding",staticStyle:{"max-width":"13.5%"}},[t.numberOfFlights<2?e(_["a"],{ref:"childCost",staticClass:"centerinp",attrs:{min:"0",dense:"",error:t.childCostErrorMulti,label:"کودک (دوطرفه)",autocomplete:"off",outlined:"","hide-details":""},on:{keydown:function(e){t.checkEnglish,t.childMultiDown=!0},input:function(e){return t.numberWithCommasMulti(e,1)}},scopedSlots:t._u([{key:"prepend-inner",fn:function(){return[e(u["a"],{attrs:{size:"12"}},[t._v("*")])]},proxy:!0}],null,!1,2883456625),model:{value:t.value.childCostMulti,callback:function(e){t.$set(t.value,"childCostMulti",e)},expression:"value.childCostMulti"}}):t._e()],1),e(o["a"],{staticClass:"py-2 smallpadding",staticStyle:{"max-width":"13.5%"}},[t.numberOfFlights<2?e(_["a"],{ref:"infantCost",staticClass:"centerinp",attrs:{outlined:"",min:"0",dense:"",error:t.infantCostErrorMulti,autocomplete:"off",label:"نوزاد (دوطرفه)","hide-details":""},on:{keydown:function(e){t.checkEnglish,t.infantMultiDown=!0},input:function(e){return t.numberWithCommasMulti(e,2)}},scopedSlots:t._u([{key:"prepend-inner",fn:function(){return[e(u["a"],{attrs:{size:"12"}},[t._v("*")])]},proxy:!0}],null,!1,2883456625),model:{value:t.value.infantCostMulti,callback:function(e){t.$set(t.value,"infantCostMulti",e)},expression:"value.infantCostMulti"}}):t._e()],1)],1)],1)],1)},I=[],k=i("22ae"),S=i("403a"),F={props:["value","disableFromTo","capacity","CodeRule","levels","baggages","CodeCommissions","currencies","checkFull","numberOfFlights"],data:()=>({rules:[],commissions:[],rateClasses:[],countries:S["d"],newCodeRule:[],newLevels:[],newBaggages:[],newCurrencies:[],az:1,ta:null,rateClassDialogError:!1,rules:{minRule:t=>t>0||"مقدار باید بالاتر از صفر باشد"},adultCost:"",childCost:"",infantCost:"",refreshLoading:!1,rule:"",baggageDialog:!1,commissionDialog:!1,baggageInfo:"",commissionInfo:"",commission:"",rateClass:"",capacityError:"",baggageError:"",tab:"",currency:{Id:"1",TXT:"ریال",Abbr:"IRR"},azError:!1,taError:!1,adultCostError:!1,nationalityError:!1,adultCostErrorMulti:!1,childCostError:!1,childCostErrorMulti:!1,infantCostError:!1,infantCostErrorMulti:!1,ruleError:!1,commissionError:!1,baggageError:!1,levelsError:!1,currencyError:!1,rateClassError:!1,ruleDetail:!1,ruleInfo:"",adultMultiDown:!1,childMultiDown:!1,infantMultiDown:!1}),mixins:[k["a"]],created(){this.value.commission=this.CodeCommissions[this.CodeCommissions.length-1],this.value.level=this.levels[this.levels.length-1],this.value.currency=this.currency,this.value.az=1,this.value.ta=this.capacity,this.value.currency={Id:"1",TXT:"ریال",Abbr:"IRR"},this.disableFromTo&&(this.value.az=null,this.value.commission=null,this.value.baggage=null,this.value.level=null,this.value.currency=null),this.newCodeRule=this.CodeRule,this.newBaggages=this.baggages,this.newLevels=this.levels,this.newCodeCommissions=this.CodeCommissions,this.newCurrencies=this.currencies,this.value.nationalityInclude=[],this.value.nationalityExclude=[]},computed:{rateClassRules(){const t=[];var e=/^[A-Z]*$/;if(this.value.rateClass){const i=t=>e.test(t)||"فقط حروف بزرگ لاتین مجاز است ";"فقط حروف بزرگ لاتین مجاز است "==i&&(this.rateClassError=!0),t.push(i)}var i=/^(?![FO])[A-Z]*$/;if(this.value.rateClass){const e=t=>i.test(t)||"این حرف مجاز نیست ";t.push(e)}return t}},watch:{capacity(){this.value.ta=this.capacity},value(){null==this.value.ta&&(this.value.ta=this.capacity)},checkFull(){this.azError=this.value.az?this.azError=!1:this.azError=!0,this.taError=this.value.ta?this.taError=!1:this.taError=!0,this.disableFromTo&&(this.azError=!1,this.taError=!1),1==this.numberOfFlights&&(this.adultCostErrorMulti=this.value.adultCostMulti?this.adultCostErrorMulti=!1:this.adultCostErrorMulti=!0,this.childCostErrorMulti=this.value.childCostMulti?this.childCostErrorMulti=!1:this.childCostErrorMulti=!0,this.infantCostErrorMulti=this.value.infantCostMulti?this.infantCostErrorMulti=!1:this.infantCostErrorMulti=!0),this.adultCostError=this.value.adultCost?this.adultCostError=!1:this.adultCostError=!0,this.childCostError=this.value.childCost?this.childCostError=!1:this.childCostError=!0,this.infantCostError=this.value.infantCost?this.infantCostError=!1:this.infantCostError=!0,this.ruleError=this.value.rule?this.ruleError=!1:this.ruleError=!0,this.commissionError=this.value.commission?this.commissionError=!1:this.commissionError=!0,this.baggageError=this.value.baggage?this.baggageError=!1:this.baggageError=!0,this.levelsError=this.value.level?this.levelsError=!1:this.levelsError=!0,this.currencyError=this.value.currency?this.currencyError=!1:this.currencyError=!0,this.rateClassError=this.value.rateClass?this.rateClassError=!1:this.rateClassError=!0}},methods:{refreshDate(){this.refreshLoading=!0,this.getRules(),this.getcurrency(),this.getLevels(),this.getBaggages(),this.getcodecommissions(),setTimeout(()=>{this.refreshLoading=!1},1500)},async getBaggages(){let t=await this.axios(this.$store.state.baseUrl+"inventory/baggage");this.newBaggages=t.data.Items},async getRules(){let t=await this.axios(this.$store.state.baseUrl+"inventory/codeRules");this.newCodeRule=t.data.CodeRule},async getLevels(){let t=await this.axios(this.$store.state.baseUrl+"category?Type=level");this.newLevels=t.data.Items,this.newLevels.push({Name:"-",Id:-1})},async getcodecommissions(){let t=await this.axios(this.$store.state.baseUrl+"category?Type=commission"),e=await this.axios(this.$store.state.baseUrl+"inventory/codeCommissions"),i=t.data.Items;this.newCodeCommissions=e.data.CodeCommissions,this.newCodeCommissions.map(t=>{t.Commissions.map(t=>{let e=i.find(e=>e.Id===t.CommissionCategoryId);t.category=e.Name})}),this.newCodeCommissions.push({Code:"-"})},async getcurrency(){let t=await this.axios(this.$store.state.baseUrl+"currencies");this.newCurrencies=t.data.Items},ruleInfoClicked(t){this.ruleDetail=!0,this.ruleInfo=t},baggageInfoClicked(t){this.baggageDialog=!0,this.baggageInfo=t},commissionInfoClicked(t){this.commissionDialog=!0,this.commissionInfo=t},filter(t,e){t.Code},fixCombo(t){const e=/[a-zA-Z]/;e.test(t.key)||t.preventDefault()},fixValue(){parseInt(this.value.ta)<parseInt(this.value.az)&&(this.ta=this.az),parseInt(this.value.ta)>parseInt(this.value.capacity)&&(this.ta=this.capacity)},checkEnglish(t){const e=/[0-9]/;e.test(t.key)||8==t.keyCode||46==t.keyCode||9==t.keyCode||t.preventDefault()},checkRateClass(t){this.rateClassError=!1;const e=/(?![FOYC])[A-Z]/;e.test(t.key)?this.rateClassError=!1:(t.preventDefault(),this.rateClassError=!0,this.rateClassDialogError=!0)},numberWithCommas(t,e){switch(e){case 0:this.value.adultCost=t.replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",");break;case 1:this.value.childCost=t.replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",");break;case 2:this.value.infantCost=t.replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",");break}this.updateCom()},numberWithCommasMulti(t,e){switch(e){case 0:this.value.adultCostMulti=t.replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",");break;case 1:this.value.childCostMulti=t.replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",");break;case 2:this.value.infantCostMulti=t.replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",");break}this.updateCom()},updateCom(){let t=parseInt(this.value.az),e=parseInt(this.value.ta);if(t<=this.capacity&&e>=t||this.disableFromTo){this.capacityError="";let t={active:!0,az:this.value.az,ta:this.value.ta,adultCost:this.value.adultCost,childCost:this.value.childCost,infantCost:this.value.infantCost,nationalityInclude:this.value.nationalityInclude,nationalityExclude:this.value.nationalityExclude,adultCostMulti:1==this.numberOfFlights?this.value.adultCostMulti:this.value.adultCost,childCostMulti:1==this.numberOfFlights?this.value.childCostMulti:this.value.childCost,infantCostMulti:1==this.numberOfFlights?this.value.infantCostMulti:this.value.infantCost,currency:this.value.currency,level:this.value.level,rule:this.value.rule,commission:this.value.commission,baggage:this.value.baggage,rateClass:this.value.rateClass};this.$emit("input",t)}else this.capacityError=e<t?"  ":"مقدار بیشتر از ظرفیت است"}}},E=F,T=(i("2f19"),i("2877")),w=Object(T["a"])(E,D,I,!1,null,"08f660a4",null);e["a"]=w.exports},c79c:function(t,e,i){},ca71:function(t,e,i){},ce32:function(t,e,i){}}]);