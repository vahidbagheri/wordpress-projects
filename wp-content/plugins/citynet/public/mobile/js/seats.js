(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["seats"],{"438b":function(e,t,s){"use strict";s("be0c")},be0c:function(e,t,s){},fd46:function(e,t,s){"use strict";s.r(t);var a=s("8336"),n=s("b0af"),r=s("ac7c"),i=s("62ad"),c=s("8fea"),o=s("ce7e"),l=s("132d"),u=s("a797"),d=s("490a"),p=s("0fd9"),f=s("71a3"),h=s("fe57"),v=s("9a96"),m=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"container",staticStyle:{"min-height":"100vh"}},[t(u["a"],{staticStyle:{"z-index":"50"},attrs:{value:e.overlay}},[t(d["a"],{attrs:{indeterminate:"",size:"64"}})],1),t(n["a"],{staticClass:"d-flex justify-center align-start container flex-column px-0",staticStyle:{width:"100%","min-height":"120px","border-radius":"5px"},attrs:{flat:""}},[t(h["a"],{staticClass:"justify-self-right tabRules d-flex flex-column flight-declare-tabs"},[t(v["a"],{attrs:{color:"primary"}}),t(f["a"],{staticStyle:{height:"40px",color:"#b7b7b7","letter-spacing":"0px"}},[e._v(" گزارش صندلی های پرواز ")])],1),t(p["a"],{staticClass:"d-flex flex-column mt-10 mx-0",staticStyle:{width:"100%"}},[t(i["a"],{attrs:{cols:"12"}},[t(p["a"],{staticClass:"justify-between"},[t(i["a"],{attrs:{cols:"6"}},[t("span",{staticClass:"px-1 grey--text text--darken-1"},[e._v("مسیر:")]),t("span",[t("span",{staticClass:"px-1"},[e._v(e._s(e.getTicketReportHeaders.Origin))]),t(l["a"],{staticClass:"px-0 pb-1 icon-arrow-right icon-18",attrs:{color:"primary",small:""}}),t("span",{staticClass:"px-1"},[e._v(e._s(e.getTicketReportHeaders.Destination))])],1)]),t(i["a"],{attrs:{cols:"12"}},[t("span",{staticClass:"px-1 grey--text text--darken-1"},[e._v(" تاریخ و ساعت حرکت:")]),t("span",{staticClass:"px-1"},[e._v(e._s(e.getTicketReportHeaders.DepartureDatetime))])]),t(i["a"],{attrs:{cols:"6"}},[t("span",{staticClass:"px-1 grey--text text--darken-1"},[e._v("شماره پرواز:")]),t("span",{staticClass:"px-1"},[e._v(e._s(e.getTicketReportHeaders.flightNo))])]),t(i["a"],{attrs:{cols:"6"}},[t("span",{staticClass:"px-1 grey--text text--darken-1"},[e._v(" ظرفیت:")]),t("span",{staticClass:"px-1"},[e._v(e._s(e.getTicketReportHeaders.Capacity)+" ")])])],1)],1),t(p["a"],{staticClass:"mx-0"},[t(i["a"],{attrs:{cols:"6"}},[t("span",{staticClass:"px-1 grey--text text--darken-1"},[e._v("مانده:")]),t("span",{staticClass:"px-1 d-inline-block"},[e._v(e._s(e.getTicketReportHeaders.Seatremaining))])]),t(i["a"],{attrs:{cols:"6"}},[t("span",{staticClass:"px-1 grey--text text--darken-1"},[e._v("کلاس کابین:")]),t("span",{staticClass:"px-1"},[e._v(e._s(e.getTicketReportHeaders.CabinClass))])]),t(i["a"],{attrs:{cols:"6"}},[t("span",{staticClass:"px-1 grey--text text--darken-1"},[e._v("ایرلاین:")]),t("span",{staticClass:"px-1"},[e._v(e._s(e.getTicketReportHeaders.AirlineName))])]),t(i["a"],{attrs:{cols:"6"}},[t("span",{staticClass:"px-1 grey--text text--darken-1"},[e._v("رزرو:")]),t("span",{staticClass:"px-1"},[e._v(e._s("0"==e.getTicketReportHeaders.Reserve?"خیر":" بله"))])]),t(i["a"],{staticClass:"d-flex px-2 justify-space-between",attrs:{cols:"12"}},[e.hasReserve?t(a["a"],{staticClass:"buttons white--text mx-1 rounded-lg",attrs:{depressed:""},on:{click:e.cancelReserve}},[e._v("کنسل رزروها")]):e._e(),e.hasTicket?t(a["a"],{staticClass:"buttons white--text mx-1 rounded-lg",attrs:{depressed:""},on:{click:e.sumbitNoShow}},[e._v("ثبت no-show")]):e._e(),t(a["a"],{staticClass:"buttons white--text mx-1 rounded-lg",attrs:{disabled:!e.selectedHasTicketed,depressed:"",loading:e.canceling[0]},on:{click:e.cancelSeat}},[e._v("کنسل seat")]),t(a["a"],{staticClass:"buttons white--text mx-1 rounded-lg",attrs:{disabled:!e.selectedHasInfantTicketed,depressed:"",loading:e.canceling[1]},on:{click:e.infantCancelSeat}},[e._v("کنسل seat نوزاد")])],1)],1)],1),t(p["a"],{staticClass:"py-0 justify-center d-flex flex-nowrap mx-0",staticStyle:{width:"100%"}},[t(c["a"],{staticClass:"seatsTable pa-0 col-12",attrs:{items:e.tableItems,headers:e.headers,search:e.searchTable,"show-select":e.hasReserve||e.hasTicket,"item-key":"SeatId","loading-text":e.$t("pleaseWait"),"no-data-text":e.$t("noItemToShow"),"items-per-page":500,"disable-sort":""},scopedSlots:e._u([{key:"item.Gender",fn:function({item:t}){return[e._v(" "+e._s("Male"==t.Gender?"آقا":"خانم")+" ")]}},{key:"header.data-table-select",fn:function(){},proxy:!0},{key:"header.NationalId",fn:function({header:s}){return[t("div",[e._v(e._s(s.text.split("-")[0]))]),t("div",[e._v(e._s(s.text.split("-")[1]))])]}},{key:"item.data-table-select",fn:function({item:e,select:s,isSelected:a}){return[t(r["a"],{staticClass:"mr-2",attrs:{value:a,disabled:"free"==e.Status,ripple:!1},on:{click:function(e){s(!a)}}})]}},{key:"item.SeatNo",fn:function({index:t}){return[e._v(" "+e._s(e._f("simplePersian")(t+1,e.$i18n.locale))+" ")]}},{key:"item.ReservedAccountName",fn:function({item:s}){return[t("div",[e._v(e._s(s.ReservedAccountName))]),t("div",[e._v(e._s(s.ReservedUsername))])]}},{key:"item.AccountName",fn:function({item:s}){return[t("div",[e._v(e._s(s.ReservedAccountName?"":s.AccountName))]),t("div",[e._v(e._s(s.ReservedAccountName?"":s.Username))])]}},{key:"item.LockTime",fn:function({item:s}){return[t("div",[e._v(" "+e._s(s.LockTime)+e._s(s.LockId?"/":"")+e._s(s.LockId)+" ")])]}},{key:"item.ReservedExpiredAt",fn:function({item:s}){return[t("div",[e._v(" "+e._s(s.ReservedExpiredAt?s.ReservedExpiredAt.substring(0,10):"")+" ")]),t("div",[e._v(" "+e._s(s.ReservedExpiredAt?s.ReservedExpiredAt.substring(11,16):"")+" ")])]}},{key:"item.UpdateTime",fn:function({item:s}){return[t("div",[e._v(" "+e._s(s.UpdateTime?s.UpdateTime.substring(0,10):"")+" ")]),t("div",[e._v(" "+e._s(s.UpdateTime?s.UpdateTime.substring(11,16):"")+" ")])]}},{key:"item.GivenName",fn:function({item:s}){return[t("div",[e._v(e._s(s.GivenName))]),t("div",[e._v(e._s(s.SurName))])]}},{key:"item.GivenNameINF",fn:function({item:s}){return[t("div",[e._v(e._s(s.GivenNameINF))]),t("div",[e._v(e._s(s.SurNameINF))])]}},{key:"item.NationalId",fn:function({item:s}){return[t("div",[e._v(e._s(s.NationalId))]),s.PassportNO?t(o["a"],{staticClass:"mb-1"}):e._e(),t("div",[e._v(e._s(s.PassportNO))])]}},{key:"item.PassengerTypeCode",fn:function({item:t}){return[e._v(" "+e._s("ADT"==t.PassengerTypeCode?"CHD"==t.PassengerTypeCode?"کودک":"نوزاد":"بزرگسال")+" ")]}},{key:"item.IsReal",fn:function({item:t}){return[e._v(" "+e._s("0"==t.IsReal?"خیر":"بله")+" ")]}},{key:"item.SendList",fn:function({item:t}){return[e._v(" "+e._s("0"==t.SendList?"خیر":"بله")+" ")]}},{key:"item.Status",fn:function({item:s}){return["reserved"==s.Status?t("span",{staticClass:"warning--text"},[e._v(" رزرو ")]):e._e(),"free"==s.Status?t("span",{staticClass:"success--text"},[e._v(" آزاد ")]):e._e(),"ticketed"==s.Status?t("span",[e._v(" تیکت ")]):e._e(),"noshow"==s.Status?t("span",{staticClass:"error--text"},[e._v(" عدم حضور ")]):e._e()]}}]),model:{value:e.selectedItemsToCancel,callback:function(t){e.selectedItemsToCancel=t},expression:"selectedItemsToCancel"}})],1)],1)],1)},g=[],x=s("60a3"),y=s("2f62"),_=function(){var e=function(t,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])},e(t,s)};return function(t,s){if("function"!==typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function a(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)}}(),b=function(){return b=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++)for(var n in t=arguments[s],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},b.apply(this,arguments)},k=function(e,t,s,a){var n,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,s):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,s,a);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(i=(r<3?n(i):r>3?n(t,s,i):n(t,s))||i);return r>3&&i&&Object.defineProperty(t,s,i),i},T=function(e,t,s,a){function n(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,r){function i(e){try{o(a.next(e))}catch(t){r(t)}}function c(e){try{o(a["throw"](e))}catch(t){r(t)}}function o(e){e.done?s(e.value):n(e.value).then(i,c)}o((a=a.apply(e,t||[])).next())}))},I=function(e,t){var s,a,n,r,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return o([e,t])}}function o(r){if(s)throw new TypeError("Generator is already executing.");while(i)try{if(s=1,a&&(n=2&r[0]?a["return"]:r[0]?a["throw"]||((n=a["return"])&&n.call(a),0):a.next)&&!(n=n.call(a,r[1])).done)return n;switch(a=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,a=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(n=i.trys,!(n=n.length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){i.label=r[1];break}if(6===r[0]&&i.label<n[1]){i.label=n[1],n=r;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(r);break}n[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(c){r=[6,c],a=0}finally{s=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectedItemsToCancel=[],t.headers=[{text:"ش صندلی",value:"SeatNo",align:"center",width:5},{text:"وضعیت",value:"Status",align:"center"},{text:"واقعی",value:"IsReal",align:"center",width:10},{text:"ارسال لیست",value:"SendList",align:"center",width:15},{text:"نام کاربری",value:"AccountName",align:"center"},{text:"مسافر نوزاد",value:"GivenNameINF",align:"center"},{text:"نام مسافر",value:"GivenName",align:"center"},{text:"کد ملی/-ش پاسپورت مسافر",value:"NationalId",align:"center"},{text:"کاربر رزرو کننده",value:"ReservedAccountName",align:"center"},{text:"انقضای رزرو",value:"ReservedExpiredAt",align:"center",width:85},{text:"شرکت سهمیه",value:"QuotaCompanyName",align:"center"},{text:"کاربر سهمیه",value:"QoutaAccountName",align:"center"},{text:"زمان بروزرسانی",value:"UpdateTime",align:"center",width:85},{text:"زمان/شناسه قفل",value:"LockTime",align:"center"},{text:"زمان بوک",value:"QoutaAccountName",align:"center"},{text:"ش مرجع",value:"PNRString",align:"center"},{text:"ش بلیط",value:"TicketNo",align:"center",width:65},{text:"ش بلیط نوزاد",value:"InfantTicketNo",align:"center",width:65}],t.tableItems=[],t.searchTable="",t.overlay=!1,t.canceling=[!1,!1],t}return _(t,e),t.prototype.mounted=function(){this.overlay=!0,this.tableItems=this.getTicketReportItems,this.overlay=!1,this.getSeats()},t.prototype.getSeats=function(){var e=this;this.$store.dispatch("flightStore/setSeatsReportItems",this.getTicketReportHeaders.classId).then((function(){e.tableItems=e.getTicketReportItems})).catch((function(){}))},t.prototype.cancelReserve=function(){return T(this,void 0,void 0,(function(){return I(this,(function(e){switch(e.label){case 0:return this.selectedItemsToCancel.length>0?this.selectedItemsToCancel.some((function(e){return"ticketed"===e.Status}))?(this.$toast.error("سطرهای انتخاب شده باید در وضعیت رزرو باشند"),[3,4]):[3,1]:[3,5];case 1:return e.trys.push([1,3,,4]),[4,this.axios.delete(this.$store.state.baseUrl+"inventory/reserveseat",{data:{ClassId:this.getTicketReportHeaders.classId,Seats:this.selectedItemsToCancel.map((function(e){return{Id:e.SeatId}}))}})];case 2:return e.sent(),this.$toast.success("حذف رزرو با موفقیت انجام شد."),this.selectedItemsToCancel=[],this.getSeats(),[3,4];case 3:return e.sent(),[3,4];case 4:return[3,6];case 5:this.$toast.error("لطفا یکی از سطر ها را انتخاب نمایید"),e.label=6;case 6:return[2]}}))}))},t.prototype.sumbitNoShow=function(){return T(this,void 0,void 0,(function(){return I(this,(function(e){switch(e.label){case 0:return this.selectedItemsToCancel.length>0?(console.log(this.selectedItemsToCancel),this.selectedItemsToCancel.some((function(e){return"reserved"===e.Status}))?(this.$toast.error("سطرهای انتخاب شده باید در وضعیت تیکت باشند"),[3,4]):[3,1]):[3,5];case 1:return e.trys.push([1,3,,4]),[4,this.axios.put(this.$store.state.baseUrl+"inventory/noshowseat",{ClassId:this.getTicketReportHeaders.classId,Seats:this.selectedItemsToCancel.map((function(e){return{Id:e.SeatId}}))})];case 2:return e.sent(),this.$toast.success("ثبت no-show با موفقیت انجام شد."),this.selectedItemsToCancel=[],this.getSeats(),[3,4];case 3:return e.sent(),[3,4];case 4:return[3,6];case 5:this.$toast.error("لطفا یکی از سطرها را انتخاب نمایید"),e.label=6;case 6:return[2]}}))}))},t.prototype.cancelSeat=function(){var e=this;this.selectedItemsToCancel.length>0?(console.log(this.selectedItemsToCancel),this.selectedItemsToCancel.some((function(e){return"reserved"===e.Status||e.InfantTicketNo}))?this.selectedItemsToCancel.every((function(e){return"ticketed"===e.Status}))?this.$toast.error("فقط ردیف‌های بدون شماره بلیط نوزاد را انتخاب کنید."):this.$toast.error("سطرهای انتخاب شده باید در وضعیت تیکت باشند"):(this.$set(this.canceling,0,!0),this.axios.put(this.$store.state.baseUrl+"inventory/cancelseat",{ClassId:this.getTicketReportHeaders.classId,Seats:this.selectedItemsToCancel.map((function(e){return{Id:e.SeatId}}))}).then((function(){e.selectedItemsToCancel=[],e.getSeats(),e.$set(e.canceling,0,!1),e.$toast.success("کنسلی با موفقیت انجام شد.")})).catch((function(t){e.$set(e.canceling,0,!1)})))):this.$toast.error("لطفا یکی از سطرها را انتخاب نمایید")},t.prototype.infantCancelSeat=function(){var e=this;this.selectedItemsToCancel.length>0?(console.log(this.selectedItemsToCancel),this.selectedItemsToCancel.some((function(e){return"reserved"===e.Status||!e.InfantTicketNo}))?this.selectedItemsToCancel.every((function(e){return"ticketed"===e.Status}))?this.$toast.error("فقط ردیف‌های با شماره بلیط نوزاد را انتخاب کنید."):this.$toast.error("سطرهای انتخاب شده باید در وضعیت تیکت باشند"):(this.$set(this.canceling,1,!0),this.axios.put(this.$store.state.baseUrl+"inventory/cancelinfantseat",{ClassId:this.getTicketReportHeaders.classId,Seats:this.selectedItemsToCancel.map((function(e){return{Id:e.SeatId}}))}).then((function(){e.selectedItemsToCancel=[],e.getSeats(),e.$set(e.canceling,1,!1),e.$toast.success("کنسلی با موفقیت انجام شد.")})).catch((function(t){e.$set(e.canceling,1,!1)})))):this.$toast.error("لطفا یکی از سطرها را انتخاب نمایید")},Object.defineProperty(t.prototype,"selectedHasTicketed",{get:function(){return console.log(this.selectedItemsToCancel),!(!this.selectedItemsToCancel.length||!this.selectedItemsToCancel.every((function(e){return"ticketed"===e.Status&&!e.InfantTicketNo})))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedHasInfantTicketed",{get:function(){return!(!this.selectedItemsToCancel.length||!this.selectedItemsToCancel.every((function(e){return"ticketed"===e.Status&&e.InfantTicketNo})))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasReserve",{get:function(){return!!this.getTicketReportItems&&this.getTicketReportItems.some((function(e){return"reserved"==e.Status}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTicket",{get:function(){return!!this.getTicketReportItems&&this.getTicketReportItems.some((function(e){return"ticketed"==e.Status}))},enumerable:!1,configurable:!0}),t=k([Object(x["a"])({computed:b({},Object(y["b"])({getTicketReportItems:"flightStore/getSeatsReportItems",getTicketReportHeaders:"flightStore/getTicketReportHeaders"}))})],t),t}(x["d"]),S=C,w=S,R=(s("438b"),s("2877")),N=Object(R["a"])(w,m,g,!1,null,null,null);t["default"]=N.exports}}]);