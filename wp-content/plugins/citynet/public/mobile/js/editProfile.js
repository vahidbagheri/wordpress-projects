(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["editProfile"],{"05a0":function(t,e,s){"use strict";s("8431")},"146b":function(t,e,s){"use strict";s("21c0")},"19d1":function(t,e,s){},"1b45":function(t,e,s){},"1c6a":function(t,e,s){"use strict";s("5e15")},"21c0":function(t,e,s){},2966:function(t,e,s){"use strict";s("d2db")},"2c06":function(t,e,s){},"2c6e":function(t,e,s){"use strict";s("2c06")},"36a0":function(t,e,s){"use strict";s("1b45")},4529:function(t,e,s){},5263:function(t,e,s){},"53b5":function(t,e,s){"use strict";s("bdf1")},5632:function(t,e,s){"use strict";s("5263")},"5e15":function(t,e,s){},8431:function(t,e,s){},"8d3c":function(t,e,s){"use strict";s("4529")},"8d6c":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"contractStatus px-2",class:[t.status.map(t=>t)]},[e("div",{staticClass:"d-flex align-center"},t._l(t.status,(function(s,a){return e("i",{key:s+a,staticClass:"icon-circle-bold",style:t.$vuetify.rtl?{"padding-left":"1px"}:{"padding-right":"1px","font-size":"9px"}})})),0),1==t.status.length?e("span",{staticClass:"statusText",style:t.$vuetify.rtl?{"padding-top":"0"}:{"padding-top":"1px"}},[t.forSupport?[t._v(" "+t._s(t._f("ticketStatus")(t.status[0],t.$i18n.locale))+" ")]:[t._v(" "+t._s(t.$t(t.status[0]))+" ")]],2):e("span",{staticClass:"statusText"},[t._v(t._s(t.$t(t.status[0])))])])},i=[],n=s("60a3"),r=function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},t(e,s)};return function(e,s){if("function"!==typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function a(){this.constructor=e}t(e,s),e.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)}}(),c=function(t,e,s,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,s):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,s,a);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(n<3?i(r):n>3?i(e,s,r):i(e,s))||r);return n>3&&r&&Object.defineProperty(e,s,r),r},o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),c([Object(n["c"])()],e.prototype,"status",void 0),c([Object(n["c"])()],e.prototype,"forSupport",void 0),e=c([Object(n["a"])({})],e),e}(n["d"]),l=o,p=l,d=(s("05a0"),s("2877")),u=Object(d["a"])(p,a,i,!1,null,"a27d1bea",null);e["a"]=u.exports},9825:function(t,e,s){"use strict";s.r(e);var a=s("8336"),i=s("b0af"),n=s("99d9"),r=s("62ad"),c=s("8860"),o=s("56b0"),l=s("da13"),p=s("5d23"),d=s("0fd9"),u=s("b974"),m=s("71a3"),_=s("fe57"),f=s("8654"),h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container editprofile",staticStyle:{"min-height":"100vh"}},[e(d["a"],[t.isAdmin?t._e():e(r["a"],{staticClass:"pl-1 d-md-block d-none",attrs:{cols:"12",md:"3"}},[e(i["a"],{staticClass:"profileCard",attrs:{flat:""}},[e(n["c"],{staticClass:"pb-0 account"},[e("div",{staticClass:"text-center",staticStyle:{background:"#f2f2f5",padding:"10px","border-radius":"10px"}},[e("i",{staticClass:"icon-profile",staticStyle:{"font-size":"40px"}}),e("div",{staticClass:"d-block mt-2"},[t._v(t._s(t.name)+" "+t._s(t.lastname))]),e("div",{staticClass:"d-block my-1"},[t._v(" "+t._s(t._f("simplePersian")("0"+t.mobile,t.$i18n.locale))+" ")])]),e(c["a"],[e("div",{staticClass:"px-2 mt-2"},[t.user.ledger?e(p["c"],{staticClass:"pr-4 py-3",staticStyle:{background:"#f2f2f5",color:"var(--v-buttons-base)","border-radius":"5px",display:"flex","justify-content":"space-between"}},[e("span",[t._v(t._s(t.$t("credit"))+":")]),e("span",{staticClass:"pl-2"},[t._v(t._s(t._f("simplePersian")(t._f("price")(t.user.ledger),t.$i18n.locale))+" "+t._s(t.$t("Rials")))])]):t._e()],1),e("div",{staticClass:"px-2 mt-1 mb-2"},[t.user.wallet?e(p["c"],{staticClass:"pr-4 py-2",staticStyle:{background:"#f2f2f5",color:"var(--v-buttons-base)","border-radius":"5px",display:"flex","justify-content":"space-between"}},[e("span",[t._v(t._s(t.$t("wallet"))+":")]),e("span",{staticClass:"pl-2"},[t._v(t._s(t._f("simplePersian")(t._f("price")(t.user.wallet),t.$i18n.locale))+" "+t._s(t.$t("Rials")))])]):t._e()],1),e(c["a"],{staticClass:"panelHeader__button--account",staticStyle:{"max-height":"290px","overflow-y":"auto !important"}},[e(l["a"],{on:{click:function(e){t.show="editProfile"}}},[e(p["a"],[e(p["c"],{class:["editProfile"==t.show?"primary--text":""],staticStyle:{cursor:"pointer"}},[e("i",{staticClass:"icon-profile icon-18"}),t._v(t._s(t.$t("editProfile"))+" ")])],1)],1),e(l["a"],{on:{click:function(e){t.show="supportCenter"}}},[e(p["a"],[e(p["c"],{class:["supportCenter"==t.show?"primary--text":""],staticStyle:{cursor:"pointer"}},[e("i",{staticClass:"icon-notification icon-20"}),t._v(" "+t._s(t.$t("supportRequest")))])],1)],1),t.hideChargeCreditMenu?t._e():e(l["a"],{attrs:{href:"/editProfile/?type=walletCharge"},on:{click:function(e){t.show="walletCharge"}}},[e(p["a"],[e(p["c"],{class:["walletCharge"==t.show?"primary--text":""],staticStyle:{cursor:"pointer"}},[e("i",{staticClass:"icon-wallet icon-18"}),t._v(t._s(t.$t("walletRecharge")))])],1)],1),"admin"!=t.user.roleType?e(l["a"],{attrs:{link:"",href:"/contracts"}},[e(p["a"],[e(p["c"],{staticStyle:{cursor:"pointer"}},[e("i",{staticClass:"icon-chat icon-18"}),t._v(t._s(t.$t("trackOrder")))])],1)],1):t._e(),t._l(t.menus,(function(s){return e(o["a"],{key:s.Id,staticClass:"profileInnerCard",attrs:{"append-icon":s.SubMenu.length>0?"icon-chevron-down icon-18":"","no-action":"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(){return[e(p["c"],["اطلاعات پایه"==s.Name?e("i",{staticClass:"icon-list icon-18"}):t._e(),"تعریف پرواز"==s.Name?e("i",{staticClass:"icon-add-flight icon-18"}):t._e()," قرارداد"==s.Name||"گزارش"==s.Name?e("i",{staticClass:"icon-document-text icon-18"}):t._e(),t._v(t._s(s.Name))])]},proxy:!0}],null,!0)},t._l(s.SubMenu,(function(a){return e(l["a"],{key:a.Id,attrs:{link:"",href:"تعریف پرواز"==s.Name?"/dashboard/"+a.Url:"/"+a.Url.toLowerCase()}},[e(p["a"],[e(p["c"],{domProps:{textContent:t._s(a.Name)}})],1)],1)})),1)}))],2),e(l["a"],{staticClass:"px-0 panelHeader__list--exit"},[t.user?e(a["a"],{staticClass:"panelHeader__button--exit px-4 d-flex align-center",staticStyle:{background:"transparent",width:"100%",color:"#fd3e5b",cursor:"pointer"},attrs:{depressed:""},on:{click:t.logout}},[e("i",{staticClass:"icon-logout icon-16 pl-2",style:[t.$vuetify.rtl?{transform:"0"}:{transform:"rotateY(-180deg)"}],attrs:{small:"",color:"#FD3E5B"}}),t._v(" "+t._s(t.$t("logout"))+" ")]):t._e()],1)],1)],1)],1)],1),"editProfile"==t.show?e(r["a"],{attrs:{cols:"12",md:t.isAdmin?"12":"9"}},[e(i["a"],{staticClass:"profileCard",attrs:{flat:""}},[e(n["c"],{staticClass:"pb-0"},[e(d["a"],{staticClass:"flex-wrap"},[e(r["a"],{staticClass:"pl-0 pt-0 mb-3",staticStyle:{"max-width":"fit-content"}},[e("span",{staticClass:"cardHeader userProfile font-weight-600 font-size-20",class:t.$vuetify.rtl?"mr-4":"ml-4"},[t._v(t._s(t.$t("userProfile")))])])],1),e(d["a"],{staticClass:"px-2"},[e(r["a"],{staticClass:"py-0 editprofile__name",attrs:{cols:"12",md:"3"}},[e(f["a"],{staticClass:"moreRadius input",attrs:{outlined:"",clearable:"",label:t.$t("name")},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),e(r["a"],{staticClass:"py-0 editprofile__lastname",attrs:{cols:"12",md:"3"}},[e(f["a"],{staticClass:"moreRadius input",attrs:{outlined:"",clearable:"",autocomplete:"off",label:t.$t("lastName")},model:{value:t.lastname,callback:function(e){t.lastname=e},expression:"lastname"}})],1),e(r["a"],{staticClass:"py-0 editprofile__bankCardNumber",attrs:{cols:"12",md:"3"}},[e("NumberField",{attrs:{errors:t.bankCardError,label:t.$t("cardNumber")},on:{input:t.fourDigitSpace},model:{value:t.bankCardNumber,callback:function(e){t.bankCardNumber=e},expression:"bankCardNumber"}})],1),e(r["a"],{staticClass:"py-0 editprofile__shebaNumber",attrs:{cols:"12",md:"3"}},[e("NumberField",{attrs:{errors:t.shebaNumberError,label:t.$t("shebaNumber")},model:{value:t.shebaNumber,callback:function(e){t.shebaNumber=e},expression:"shebaNumber"}})],1)],1),e(d["a"],{staticClass:"px-2 justify-end"},[e(r["a"],{attrs:{cols:"12",md:"2"}},[e(a["a"],{staticClass:"mask body-1",staticStyle:{"--smooth-corners":"28, 3"},attrs:{depressed:"",dark:"",height:"53",color:"buttons",block:""},on:{click:t.editProfile}},[t._v(" "+t._s(t.$t("submitChanges")))])],1)],1)],1),e(n["a"],{staticClass:"justify-end pt-0"})],1)],1):"supportCenter"==t.show?e(r["a"],{staticClass:"supportCenter",attrs:{cols:"12",md:t.isAdmin?"12":"9"}},[e(i["a"],{staticClass:"w-100 moreRadius button px-0 pt-4",attrs:{flat:""}},[e("div",{staticClass:"d-flex justify-space-between",class:t.$vuetify.breakpoint.mobile?"flex-column":""},[e(n["d"],{staticClass:"d-flex flex-column align-start px-4",class:t.$vuetify.breakpoint.mobile?"pt-0 pb-4":" py-0"},[t._v(" "+t._s(t.$t("support"))+" ")]),e("div",{staticClass:"d-flex align-center px-4",class:t.$vuetify.breakpoint.mobile?"pb-4":""},[e(f["a"],{staticClass:"moreRadius input",staticStyle:{width:"250px"},attrs:{maxLength:"10","hide-details":"auto",dense:"",label:t.$t("contractNo"),outlined:""},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getTickets.apply(null,arguments)}},model:{value:t.contractNo,callback:function(e){t.contractNo=e},expression:"contractNo"}}),e(a["a"],{staticClass:"lightButtons moreRadius button",class:t.$vuetify.rtl?"mr-2":"ml-2",attrs:{width:"120",height:"40",depressed:""},on:{click:t.getTickets}},[t._v(t._s(t.$t("search")))])],1)],1),e(_["a"],{staticClass:"moreRadius button",staticStyle:{overflow:"hidden"},attrs:{color:"buttons",height:"50px !important"}},t._l(t.tabs,(function(s,a){return e(m["a"],{key:a,on:{change:function(e){return t.filterTickets(s)}}},[t._v(t._s(t._f("ticketStatus")(s.value,t.$i18n.locale))+" ("+t._s(t.filteredTicketCounts[s.value])+")")])})),1)],1),t.isAdmin&&t.filteredTickets.length?e("admin-support",{ref:"adminSupport",staticClass:"editprofile--admin-support",attrs:{isAdmin:!0,recordCount:t.recordCount,filteredTickets:t.filteredTickets},on:{page:function(e){return t.pageChanged(e)},reload:t.getTickets}}):t._e(),!t.isAdmin&&t.filteredTickets.length?e("user-support",{attrs:{recordCount:t.recordCount,filteredTickets:t.filteredTickets},on:{page:function(e){return t.pageChanged(e)}}}):t._e()],1):"walletCharge"==t.show?e(r["a"],{attrs:{cols:"12",md:t.isAdmin?"12":"9"}},[t.userNotFound?e("UserNotFoundAlert"):e(i["a"],{staticClass:"profileCard",staticStyle:{"min-height":"380px"},attrs:{flat:""}},[e(n["c"],{staticClass:"pb-0"},[e(n["d"],{staticClass:"cardHeader py-2"},[t._v(t._s(t.isAnotherUser?t.$t("walletRechargeUser",[[t.selectedUser.Name,t.selectedUser.Family].join(" ")]):t.$t("walletRecharge")))]),e(d["a"],{staticClass:"px-2 mt-4s"},t._l(t.user.budgets,(function(s,a){return e(r["a"],{directives:[{name:"show",rawName:"v-show",value:s.Wallet,expression:"budget.Wallet"}],key:a,attrs:{cols:"12",md:"4"}},["addCredit"!==s.type?[e("div",{staticClass:"align-center pa-5 theme-element-bg-light moreRadius button"},[(t.$i18n.locale,e("div",{staticClass:"mt-1",staticStyle:{"font-wight":"500"}},[t._v(" "+t._s(t.$t("walletBalance"))+" "+t._s(t._f("currency")(s.Currency,t.$i18n.locale))+" ")])),e("div",{staticClass:"buttons--text body-1 mt-4"},[e("b",[t._v(t._s(t._f("simplePersian")(t._f("price")(s.Wallet),t.$i18n.locale)))]),t._v(" "+t._s(t._f("currency")(s.Currency,t.$i18n.locale))+" ")])])]:t._e()],2)})),1),e(d["a"],{staticClass:"px-6"},[e(r["a"],{staticClass:"d-flex flex-column px-0",attrs:{cols:"12"}},[e("span",{staticClass:"mt-2 font-size-14 darkGrey--text font-weight-500"},[t._v(" "+t._s(t.$t("increaseWalletCharge")))]),e("span",{staticClass:"mt-2 font-size-12 grey--text"},[t._v(" "+t._s(t.$t("createOrIncreaseWallet"))+" ")])])],1),e(d["a"],{staticClass:"px-3"},[e(r["a"],{attrs:{cols:"12",md:"2"}},[e(u["a"],{staticClass:"moreRadius input",attrs:{items:t.currencies,"menu-props":{"offset-y":!0,closeOnClick:!0,contentClass:"custom-scroll moreRadius button menu-shadow"},"return-object":"","item-text":"Abbr","item-value":"Abbr","append-icon":"icon-chevron-down icon-18",label:t.$t("currency"),"hide-details":"",outlined:""},scopedSlots:t._u([{key:"item",fn:function({item:s}){return[e("div",{staticClass:"px-2 font-size-12"},[t._v(" "+t._s(t._f("currency")(s.Abbr,t.$i18n.locale))+" ")])]}},{key:"selection",fn:function({item:s}){return[e("div",{staticClass:"px-2 font-size-12"},[t._v(" "+t._s(t._f("currency")(s.Abbr,t.$i18n.locale))+" ")])]}}]),model:{value:t.selectedCurrency,callback:function(e){t.selectedCurrency=e},expression:"selectedCurrency"}})],1),e(r["a"],{attrs:{cols:"12",md:"4"}},[e("number-field",{attrs:{label:t.$t("Amount"),dir:t.$vuetify.rtl?"rtl":"ltr",errors:t.walletAmountError,noDot:!0,hasPriceFormat:!0},on:{"keyup-event":t.handleBankErrors},model:{value:t.walletAmount,callback:function(e){t.walletAmount=e},expression:"walletAmount"}})],1),e(r["a"],{attrs:{cols:"12",md:"4"}},[e("bank-select",{ref:"bankSelect",attrs:{currency:t.selectedCurrency,type:"wallet",label:t.$t("PaymentGateway"),errors:t.bankError,amount:t.walletAmount,accId:t.accId},on:{"bank-loading":t.changeBankLoading,"bank-changed":t.handleBankErrors},model:{value:t.bank,callback:function(e){t.bank=e},expression:"bank"}})],1),e(r["a"],{attrs:{cols:"12",md:"2"}},[e(a["a"],{staticClass:"mask",staticStyle:{"--smooth-corners":"12, 3"},attrs:{color:"buttons white--text",block:"",height:"56",depressed:"","x-large":"",loading:t.bankLoading},on:{click:t.goToBank}},[t._v(" "+t._s(t.$t("pay"))+" ")])],1)],1)],1)],1)],1):t._e()],1)],1)},v=[],y=s("2f62"),b=s("403a"),C=s("c514"),x=s("b5ae"),g=s("3ef0"),$=s("132d"),k=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{style:{position:"relative",width:"700px",margin:"auto"}},[e("img",{staticClass:"w-100",attrs:{src:t.otherImageUrl("alertBg.svg")}}),e("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},[e("div",{staticClass:"white rounded-circle d-flex justify-center align-center",style:{width:"3.5rem",height:"3.5rem",margin:"0 auto .5rem"}},[e("div",{staticClass:"red accent-3 rounded-circle",style:{width:"3rem",height:"3rem"}},[e($["a"],{staticClass:"icon-remove w-100 h-100",attrs:{color:"white",large:""}})],1)]),e("div",{staticClass:"red--text text--accent-3 rounded-circle",style:{"font-size":"1.3rem","font-weight":"700"}},[t._v(" "+t._s(t.$t("noAccountFound"))+" ")])])])},P=[],I=s("c592"),S=s("60a3"),w=function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},t(e,s)};return function(e,s){if("function"!==typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function a(){this.constructor=e}t(e,s),e.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)}}(),N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(Object(S["b"])(I["a"])),A=N,R=A,z=s("2877"),D=Object(z["a"])(R,k,P,!1,null,null,null),T=D.exports,j=s("fc78"),E=s.n(j),O=function(){var t=this,e=t._self._c;return e(d["a"],{staticClass:"mx-0"},t._l(t.filteredTickets,(function(t){return e("service-request",{key:t.id,attrs:{ticket:t}})})),1)},U=[],F=s("cc20"),q=s("169a"),B=s("ce7e"),L=s("cd55"),G=s("49e2"),H=s("c865"),M=s("0393"),W=function(){var t=this,e=t._self._c;return e(i["a"],{staticClass:"mt-7 service-request",staticStyle:{width:"100%","border-radius":"8px"},attrs:{flat:""}},[e(q["a"],{attrs:{"content-class":"edit-passenger-ticket__dialog",width:"80%","max-width":"80%"},model:{value:t.openReply,callback:function(e){t.openReply=e},expression:"openReply"}},[e(t.dialogComponent,{tag:"component",attrs:{ticket:t.ticket},on:{closeDialog:function(e){t.openReply=!1}}})],1),e(n["c"],{staticClass:"pb-0"},[e(d["a"],{attrs:{justify:"space-between"}},[e(r["a"],{staticClass:"px-0 d-flex justify-center",staticStyle:{"max-width":"4%"}},["enable"==t.ticket.Status?e($["a"],{staticClass:"icon-circle-bold icon-18",attrs:{size:"10",color:"primary"}}):t._e()],1),e(r["a"],{staticClass:"service-request-header pr-0",staticStyle:{"max-width":"78%"}},[e("div",{staticClass:"service-request-header--title"},[t._v(" "+t._s(t._f("ticketTitle")(t.ticket.Type))),e("span",{staticClass:"service-request-header--title-contractno"},[t._v(" ("+t._s(t.$t("contractNo"))+" : "+t._s(t.ticket.Content.ContractNo)+" )")])]),e("div",[e("span",{staticClass:"ml-1 align-center"},[e($["a"],{staticClass:"icon-time-circle",attrs:{"x-small":""}})],1),e("span",{staticClass:"mt-0"},[t._v(t._s(t._f("persianWeekDay")(t.ticket.CreatedAt))+" "+t._s(t._f("persianDateTime")(t.ticket.CreatedAt)))])])]),e(r["a"],{staticClass:"text-end",attrs:{cols:"12",md:"2"}},[e("div",[e(F["a"],{staticClass:"py-2 px-1",staticStyle:{"border-radius":"6px","font-size":"10px"},style:{"background-color":t.$options.filters.ticketStatusColor(t.ticket.Status)+"40",color:t.$options.filters.ticketStatusColor(t.ticket.Status)},attrs:{small:"",label:""}},[t._v(t._s(t._f("ticketStatus")(t.ticket.Status,t.$i18n.locale)))])],1)])],1),e(d["a"],{staticClass:"service-request-expand",attrs:{justify:"end"}},[e(M["a"],[e(L["a"],{on:{click:t.expansionOpened}},[e(H["a"],[e("span",{staticStyle:{"max-width":"fit-content","margin-right":"auto"}},[t._v(t._s(t.$t("view")))])]),e(G["a"],[e(B["a"],{staticStyle:{"border-color":"#f2f2f5"}}),e(d["a"],{staticClass:"mt-3"},["fulfilled"==t.ticket.Status&&"onlineCancel"==t.ticket.Type?e("ticketMessage",{attrs:{replies:t.onlineCancelReplies}}):e("ticketMessage",{attrs:{replies:t.replies}})],1),e(t.component,{tag:"component",attrs:{contract:t.contract,ticket:t.ticket},on:{openReplyEvent:function(e){t.openReply=!0,t.dialogComponent=e}}})],1)],1)],1)],1)],1)],1)},V=[],J=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex flex-column align-center edit-passenger-ticket"},[e(d["a"],{staticStyle:{width:"100%"}},[e(r["a"],{staticClass:"px-1",style:t.$vuetify.breakpoint.mobile?{}:{maxWidth:"32%"}},[e("div",{staticClass:"d-flex flex-column"},[e("span",{staticClass:"edit-passenger-ticket__header"},[t._v(t._s(t.$t("passengerName")))]),e("div",{staticClass:"d-flex"},["fulfilled"!==t.ticket.Status&&t.passenger?e("span",{staticClass:"mr-2 px-1 mb-1 caption",staticStyle:{color:"var(--v-primary-base)","background-color":"#f2f2f5","border-radius":"5px"}},[t._v(t._s(t.$t("old")))]):t._e(),"fulfilled"!==t.ticket.Status&&t.passenger?e("span",[t._v(t._s(t.passenger.GivenName)+" "+t._s(t.passenger.SurName))]):t._e()]),e("div",{staticClass:"d-flex"},[e("span",{staticClass:"mr-2 px-1 mb-1 caption",staticStyle:{color:"var(--v-buttons-base)","background-color":"#f2f2f5","border-radius":"5px"}},[t._v(t._s(t.$t("new")))]),e("span",[t._v(t._s(t.newPassenger.GivenName||"--")+" "+t._s(t.newPassenger.SurName||"--"))])])])]),e(r["a"],{staticClass:"px-1",style:t.$vuetify.breakpoint.mobile?{}:{maxWidth:"13%"},attrs:{cols:t.$vuetify.breakpoint.mobile?6:2}},[e("div",{staticClass:"d-flex flex-column"},[e("span",{staticClass:"edit-passenger-ticket__header"},[t._v(t._s(t.$t("nationalId")))]),"fulfilled"!==t.ticket.Status&&t.passenger?e("span",[t._v(t._s(t.passenger.NationalId))]):t._e(),e("span",[t._v(t._s(t.newPassenger.NationalId||"--"))])])]),e(r["a"],{staticClass:"px-1",style:t.$vuetify.breakpoint.mobile?{}:{maxWidth:"13%"},attrs:{cols:t.$vuetify.breakpoint.mobile?6:2}},[e("div",{staticClass:"d-flex flex-column"},[e("span",{staticClass:"edit-passenger-ticket__header"},[t._v(t._s(t.$t("gender")))]),"fulfilled"!==t.ticket.Status&&t.passenger?e("span",[t._v(t._s(t.passenger.Gender))]):t._e(),e("span",[t._v(t._s(t.newPassenger.Gender||"--"))])])]),e(r["a"],{staticClass:"px-1",style:t.$vuetify.breakpoint.mobile?{}:{maxWidth:"13%"},attrs:{cols:t.$vuetify.breakpoint.mobile?6:2}},[e("div",{staticClass:"d-flex flex-column"},[e("span",{staticClass:"edit-passenger-ticket__header"},[t._v(t._s(t.$t("birthDate")))]),"fulfilled"!==t.ticket.Status&&t.passenger?e("span",[t._v(t._s(t._f("englishDateTime")(t.passenger.BirthDate)))]):t._e(),e("span",[t._v(t._s(t._f("englishDateTime")(t.newPassenger.BirthDate||"--")))])])]),e(r["a"],{staticClass:"px-1",style:t.$vuetify.breakpoint.mobile?{}:{maxWidth:"13%"},attrs:{cols:t.$vuetify.breakpoint.mobile?6:2}},[e("div",{staticClass:"d-flex flex-column"},[e("span",{staticClass:"edit-passenger-ticket__header"},[t._v(t._s(t.$t("persianBirthDate")))]),"fulfilled"!==t.ticket.Status&&t.passenger?e("span",[t._v(t._s(t._f("persianDateTime")(t.passenger.BirthDate)))]):t._e(),e("span",[t._v(t._s(t._f("persianDateTime")(t.newPassenger.BirthDate||"--")))])])]),e(r["a"],{staticClass:"px-1",style:t.$vuetify.breakpoint.mobile?{}:{maxWidth:"18%"},attrs:{cols:t.$vuetify.breakpoint.mobile?6:3}},[e("div",{staticClass:"d-flex flex-column"},[e("span",{staticClass:"edit-passenger-ticket__header"},[t._v(t._s(t.$t("passportCountryInTicket")))]),"fulfilled"!==t.ticket.Status&&t.passenger?e("span",[t._v(t._s(t.passenger.Nationality))]):t._e(),e("span",[t._v(t._s(t.newPassenger.Nationality||"--"))])])]),e(r["a"],{staticClass:"px-1",style:t.$vuetify.breakpoint.mobile?{}:{maxWidth:"13%"},attrs:{cols:t.$vuetify.breakpoint.mobile?6:2}},[e("div",{staticClass:"d-flex flex-column"},[e("span",{staticClass:"edit-passenger-ticket__header"},[t._v(t._s(t.$t("passportNumber")))]),"fulfilled"!==t.ticket.Status&&t.passenger?e("span",[t._v(t._s(t.passenger.PassportNO))]):t._e(),e("span",[t._v(t._s(t.newPassenger.PassportNO||"--"))])])]),e(r["a"],{staticClass:"px-1",style:t.$vuetify.breakpoint.mobile?{}:{maxWidth:"12%"},attrs:{cols:t.$vuetify.breakpoint.mobile?6:2}},[e("div",{staticClass:"d-flex flex-column"},[e("span",{staticClass:"edit-passenger-ticket__header"},[t._v(t._s(t.$t("passportExpire")))]),"fulfilled"!==t.ticket.Status&&t.passenger?e("span",[t._v(t._s(t.passenger.PassportExpireDate))]):t._e(),e("span",[t._v(t._s(t.newPassenger.PassportExpireDate||"--"))])])])],1),e(d["a"],{staticClass:"d-flex justify-space-between",staticStyle:{width:"100%"}},[e(r["a"],{staticClass:"d-flex px-0",attrs:{cols:4}},[e(a["a"],{attrs:{text:""},on:{click:function(e){return t.$emit("openReplyEvent","replyMessage")}}},[e($["a"],{staticClass:"icon-chat icon-16",staticStyle:{transform:"rotateY(180deg)"},attrs:{small:""}}),e("span",{staticClass:"caption mr-2"},[t._v(t._s(t.$t("postReply")))])],1)],1),e(r["a"],{staticClass:"d-flex justify-end",attrs:{cols:t.$vuetify.breakpoint.mobile?8:4}},[e(a["a"],{staticClass:"col-6 ticket--btn-close",attrs:{color:"lightButtons",depressed:"",disabled:"disable"==t.ticket.Status},on:{click:t.closeTicket}},[t._v(" "+t._s(t.$t("closeRequest"))+" ")]),t.isAdmin?e(a["a"],{staticClass:"col-6 ticket--btn-confirm",attrs:{disabled:"fulfilled"==t.ticket.Status||"disable"==t.ticket.Status,color:"buttons",depressed:"",dark:""},on:{click:function(e){return t.$emit("openReplyEvent","EditPassengerPenalty")}}},[t._v(" "+t._s(t.$t("confirmCorrection"))+" ")]):t._e()],1)],1)],1)},X=[],Y={data:()=>({passenger:"",passengerHeader:[],newPassenger:[]}),props:["contract","ticket","isAdmin"],created(){this.newPassenger=Object.assign({},this.newPassenger,this.ticket.Content.Passengers)},mounted(){this.initialize(),this.passenger=this.contract.Invoices[0].Services.filter(t=>"enabled"==t.Status)[0].Passengers.filter(t=>t.PassengerId==this.newPassenger.PassengerId)[0]},methods:{initialize(){this.passengerHeader=[{text:this.$t("title"),value:"title"},{text:this.$t("old"),value:"old"},{text:this.$t("new"),value:"new"}]},async closeTicket(){let t=await this.axios.put(this.$store.state.baseUrl+"ticketing/changeStatus",{Id:this.ticket.Id,Status:"disable"});t.data.Success?(this.$emit("reload"),this.$toast.success(this.$t("requestCloseSuccess"))):this.$toast.error(this.$t("requestCloseFailed"))}},watch:{"$i18n.locale":function(){this.initialize()}}},Q=Y,K=(s("36a0"),Object(z["a"])(Q,J,X,!1,null,null,null)),Z=K.exports,tt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex flex-column align-center online-cancel-ticket",staticStyle:{width:"100%"}},[e(d["a"],{staticStyle:{width:"100%"}},t._l(t.passengers,(function(s,a){return e("div",{key:a,staticClass:"col-12 online-cancel-ticket__info"},[s?e("passengerInfo",{attrs:{passenger:s,currency:t.contract.Currency}}):t._e(),e(d["a"],{staticClass:"online-cancel-ticket__price"},[e(r["a"],{staticClass:"px-1",staticStyle:{"max-width":"25%"}},[e("div",{staticClass:"d-flex flex-column"},[e("span",{staticClass:"online-cancel-ticket__price-header caption"},[t._v(t._s(t.$t("referenceId")))]),e("span",{staticClass:"online-cancel-ticket__price-val"},[t._v(t._s(s.ReferenceId||"--"))])])]),e(r["a"],{staticClass:"px-1",staticStyle:{"max-width":"30%"}},[e("div",{staticClass:"d-flex flex-column"},[e("span",{staticClass:"online-cancel-ticket__price-header caption"},[t._v(t._s(t.$t("totalAmount")))]),e("span",{staticClass:"online-cancel-ticket__price-val"},[t._v(t._s(s.Prices.baseFare+s.Prices.commission||"--")+" "+t._s(t._f("currency")(t.currency)))])])]),e(r["a"],{staticClass:"px-1",staticStyle:{"max-width":"30%"}},[e("div",{staticClass:"d-flex flex-column"},[e("span",{staticClass:"online-cancel-ticket__price-header caption"},[t._v(t._s(t.$t("penaltyPrice")))]),e("span",{staticClass:"online-cancel-ticket__price-val",staticStyle:{color:"red"}},[t._v(t._s(s.Prices.penalty-s.Prices.penaltyDiscount||"--")+" "+t._s(t._f("currency")(t.currency)))])])]),e(r["a"],{staticClass:"px-1",staticStyle:{"max-width":"30%"},attrs:{cols:"2"}},[e("div",{staticClass:"d-flex flex-column"},[e("span",{staticClass:"online-cancel-ticket__price-header caption"},[t._v(t._s(t.$t("amountReturned")))]),e("span",{staticClass:"online-cancel-ticket__price-val",staticStyle:{color:"green"}},[t._v(t._s(s.Prices.baseFare-(s.Prices.penalty-s.Prices.penaltyDiscount)||"--")+" "+t._s(t._f("currency")(t.currency)))])])])],1)],1)})),0)],1)},et=[],st=function(){var t=this,e=t._self._c;return e("div",{staticClass:"dashBorder body-2 px-3"},[e("span",{staticClass:"passengerType px-2"},[t._v(t._s(t._f("human")(t.passenger.PassengerTypeCode))+" "+t._s(t._f("toString")(t.index,t.$i18n.locale)))]),e(d["a"],[e(r["a"],{attrs:{cols:t.$vuetify.breakpoint.mobile?"6":"4"}},[e("div",{staticClass:"caption",staticStyle:{color:"#656565b0"}},[t._v(" "+t._s(t.$t("englishFullName"))+" ")]),e("div",{staticClass:"pt-1"},[t._v(" "+t._s(t.passenger.GivenName)+" "+t._s(t.passenger.SurName)+" ")])]),e(r["a"],{attrs:{cols:t.$vuetify.breakpoint.mobile?"6":""}},[e("div",{staticClass:"caption",staticStyle:{color:"#656565b0"}},[t._v(t._s(t.$t("gender")))]),e("div",{staticClass:"pt-1"},[t._v(" "+t._s(t._f("gender")(t.passenger.NamePrefix))+" ")])]),e(r["a"],{attrs:{cols:t.$vuetify.breakpoint.mobile?"6":""}},[e("div",{staticClass:"caption",staticStyle:{color:"#656565b0"}},[t._v(" "+t._s(t.$t("nationalId"))+" ")]),"IR"!=t.passenger.Nationality?e("div",{staticClass:"pt-1"},[t._v("--")]):e("div",{staticClass:"pt-1"},[t._v(" "+t._s(t._f("simplePersian")(t.passenger.NationalId,t.$i18n.locale))+" ")])]),e(r["a"],{attrs:{cols:t.$vuetify.breakpoint.mobile?"6":""}},[e("div",{staticClass:"caption",staticStyle:{color:"#656565b0"}},[t._v(" "+t._s(t.$t("birthDate"))+" ")]),"IR"==t.passenger.Nationality?e("div",{staticClass:"pt-1"},[t._v(" "+t._s(t._f("simplePersian")(t._f("persianBirthDay")(t.passenger.BirthDate),t.$i18n.locale))+" ")]):t._e()])],1),e(d["a"],[e(r["a"],{attrs:{cols:t.$vuetify.breakpoint.mobile?"6":"4"}},[e("div",{staticClass:"caption",staticStyle:{color:"#656565b0"}},[t._v(" "+t._s(t.$t("passportCountryInTicket"))+" ")]),e("div",{staticClass:"pt-1 align-center"},[e("img",{staticClass:"ml-1",staticStyle:{"vertical-align":"sub"},attrs:{width:"15",src:t.flagUrl(t.passenger.Nationality.toLowerCase())}}),t._v(" "+t._s(t.passenger.Nationality)+" ")])]),e(r["a"],{attrs:{cols:t.$vuetify.breakpoint.mobile?"6":"3"}},[e("div",{staticClass:"caption",staticStyle:{color:"#656565b0"}},[t._v(" "+t._s(t.$t("passportNumber"))+" ")]),t.passenger.PassportNO!==t.passenger.NationalId?e("div",{staticClass:"pt-1"},[t._v(" "+t._s(t.passenger.PassportNO)+" ")]):e("div",{staticClass:"pt-1"},[t._v("--")])]),e(r["a"],{attrs:{cols:t.$vuetify.breakpoint.mobile?"6":"3"}},[e("div",{staticClass:"caption",staticStyle:{color:"#656565b0"}},[t._v(" "+t._s(t.$t("validityDate"))+" ")]),t.passenger.PassportNO!==t.passenger.NationalId?e("div",{staticClass:"pt-1"},[t._v(" "+t._s(t.passenger.PassportExpireDate.split("-").join("/"))+" ")]):e("div",{staticClass:"pt-1"},[t._v("--")])]),e(r["a"],{attrs:{cols:t.price?3:2}},[e("div",{staticClass:"caption",staticStyle:{color:"#656565b0"}},[t._v(" "+t._s(t.$t("ticketNumber"))+" ")]),8==t.service?[t._v(" "+t._s(t.passenger.Eticket))]:t._l(t.passenger.Eticket,(function(s){return e("div",{key:s,staticClass:"pt-1"},[t._v(" "+t._s(s)+" ")])}))],2),t.price?e(r["a"],[e("div",{staticClass:"caption",staticStyle:{color:"#656565b0"}},[t._v(" "+t._s(t.$t("ticketPrice"))+" ")]),e("div",{staticClass:"pt-1"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.price),t.$i18n.locale))+" "+t._s(t._f("currency")(t.currency))+" ")])]):t._e()],1)],1)},at=[],it={props:["passenger","price","index","currency","service"],methods:{flagUrl:b["f"]}},nt=it,rt=(s("2c6e"),Object(z["a"])(nt,st,at,!1,null,null,null)),ct=rt.exports,ot={data:()=>({passengerHeader:[],newPassengers:"",passengers:[],currency:""}),props:["contract","ticket","isAdmin"],mounted(){this.initialize(),this.newPassengers=this.ticket.Content.Passengers;var t=this.contract.Invoices[0].Services.filter(t=>"deleted"==t.Status);this.currency=t[0].Currency,this.passengers=t[0].Passengers},components:{passengerInfo:ct},methods:{initialize(){this.passengerHeader=[{text:this.$t("title"),value:"title"},{text:this.$t("old"),value:"old"},{text:this.$t("new"),value:"new"}]}},watch:{"$i18n.locale":function(){this.initialize()}}},lt=ot,pt=(s("5632"),Object(z["a"])(lt,tt,et,!1,null,null,null)),dt=pt.exports,ut=function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-100"},[t.replies.length?e(r["a"],{staticClass:"d-flex service-request-message flex-column",attrs:{cols:"10"}},t._l(t.replies,(function(s,a){return e("div",{key:a,staticClass:"d-flex mb-3"},[0!=a?e($["a"],{attrs:{color:"#DDDDDD"}},[t._v("subdirectory_arrow_left")]):t._e(),e("div",{staticClass:"d-flex flex-column",staticStyle:{"max-width":"100%"}},[e("span",{staticClass:"service-request-message--user",style:[0==a?{"border-right":"2px solid var(--v-primary-base)"}:{}]},[t._v(t._s(t.$t("supporter")))]),e("span",{staticClass:"service-request-message--content",style:[0==a?{"border-right":"2px solid var(--v-primary-base)"}:{}]},[t._v(" "+t._s(s.content))]),e("span",{staticClass:"service-request-message--date mt-1"},[t._v(t._s(t._f("persianWeekDay")(s.createdAt))+" "+t._s(t._f("persianDateTime")(s.createdAt,"/"))+" ")])])],1)})),0):t._e()],1)},mt=[],_t={date:()=>({persianDate:""}),props:["replies"]},ft=_t,ht=Object(z["a"])(ft,ut,mt,!1,null,null,null),vt=ht.exports,yt=s("a844"),bt=function(){var t=this,e=t._self._c;return e(i["a"],{staticClass:"pa-4 d-flex flex-column justify-space-between align-center",staticStyle:{"background-color":"white",width:"100%",height:"100%"}},[e(d["a"],{staticClass:"ma-0 d-flex justify-space-between grey--text text--darken-2",staticStyle:{width:"100%",height:"20%"}},[e("div",{staticClass:"d-flex flex-column col-11"},[e("span",{staticStyle:{"font-size":"14px"}},[t._v(t._s(t.$t("postReply")))]),e("span",{staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(t.$t("keboardError"))+" ")])]),e(a["a"],{staticClass:"pa-0 ma-2 justify-self-end",staticStyle:{"border-radius":"5px"},attrs:{depressed:"",width:"32px",ripple:!1,tile:"",height:"32px","min-width":"32px","min-height":"32px"},on:{click:function(e){return t.$emit("closeDialog")}}},[e($["a"],{staticClass:"icon-remove icon-18",attrs:{size:"16",color:"buttons"}})],1)],1),e(d["a"],{staticStyle:{width:"95%",height:"20px"}},[e(B["a"],{staticStyle:{"border-color":"#f2f2f5"}})],1),e(d["a"],{staticClass:"ma-0",staticStyle:{width:"100%",height:"50%"}},[e(yt["a"],{staticClass:"grey--text text--darken-2",staticStyle:{"border-radius":"8px"},attrs:{height:"180","row-height":"28",label:t.$t("message"),outlined:"","no-resize":""},model:{value:t.replyContent,callback:function(e){t.replyContent=e},expression:"replyContent"}})],1),e(d["a"],{staticStyle:{width:"95%",height:"20px"}},[e(B["a"],{staticStyle:{"border-color":"#f2f2f5"}})],1),e(d["a"],{staticClass:"ma-0 justify-end align-end",staticStyle:{width:"100%",height:"25%"}},[e(r["a"],{staticClass:"d-flex justify-end px-0 pt-0",attrs:{cols:"4"}},[e(a["a"],{staticClass:"col-5 text-btn elevation-0",attrs:{large:""},on:{click:function(e){return t.$emit("closeDialog")}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),e(a["a"],{staticClass:"col-5 primary-btn elevation-0 mr-2",attrs:{large:"",dark:""},on:{click:t.reply}},[t._v(" "+t._s(t.$t("send"))+" ")])],1)],1)],1)},Ct=[],xt={data:()=>({replyContent:""}),methods:{reply(){this.axios.post(this.$store.state.baseUrl+"ticketing/reply",{TicketId:this.ticket.Id,Content:this.replyContent}).then(()=>{this.openReply=!1,this.$toast.success(this.$t("messageSuccessfullySent"))}).catch(()=>{this.$toast.error(this.$t("errorSendingMessage"))})}},props:["ticket"]},gt=xt,$t=Object(z["a"])(gt,bt,Ct,!1,null,null,null),kt=$t.exports,Pt=function(){var t=this,e=t._self._c;return e(i["a"],{staticClass:"pa-4 d-flex flex-column justify-space-between align-center",staticStyle:{"background-color":"white"}},[e(d["a"],{staticClass:"ma-0 d-flex justify-space-between grey--text text--darken-2",staticStyle:{width:"100%",height:"20%"}},[e("div",{staticClass:"d-flex flex-column col-10"},[e("span",{staticStyle:{"font-size":"14px"}},[t._v(t._s(t.$t("serviceCost")))]),e("span",{staticStyle:{"font-size":"12px"}},[t._v(t._s(t.$t("serviceCostMessage"))+" ")])]),e(a["a"],{staticClass:"pa-0 ma-2 justify-self-end",staticStyle:{"border-radius":"5px"},attrs:{depressed:"",width:"32px",ripple:!1,tile:"",height:"32px","min-width":"32px","min-height":"32px"},on:{click:function(e){return t.$emit("closeDialog")}}},[e($["a"],{staticClass:"icon-remove icon-18",attrs:{size:"16",color:"buttons"}})],1)],1),e(d["a"],{staticStyle:{width:"95%",height:"20px"}},[e(B["a"],{staticStyle:{"border-color":"#f2f2f5"}})],1),e(d["a"],{staticClass:"ma-0",staticStyle:{width:"100%"}},[e(f["a"],{staticClass:"grey--text text--darken-2 moreRadius input priceInp",staticStyle:{"border-radius":"8px"},attrs:{label:t.$t("Amount"),outlined:""},on:{keypress:t.isNumber,input:function(e){t.penalty=t.anyNumberWithComma(e)}},scopedSlots:t._u([{key:"append",fn:function(){return[t.currencies.length?e("span",{staticClass:"pr-3"},[t._v(t._s(t.currencies.filter(e=>t.user.data.defaultCurrency==e.Abbr)[0].TXT))]):t._e()]},proxy:!0}]),model:{value:t.penalty,callback:function(e){t.penalty=e},expression:"penalty"}})],1),e(d["a"],{staticStyle:{width:"95%",height:"20px"}},[e(B["a"],{staticStyle:{"border-color":"#f2f2f5"}})],1),e(d["a"],{staticClass:"ma-0 justify-end align-end",staticStyle:{width:"100%",height:"25%"}},[e(r["a"],{staticClass:"d-flex justify-space-around px-0 pt-0",attrs:{cols:"12"}},[e(a["a"],{staticClass:"col-5 text-btn elevation-0",attrs:{large:""},on:{click:function(e){return t.$emit("closeDialog")}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),e(a["a"],{staticClass:"col-5 primary-btn elevation-0 mr-2",attrs:{large:"",dark:""},on:{click:t.confirmPenalty}},[t._v(" "+t._s(t.$t("finalSubmission"))+" ")])],1)],1)],1)},It=[],St={data:()=>({penalty:"",currencies:[],foundPassenger:{}}),props:["ticket","contract"],created(){this.getcurrency(),this.findPassenger(),console.log(this.ticket),console.log(this.contract)},methods:{anyNumberWithComma(t){return t.toString().replace(/,/g,"").replace(/[۰-۹]/g,t=>"۰۱۲۳۴۵۶۷۸۹".indexOf(t)).replace(/\B(?=(\d{3})+(?!\d))/g,",")},async closeTicket(){let t=await this.axios.put(this.$store.state.baseUrl+"ticketing/changeStatus",{Id:this.ticket.Id,Status:"disable"});t.data.Success&&this.$emit("reload")},findPassenger(){let t={};this.contract.Invoices.filter(e=>e.Services.filter(e=>e.Passengers.filter(e=>{e.Id==this.ticket.Content.Passengers.Id&&(t=e)}))),this.foundPassenger=t,console.log(this.foundPassenger)},async confirmPenalty(){let t={ContractNo:this.ticket.Content.ContractNo,AirItinerary:this.ticket.Content.AirItinerary,CipItinerary:this.ticket.Content.CipItinerary,ServiceId:this.ticket.Content.ServiceId,Passenger:{PassengerId:this.ticket.Content.Passengers.PassengerId,AirTraveler:{BirthDate:this.ticket.Content.Passengers.BirthDate,NationalId:this.ticket.Content.Passengers.NationalId?this.ticket.Content.Passengers.NationalId:"0000000000",PassengerTypeCode:this.ticket.Content.Passengers.PassengerTypeCode||this.foundPassenger.PassengerTypeCode,PersonName:{GivenName:this.ticket.Content.Passengers.GivenName,NamePrefix:this.ticket.Content.Passengers.NamePrefix,MiddleName:"",Surname:this.ticket.Content.Passengers.SurName},Document:{DocID:this.ticket.Content.Passengers.PassportNO,DocIssueCountry:this.ticket.Content.Passengers.Nationality,ExpireDate:this.ticket.Content.Passengers.PassportExpireDate,InnerDocType:this.ticket.Content.Passengers.InnerDocType||this.foundPassenger.InnerDocType}},Penalty:this.penalty.replace(/,/g,"")}},e=await this.axios.put(this.$store.state.baseUrl+"contract/passenger",t);e.data.Success?(this.$emit("closeDialog"),this.closeTicket(),this.$toast.success(this.$t("requestCloseSuccess"))):this.$toast.error(this.$t("costRecordFailed"))},async getcurrency(){let t=await this.axios(this.$store.state.baseUrl+"currencies");this.currencies=t.data.Items}},computed:{...Object(y["b"])({user:"authStore/user",guestUser:"authStore/guestUser"})}},wt=St,Nt=Object(z["a"])(wt,Pt,It,!1,null,null,null),At=Nt.exports,Rt={data:()=>({component:"",contract:"",persianTime:"",persianDate:"",replies:[],openReply:!1,dialogComponent:""}),computed:{onlineCancelReplies(){return[{accountId:this.ticket.AccountId,content:this.$t("ticketRefundSuccessful"),createdAt:this.ticket.CreatedAt,id:1,orgId:this.ticket.OrgId,ticketId:this.ticket.Id,updatedAt:null}]}},props:["ticket"],components:{editPassenger:Z,onlineCancel:dt,ticketMessage:vt,replyMessage:kt,editPassengerPenalty:At},mounted(){},methods:{expansionOpened(){this.getReplies(),this.getContract()},reply(){this.axios.post(this.$store.state.baseUrl+"ticketing/reply",{TicketId:this.ticket.Id,Content:this.replyContent}).then(()=>{this.openReply=!1,this.$toast.success(this.$t("messageSuccessfullySent"))}).catch(()=>{this.$toast.error(this.$t("errorSendingMessage"))})},async getContract(){try{let t=await this.axios.get(this.$store.state.baseUrl+"contractlist?q="+this.ticket.Content.ContractNo);t.data.Items.length&&(this.contract=t.data.Items[0],this.component=this.ticket.Type)}catch{}},async getReplies(){try{let t=await this.axios.get(this.$store.state.baseUrl+"ticketing/reply?TicketId="+this.ticket.Id);this.replies=t.data.Items}catch{}}}},zt=Rt,Dt=(s("2966"),Object(z["a"])(zt,W,V,!1,null,null,null)),Tt=Dt.exports,jt={props:["filteredTickets"],components:{serviceRequest:Tt}},Et=jt,Ot=Object(z["a"])(Et,O,U,!1,null,null,null),Ut=Ot.exports,Ft=s("8fea"),qt=s("891e"),Bt=s("490a"),Lt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mt-5"},[t.tableItems.length?e(Ft["a"],{staticClass:"ruleTable theme--light",staticStyle:{"border-radius":"15px"},attrs:{headers:t.headers,items:t.tableItems,"items-per-page":t.itemsPerPage,"show-expand":"","hide-default-footer":"","item-key":"Id"},on:{"item-expanded":function(e){return t.expansionOpened(e.item)}},scopedSlots:t._u([{key:"item.bullet",fn:function({item:s}){return["enable"==s.Status?e($["a"],{staticClass:"icon-circle-bold icon-18",attrs:{size:"8",color:"red"}}):t._e()]}},{key:"item.index",fn:function({item:s}){return[e("span",[t._v(t._s(t._f("simplePersian")(s.index+1,t.$i18n.locale)))])]}},{key:"item.type",fn:function({item:s}){return[e("span",[t._v(t._s(t._f("ticketTitle")(s.Type)))])]}},{key:"item.account",fn:function({item:s}){return[e("div",{class:{"my-1":!t.$vuetify.breakpoint.mobile}},[t._v(" "+t._s(s.Name||s.Family?s.Name+" "+s.Family:"--")+" ")]),e("div",{class:{"my-1":!t.$vuetify.breakpoint.mobile}},[t._v(" "+t._s(s.Username?s.Username:"--")+" ")])]}},{key:"expanded-item",fn:function({item:s}){return[e(q["a"],{attrs:{"content-class":"edit-passenger-ticket__dialog-"+t.dialogComponent,"max-width":"900",fullscreen:t.$vuetify.breakpoint.mobile},model:{value:t.openReply,callback:function(e){t.openReply=e},expression:"openReply"}},[t.openReply?e(t.dialogComponent,{tag:"component",attrs:{ticket:s,contract:t.contract[s.index]},on:{closeDialog:t.reload}}):t._e()],1),e("td",{staticStyle:{width:"100%"},attrs:{colspan:"12"}},[e(d["a"],{staticClass:"mt-3"},["fulfilled"==s.Status?e("ticketMessage",{attrs:{replies:[{accountId:s.AccountId,content:t.$t("ticketRefundSuccessful"),createdAt:s.CreatedAt,id:1,orgId:s.OrgId,ticketId:s.Id,updatedAt:null}]}}):t._e()],1),t.contract[s.index]?e(s.Type,{tag:"component",attrs:{contract:t.contract[s.index],ticket:s,isAdmin:t.isAdmin},on:{openReplyEvent:function(e){return t.dialogComponentSet(e)},reload:t.reload}}):"fulfilled"!=s.Status?e(Bt["a"],{staticClass:"mx-auto my-5 d-block",attrs:{indeterminate:"",width:"1",size:"30",transition:"scale-transition"}}):t._e()],1)]}},{key:"item.SubsystemName",fn:function({item:s}){return[e("span",[t._v(t._s(s.SubsystemName)+" ( "+t._s(s.SubsystemId)+" )")])]}},{key:"item.service",fn:function({item:s}){return[e("span",[t._v(t._s(t._f("subsystemName")(s.Content.ServiceId)))])]}},{key:"item.contractNo",fn:function({item:s}){return[e("span",[t._v(t._s(s.Content.ContractNo))])]}},{key:"item.CreatedAt",fn:function({item:s}){return[e("span",{staticClass:"white-space-nowrap"},[t._v(t._s(s.CreatedAt?s.CreatedAt:"--"))])]}},{key:"item.CreatedAtTime",fn:function({item:s}){return[e("span",[t._v(t._s(s.CreatedAtTime?s.CreatedAtTime:"--"))])]}},{key:"item.Status",fn:function({item:t}){return[e("status",{attrs:{status:[t.Status],forSupport:!0}})]}}],null,!0)}):t._e(),e("div",{staticClass:"text-center pt-2"},[t.pageCount>1?e(qt["a"],{attrs:{circle:"","total-visible":7,length:t.pageCount},on:{input:function(e){return t.$emit("page",t.page)}},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e()],1)],1)},Gt=[],Ht=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex flex-column align-center online-cancel-ticket w-100"},[2==t.ticket.Content.ServiceId?e(d["a"],{staticClass:"w-100"},t._l(t.rooms.Rooms,(function(s,a){return e(r["a"],{key:"room"+a,staticClass:"pt-0",attrs:{cols:"12"}},[e("span",{staticClass:"d-flex",class:t.$vuetify.rtl?"dir-rtl":"dir-ltr"},[e("span",{staticClass:"mx-2 text-center blue-color theme-element-bg-light pa-1 d-inline-block",staticStyle:{"min-width":"70px","border-radius":"5px"}},[t._v(" "+t._s(t._f("simplePersian")(t.$t("roomCount",[t.$options.filters.toString(s.RoomNumber-1,t.$i18n.locale)]),t.$i18n.locale))+" ")]),e("span",{staticClass:"d-flex align-center grey--text text--darken-2",domProps:{innerHTML:t._s(t.rooms.RoomsInfo[s.RoomNumber-1].RoomTypeName)}})]),t._l(s.Passengers,(function(s,a){return e("div",{key:a,staticClass:"col-12 online-cancel-ticket__info"},[s?e("passengerInfo",{attrs:{passenger:s,service:t.ticket.Content.ServiceId,currency:t.contract.Currency}}):t._e()],1)})),e(d["a"],{staticClass:"px-6",class:t.$vuetify.rtl?"dir-rtl":"dir-ltr"},[e(r["a"],{staticClass:"px-1",attrs:{cols:t.$vuetify.breakpoint.mobile?"6":"3"}},[e("div",{staticClass:"d-flex flex-column"},[e("span",{staticClass:"online-cancel-ticket__price-header caption"},[t._v(" "+t._s(t.$t("referenceId")))]),e("span",{staticClass:"online-cancel-ticket__price-val"},[t._v(t._s(s.BookId||"--"))])])]),e(r["a"],{staticClass:"px-1",attrs:{cols:t.$vuetify.breakpoint.mobile?"6":"3"}},[e("div",{staticClass:"d-flex flex-column"},[e("span",{staticClass:"online-cancel-ticket__price-header caption text-start"},[t._v(" "+t._s(t.$t("voucherNumber")))]),e("span",{staticClass:"online-cancel-ticket__price-val text-start"},[t._v(t._s(s.VoucherNumber||"--"))])])])],1)],2)})),1):e(d["a"],{staticClass:"w-100"},t._l(t.passengers,(function(s,a){return e("div",{key:a,staticClass:"col-12 online-cancel-ticket__info"},[s?e("passengerInfo",{attrs:{passenger:s,service:t.ticket.Content.ServiceId,currency:t.contract.Currency}}):t._e(),e(d["a"],{staticClass:"ma-1"},[e(r["a"],{staticClass:"px-1"},[e("div",{staticClass:"d-flex flex-column"},[e("span",{staticClass:"online-cancel-ticket__price-header caption"},[t._v(" "+t._s(t.$t("referenceId")))]),e("span",{staticClass:"online-cancel-ticket__price-val"},[t._v(t._s(s.ReferenceId||"--"))])])])],1)],1)})),0),e(d["a"],{staticClass:"d-flex justify-space-between w-100"},[e(r["a"],{staticClass:"d-flex justify-end",class:t.$vuetify.breakpoint.mobile?"flex-column":" pl-0"},[t.isAdmin?e(a["a"],{staticClass:"moreRadius button",class:t.$vuetify.breakpoint.mobile?"mb-2":"mx-3",attrs:{text:"",width:"140",block:t.$vuetify.breakpoint.mobile,height:"44",color:"buttons",depressed:""},on:{click:t.openContact}},[t._v(" "+t._s(t.$t("view"))+" "+t._s(t.$t("contract"))+" ")]):t._e(),e(a["a"],{staticClass:"ticket--btn-close moreRadius button",class:t.$vuetify.breakpoint.mobile?"mb-2":" mx-2",attrs:{depressed:"",width:"140",block:t.$vuetify.breakpoint.mobile,color:"lightButtons",height:"44",disabled:"fulfilled"==t.ticket.Status||"disable"==t.ticket.Status},on:{click:t.closeTicket}},[t._v(" "+t._s(t.$t("closeRequest"))+" ")]),t.isAdmin&&t.hasOfflineCancel?e(a["a"],{staticClass:"ticket--btn-confirm white--text moreRadius button",class:t.$vuetify.breakpoint.mobile?"":"mx-2",attrs:{block:t.$vuetify.breakpoint.mobile,disabled:"fulfilled"==t.ticket.Status||"disable"==t.ticket.Status,color:"buttons",width:"140",height:"44",depressed:""},on:{click:function(e){return t.$emit("openReplyEvent","offlineCancelPenalty")}}},[t._v(" "+t._s(t.$t("confirmCorrection"))+" ")]):t._e()],1)],1)],1)},Mt=[],Wt={data:()=>({passengerHeader:[],newPassengers:"",passengers:[],rooms:[],currency:""}),props:["contract","ticket","isAdmin"],mounted(){this.initialize(),console.log(this.ticket),2==this.ticket.Content.ServiceId?(this.rooms=this.contract.Invoices[0].Services.find(t=>(t.Rooms[0].RoomNumber>1&&(t.Rooms=t.Rooms.map(e=>({...e,RoomNumber:e.RoomNumber-t.Rooms[0].RoomNumber+1}))),t.Rooms.some(t=>this.ticket.Content.Rooms.some(e=>e.Id==t.Id)))),this.rooms?(console.log("rooms",this.rooms),this.rooms={Rooms:this.rooms.Rooms.filter(t=>this.ticket.Content.Rooms.some(e=>e.Id==t.Id)),RoomsInfo:this.rooms.Data.Item.Combinations.Rooms}):this.rooms=[],console.log("rooms",this.rooms)):this.passengers=this.ticket.Content.Passengers;var t=this.contract.Invoices[0].Services.filter(t=>"enabled"==t.Status);this.currency=t.length?t[0].Currency:"IRR"},computed:{hasOfflineCancel(){return!![8,2,3,4,6,7,9].includes(this.ticket.Content.ServiceId)||(this.ticket.Content.ServiceId&&1!=this.ticket.Content.ServiceId?void 0:"offlineCancel"==this.ticket.Type)}},components:{passengerInfo:ct},methods:{openContact(){const t=this.$router.resolve({name:"contracts",query:{contractNumber:this.ticket.Content.ContractNo}});window.open(t.href,"_blank")},initialize(){this.passengerHeader=[{text:this.$t("title"),value:"title"},{text:this.$t("old"),value:"old"},{text:this.$t("new"),value:"new"}]},async closeTicket(){let t=await this.axios.put(this.$store.state.baseUrl+"ticketing/changeStatus",{Id:this.ticket.Id,Status:"disable"});t.data.Success?(this.$emit("reload"),this.$toast.success(this.$t("requestCloseSuccess"))):this.$toast.error(this.$t("requestCloseFailed"))}},watch:{"$i18n.locale":function(){this.initialize()}}},Vt=Wt,Jt=(s("b44d"),Object(z["a"])(Vt,Ht,Mt,!1,null,null,null)),Xt=Jt.exports,Yt=s("8d6c"),Qt=s("67b6"),Kt=s("43a6"),Zt=s("1f4f"),te=s("3a2f"),ee=function(){var t=this,e=t._self._c;return e(i["a"],{staticClass:"pa-4"},[e(d["a"],{staticClass:"ma-0 d-flex justify-space-between grey--text text--darken-2"},[e("div",{staticClass:"d-flex flex-column col-10"},[e("span",{staticClass:"font-size-16 font-weight-600 black--text pb-3 pb-lg-0"},[t._v(t._s(t.$t("cancellationSaleAndPurchase")))]),e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(t.$t("cancellationSaleAndPurchaseTxt"))+" ")])]),e(a["a"],{staticClass:"pa-0 ma-2 justify-self-end",staticStyle:{"border-radius":"5px"},attrs:{depressed:"",width:"32px",ripple:!1,tile:"",height:"32px","min-width":"32px","min-height":"32px"},on:{click:function(e){return t.$emit("closeDialog")}}},[e($["a"],{staticClass:"icon-remove icon-18",attrs:{size:"16",color:"buttons"}})],1)],1),e("div",{staticClass:"custom-scroll mb-3 px-2",style:""+(t.$vuetify.breakpoint.mobile?"":"max-height: 350px; overflow-y: auto; overflow-x: hidden")},[e("div",{staticClass:"saleCancel mb-2"},[e("div",{staticClass:"theme-element-bg header px-4 py-2"},[e("span",{staticClass:"font-size-12 mx-n1 black--text"},[t._v(t._s(t.$t("sale")))])]),2!=t.ticket.Content.ServiceId?e("div",{staticClass:"w-100"},t._l(t.ticket.Content.Passengers,(function(s,i){return e(d["a"],{key:i,staticClass:"w-100",class:t.$vuetify.breakpoint.mobile?"px-2 mx-0":"pr-3"},[0===i?e(d["a"],{staticClass:"px-4"},[e(r["a"],{staticClass:"px-1",attrs:{cols:"2",md:"1"}}),e(r["a"],{staticClass:"px-1",attrs:{cols:"5",md:"3"}},[e("span",{staticClass:"font-size-12 grey--text"},[t._v(t._s(t.$t("fullName")))])]),e(r["a"],{staticClass:"px-1",attrs:{cols:"5",md:"1"}},[e("span",{staticClass:"font-size-12 grey--text"},[t._v(t._s(t.$t("ages")))])])],1):t._e(),e(d["a"],{staticClass:"px-3 align-center"},[e(r["a"],{staticClass:"pr-1 pl-0",attrs:{cols:"2",md:"1"}},[e("span",[t._v(t._s(t._f("simplePersian")(i+1,t.$i18n.locale)))])]),e(r["a"],{staticClass:"px-1",attrs:{cols:"5",md:"3"}},[e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(s.GivenName)+" "+t._s(s.SurName)+" ")])]),e(r["a"],{staticClass:"px-1",attrs:{cols:"5",md:"1"}},[e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(t._f("human")(s.PassengerTypeCode))+" ")])]),e(r["a"],{staticClass:"py-md-0 px-md-1",attrs:{cols:"12",md:"3"}},[e(f["a"],{ref:"penalty",refInFor:!0,staticClass:"grey--text text--darken-2 moreRadius input priceInp",attrs:{dense:"",height:"44",label:t.$t("Amount"),"hide-details":"",error:t.penaltyError,outlined:""},on:{keypress:t.isNumber,input:function(e){t.penalty[i]=t.anyNumberWithComma(e)}},scopedSlots:t._u([{key:"append",fn:function(){return["fa"==t.$i18n.locale?e("span",{staticClass:"pr-3 font-size-12"},[t._v(" "+t._s(t._f("currency")(t.contract.Invoices[0].Currency))+" ")]):e("span",{staticClass:"pl-3"},[t._v(" "+t._s(t.contract.Invoices[0].Currency)+" ")])]},proxy:!0}],null,!0),model:{value:t.penalty[i],callback:function(e){t.$set(t.penalty,i,e)},expression:"penalty[i]"}})],1),e(r["a"],{staticClass:"py-md-0 px-md-1",attrs:{cols:"12",md:"3"}},[e(f["a"],{ref:"penalty",refInFor:!0,staticClass:"grey--text text--darken-2 moreRadius input priceInp",attrs:{label:t.$t("extraPenalty2"),dense:"",height:"44","hide-details":"",error:t.extraPenaltyError,outlined:""},on:{keypress:t.isNumber,input:function(e){t.extraPenalty[i]=t.anyNumberWithComma(e)}},scopedSlots:t._u([{key:"append",fn:function(){return["fa"==t.$i18n.locale?e("span",{staticClass:"pr-3 font-size-12"},[t._v(" "+t._s(t._f("currency")(t.contract.Invoices[0].Currency))+" ")]):e("span",{staticClass:"pl-3"},[t._v(" "+t._s(t.contract.Invoices[0].Currency)+" ")])]},proxy:!0}],null,!0),model:{value:t.extraPenalty[i],callback:function(e){t.$set(t.extraPenalty,i,e)},expression:"extraPenalty[i]"}})],1),e(r["a"],{staticClass:"py-0 px-1",class:t.$vuetify.rtl?"text-left":"text-right",attrs:{cols:"12",md:"1"}},[e(a["a"],{staticClass:"Expand",attrs:{tabindex:"-1",small:"",depressed:""},on:{click:function(e){return t.expandRow(s)}}},[e("span",{class:t.$vuetify.breakpoint.mobile?"d-block px-2 font-size-12 font-weight-300":"d-none"},[t._v(t._s(t.$t("priceDetailsHeader")))]),e($["a"],{class:`icon-chevron-${s.expand?"up":"down"} icon-18 black--text`})],1)],1),e(r["a"],{attrs:{cols:"12 px-0 pt-2 pb-0"}},[s.expand?[t.passengerPrices[i]?e(d["a"],{attrs:{justify:"space-between"}},[e(r["a"],[e("div",{staticClass:"category"},[t._v(t._s(t.$t("baseFare")))]),e("div",{staticClass:"name negativePrice"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.passengerPrices[i].baseFare.crAmount-t.passengerPrices[i].baseFare.dbAmount),t.$i18n.locale))+" ")])]),e(r["a"],[e("div",{staticClass:"category"},[t._v(t._s(t.$t("tax")))]),e("div",{staticClass:"name negativePrice"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.passengerPrices[i].tax.crAmount-t.passengerPrices[i].tax.dbAmount),t.$i18n.locale))+" ")])]),e(r["a"],[e("div",{staticClass:"category"},[t._v(t._s(t.$t("discount")))]),e("div",{staticClass:"name negativePrice"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.passengerPrices[i].commission.dbAmount-t.passengerPrices[i].commission.crAmount),t.$i18n.locale))+" ")])]),e(r["a"],[e("div",{staticClass:"category"},[t._v(t._s(t.$t("refundPenalty")))]),e("div",{staticClass:"name negativePrice"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.passengerPrices[i].penalty.crAmount-t.passengerPrices[i].penalty.dbAmount),t.$i18n.locale))+" ")])]),e(r["a"],[e("div",{staticClass:"category"},[t._v(" "+t._s(t.$t("extraServiceTable"))+" "),e(te["a"],{attrs:{top:"","content-class":"noBG"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e($["a"],t._g(t._b({staticClass:"icon-info-circle icon-18",class:[t.$vuetify.rtl?"mr-4":"ml-4"],attrs:{small:""}},"v-icon",a,!1),s))]}}],null,!0)},[e(Zt["a"],[e("thead",[e("tr",[e("th",[t._v("#")]),e("th",[t._v(t._s(t.$t("debtor")))]),e("th",[t._v(t._s(t.$t("creditor")))]),e("th",[t._v(t._s(t.$t("description")))])])]),e("tbody",t._l(t.passengerPrices[i].extraService,(function(s,a){return e("tr",{key:a},[e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(a+1,t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.crAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.dbAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(s.comment?s.comment:"--")+" ")])])})),0)])],1)],1),e("div",{staticClass:"name negativePrice"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.passengerPrices[i].extraServiceSum),t.$i18n.locale))+" ")])]),e(r["a"],[e("div",{staticClass:"category"},[t._v(" "+t._s(t.$t("extraDiscountTable",[t.$discount]))+" "),e(te["a"],{attrs:{top:"","content-class":"noBG"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e($["a"],t._g(t._b({staticClass:"icon-info-circle icon-18",class:[t.$vuetify.rtl?"mr-4":"ml-4"],attrs:{small:""}},"v-icon",a,!1),s))]}}],null,!0)},[e(Zt["a"],[e("thead",[e("tr",[e("th",[t._v("#")]),e("th",[t._v(t._s(t.$t("debtor")))]),e("th",[t._v(t._s(t.$t("creditor")))]),e("th",[t._v(t._s(t.$t("description")))])])]),e("tbody",t._l(t.passengerPrices[i].extraDiscount,(function(s,a){return e("tr",{key:a},[e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(a+1,t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.crAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.dbAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(s.comment?s.comment:"--")+" ")])])})),0)])],1)],1),e("div",{staticClass:"name negativePrice"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.passengerPrices[i].extraDiscountSum),t.$i18n.locale))+" ")])]),e(r["a"],[e("div",{staticClass:"category"},[t._v(" "+t._s(t.$t("extraPenalty"))+" "),e(te["a"],{attrs:{top:"","content-class":"noBG"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e($["a"],t._g(t._b({staticClass:"icon-info-circle icon-18",class:[t.$vuetify.rtl?"mr-4":"ml-4"],attrs:{small:""}},"v-icon",a,!1),s))]}}],null,!0)},[e(Zt["a"],[e("thead",[e("tr",[e("th",[t._v("#")]),e("th",[t._v(t._s(t.$t("debtor")))]),e("th",[t._v(t._s(t.$t("creditor")))]),e("th",[t._v(t._s(t.$t("description")))])])]),e("tbody",t._l(t.passengerPrices[i].extraPenalty,(function(s,a){return e("tr",{key:a},[e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(a+1,t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.crAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.dbAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(s.comment?s.comment:"--")+" ")])])})),0)])],1)],1),e("div",{staticClass:"name negativePrice"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.passengerPrices[i].extraPenaltySum),t.$i18n.locale))+" ")])])],1):t._e()]:t._e()],2)],1)],1)})),1):e("div",{staticClass:"w-100"},t._l(t.rooms.Rooms,(function(s,i){return e(d["a"],{key:"room"+i,staticClass:"w-100",class:t.$vuetify.breakpoint.mobile?"px-2 mx-0":"pr-3"},[0===i?e(d["a"],{staticClass:"px-4"},[e(r["a"],{staticClass:"px-1",attrs:{cols:"2",md:"1"}}),e(r["a"],{staticClass:"px-1",attrs:{cols:"5",md:"2"}},[e("span",{staticClass:"font-size-12 grey--text"},[t._v(t._s(t.$t("roomNoAndCombination")))])]),e(r["a"],{staticClass:"px-1",attrs:{cols:"5",md:"2"}},[e("span",{staticClass:"font-size-12 grey--text"},[t._v(t._s(t.$t("roomTitle")))])])],1):t._e(),e(d["a"],{staticClass:"px-3 align-center"},[e(r["a"],{staticClass:"px-1",attrs:{cols:"2",md:"1"}},[e("span",[t._v(t._s(t._f("simplePersian")(i+1,t.$i18n.locale)))])]),e(r["a"],{staticClass:"px-1",attrs:{cols:"5",md:"2"}},[e("div",{staticClass:"mt-2 font-size-12"},[t._v(" "+t._s(t._f("simplePersian")(t.$t("roomCount",[t.$options.filters.toString(s.RoomNumber-1,t.$i18n.locale)]),t.$i18n.locale))+" ")])]),e(r["a"],{staticClass:"px-1",attrs:{cols:"5",md:"2"}},[e("div",{staticClass:"mt-2 font-size-12"},[t._v(" "+t._s(t.rooms.RoomsInfo[s.RoomNumber-1].RoomTypeName)+" ")])]),e(r["a"],{staticClass:"py-md-0 px-1",attrs:{cols:"12",md:"3"}},[e(f["a"],{ref:"penalty",refInFor:!0,staticClass:"grey--text text--darken-2 moreRadius input priceInp",attrs:{label:t.$t("Amount"),dense:"",height:"44","hide-details":"",error:t.penaltyError,outlined:""},on:{keypress:t.isNumber,input:function(e){t.penalty[i]=t.anyNumberWithComma(e)}},scopedSlots:t._u([{key:"append",fn:function(){return["fa"==t.$i18n.locale?e("span",{staticClass:"pr-3 font-size-12"},[t._v(" "+t._s(t._f("currency")(t.contract.Invoices[0].Currency))+" ")]):e("span",{staticClass:"pl-3"},[t._v(" "+t._s(t.contract.Invoices[0].Currency)+" ")])]},proxy:!0}],null,!0),model:{value:t.penalty[i],callback:function(e){t.$set(t.penalty,i,e)},expression:"penalty[roomIndex]"}})],1),e(r["a"],{staticClass:"py-md-0 px-1",attrs:{cols:"12",md:"3"}},[e(f["a"],{ref:"penalty",refInFor:!0,staticClass:"grey--text text--darken-2 moreRadius input priceInp",attrs:{label:t.$t("extraPenalty2"),dense:"",height:"44","hide-details":"",error:t.extraPenaltyError,outlined:""},on:{keypress:t.isNumber,input:function(e){t.extraPenalty[i]=t.anyNumberWithComma(e)}},scopedSlots:t._u([{key:"append",fn:function(){return["fa"==t.$i18n.locale?e("span",{staticClass:"pr-3 font-size-12"},[t._v(" "+t._s(t._f("currency")(t.contract.Invoices[0].Currency))+" ")]):e("span",{staticClass:"pl-3"},[t._v(" "+t._s(t.contract.Invoices[0].Currency)+" ")])]},proxy:!0}],null,!0),model:{value:t.extraPenalty[i],callback:function(e){t.$set(t.extraPenalty,i,e)},expression:"extraPenalty[roomIndex]"}})],1),e(r["a"],{staticClass:"py-0 px-1",class:t.$vuetify.rtl?"text-left":"text-right",attrs:{cols:"12",md:"1"}},[e(a["a"],{staticClass:"Expand",attrs:{tabindex:"-1",small:"",depressed:""},on:{click:function(e){return t.expandRow(s)}}},[e("span",{class:t.$vuetify.breakpoint.mobile?"d-block px-2 font-size-12 font-weight-300":"d-none"},[t._v(t._s(t.$t("priceDetailsHeader")))]),e($["a"],{class:`icon-chevron-${s.expand?"up":"down"} icon-18 black--text`})],1)],1),e(r["a"],{attrs:{cols:"12 px-0 pt-2 pb-0"}},[s.expand?[t.passengerPrices[i]?e(d["a"],{attrs:{justify:"space-between"}},[e(r["a"],[e("div",{staticClass:"category"},[t._v(t._s(t.$t("baseFare")))]),e("div",{staticClass:"name negativePrice"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.passengerPrices[i].baseFare.crAmount-t.passengerPrices[i].baseFare.dbAmount),t.$i18n.locale))+" ")])]),e(r["a"],[e("div",{staticClass:"category"},[t._v(t._s(t.$t("tax")))]),e("div",{staticClass:"name negativePrice"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.passengerPrices[i].tax.crAmount-t.passengerPrices[i].tax.dbAmount),t.$i18n.locale))+" ")])]),e(r["a"],[e("div",{staticClass:"category"},[t._v(t._s(t.$t("discount")))]),e("div",{staticClass:"name negativePrice"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.passengerPrices[i].commission.dbAmount-t.passengerPrices[i].commission.crAmount),t.$i18n.locale))+" ")])]),e(r["a"],[e("div",{staticClass:"category"},[t._v(t._s(t.$t("refundPenalty")))]),e("div",{staticClass:"name negativePrice"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.passengerPrices[i].penalty.crAmount-t.passengerPrices[i].penalty.dbAmount),t.$i18n.locale))+" ")])]),e(r["a"],[e("div",{staticClass:"category"},[t._v(" "+t._s(t.$t("extraServiceTable"))+" "),e(te["a"],{attrs:{top:"","content-class":"noBG"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e($["a"],t._g(t._b({staticClass:"icon-info-circle icon-18",class:[t.$vuetify.rtl?"mr-4":"ml-4"],attrs:{small:""}},"v-icon",a,!1),s))]}}],null,!0)},[e(Zt["a"],[e("thead",[e("tr",[e("th",[t._v("#")]),e("th",[t._v(t._s(t.$t("debtor")))]),e("th",[t._v(t._s(t.$t("creditor")))]),e("th",[t._v(t._s(t.$t("description")))])])]),e("tbody",t._l(t.passengerPrices[i].extraService,(function(s,a){return e("tr",{key:a},[e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(a+1,t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.crAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.dbAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(s.comment?s.comment:"--")+" ")])])})),0)])],1)],1),e("div",{staticClass:"name negativePrice"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.passengerPrices[i].extraServiceSum),t.$i18n.locale))+" ")])]),e(r["a"],[e("div",{staticClass:"category"},[t._v(" "+t._s(t.$t("extraDiscountTable",[t.$discount]))+" "),e(te["a"],{attrs:{top:"","content-class":"noBG"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e($["a"],t._g(t._b({staticClass:"icon-info-circle icon-18",class:[t.$vuetify.rtl?"mr-4":"ml-4"],attrs:{small:""}},"v-icon",a,!1),s))]}}],null,!0)},[e(Zt["a"],[e("thead",[e("tr",[e("th",[t._v("#")]),e("th",[t._v(t._s(t.$t("debtor")))]),e("th",[t._v(t._s(t.$t("creditor")))]),e("th",[t._v(t._s(t.$t("description")))])])]),e("tbody",t._l(t.passengerPrices[i].extraDiscount,(function(s,a){return e("tr",{key:a},[e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(a+1,t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.crAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.dbAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(s.comment?s.comment:"--")+" ")])])})),0)])],1)],1),e("div",{staticClass:"name negativePrice"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.passengerPrices[i].extraDiscountSum),t.$i18n.locale))+" ")])]),e(r["a"],[e("div",{staticClass:"category"},[t._v(" "+t._s(t.$t("extraPenalty"))+" "),e(te["a"],{attrs:{top:"","content-class":"noBG"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e($["a"],t._g(t._b({staticClass:"icon-info-circle icon-18",class:[t.$vuetify.rtl?"mr-4":"ml-4"],attrs:{small:""}},"v-icon",a,!1),s))]}}],null,!0)},[e(Zt["a"],[e("thead",[e("tr",[e("th",[t._v("#")]),e("th",[t._v(t._s(t.$t("debtor")))]),e("th",[t._v(t._s(t.$t("creditor")))]),e("th",[t._v(t._s(t.$t("description")))])])]),e("tbody",t._l(t.passengerPrices[i].extraPenalty,(function(s,a){return e("tr",{key:a},[e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(a+1,t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.crAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.dbAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(s.comment?s.comment:"--")+" ")])])})),0)])],1)],1),e("div",{staticClass:"name negativePrice"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.passengerPrices[i].extraPenaltySum),t.$i18n.locale))+" ")])])],1):t._e()]:t._e()],2)],1)],1)})),1)]),t.purchaseLoading?e(Bt["a"],{staticClass:"mx-auto d-block mt-5",attrs:{indeterminate:"",size:"44"}}):t._e(),t.purchaseLoading?t._e():e("div",{staticClass:"purchaseCancel mb-2"},[e("purchase",{ref:"purchase",model:{value:t.purchases,callback:function(e){t.purchases=e},expression:"purchases"}})],1)],1),e(d["a"],{staticClass:"mt-0"},[e(Kt["a"],{staticClass:"d-flex w-100",attrs:{dense:"",row:"",disabled:!t.hasPortal,ripple:!1},model:{value:t.returnPortal,callback:function(e){t.returnPortal=e},expression:"returnPortal"}},[e(Qt["a"],{attrs:{label:t.$t("walletORCredit"),value:!1}}),e(Qt["a"],{attrs:{label:t.$t("returnTotheOriginalCard"),value:!0}})],1)],1),e(d["a"],{staticClass:"ma-0 justify-end align-end",staticStyle:{width:"100%",height:"25%"}},[e(r["a"],{staticClass:"d-flex justify-end pt-0",attrs:{cols:"12"}},[e(a["a"],{staticClass:"text-btn elevation-0",class:t.$vuetify.breakpoint.mobile?"col-6":"col-2",attrs:{tabindex:"-1",large:""},on:{click:function(e){return t.$emit("closeDialog")}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),e(a["a"],{staticClass:"primary-btn elevation-0 mr-2",class:t.$vuetify.breakpoint.mobile?"col-6":"col-3",attrs:{tabindex:"-1",large:"",loading:t.loading,dark:""},on:{click:t.confirmPenalty}},[t._v(" "+t._s(t.$t("finalSubmission"))+" ")])],1)],1)],1)},se=[],ae=s("ac7c"),ie=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",t._l(t.value,(function(s,i){return e("div",{key:i,staticClass:"item mb-3"},["deleted"!=s.purchaseStatus?[e("div",{staticClass:"theme-element-bg header",class:t.$vuetify.breakpoint.mobile?"":"d-flex justify-space-between align-center"},[e(ae["a"],{staticClass:"px-0 px-md-2 pt-2 pb-1 mt-0",class:t.$vuetify.breakpoint.mobile?"border-bot mx-2":"",attrs:{dense:"",ripple:!1},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"font-size-12 mx-n1 black--text"},[t._v(t._s(t.$t("purchase")))])]},proxy:!0}],null,!0),model:{value:s.checkbox,callback:function(e){t.$set(s,"checkbox",e)},expression:"purchase.checkbox"}}),e("div",{staticClass:"d-flex",class:t.$vuetify.breakpoint.mobile?"px-3 py-2 flex-column":""},[e("span",{staticClass:"font-weight-600 font-size-12 black--text"},[t._v(t._s(t.$t("firstName"))+" "+t._s(t.$t("broker"))+" : ")]),e("span",{staticClass:"body-2 grey--text text--darken-2 px-md-2"},[t._v(t._s(s.purchaseOwner?s.purchaseOwner:"--"))])]),e("div",{staticClass:"d-flex",class:t.$vuetify.breakpoint.mobile?"px-3 py-2 flex-column":""},[e("span",{staticClass:"font-weight-600 font-size-12 black--text"},[t._v(t._s(t.$t("userName"))+" : ")]),e("span",{staticClass:"body-2 grey--text text--darken-2 px-md-2"},[t._v(t._s(s.purchaseUsername?s.purchaseUsername:"--")+" ")])]),e("div",{staticClass:"d-flex",class:t.$vuetify.breakpoint.mobile?"px-3 py-2 flex-column":""},[e("span",{staticClass:"font-weight-600 font-size-12 black--text"},[t._v(t._s(t.$t("registrationTime"))+" : ")]),"fa"==t.$i18n.locale?e("span",{staticClass:"px-md-2 d-flex body-2 grey--text text--darken-2"},[e("span",{class:t.$vuetify.rtl?"pl-md-3":"pr-md-3"},[t._v(t._s(t._f("simplePersian")(s.PurchaseCreatedAt.split(" ")[1],t.$i18n.locale)))]),e("span",[t._v(t._s(t._f("simplePersian")(t._f("persianDateTime")(s.PurchaseCreatedAt.split(" ")[0],"/"),t.$i18n.locale))+" ")])]):e("span",{staticClass:"px-md-2 d-flex body-2 grey--text text--darken-2"},[e("span",{class:t.$vuetify.rtl?"pl-md-3":"pr-md-3"},[t._v(t._s(s.PurchaseCreatedAt.split(" ")[1]))]),e("span",[t._v(" "+t._s(s.PurchaseCreatedAt.split(" ")[0])+" ")])])]),e("div",{staticClass:"d-flex",class:t.$vuetify.breakpoint.mobile?"px-3 py-2 flex-column":""},[e("span",{staticClass:"font-weight-600 font-size-12 black--text"},[t._v(t._s(t.$t("totalPurchaseAmount"))+" : ")]),e("span",{staticClass:"body-2 grey--text text--darken-2 px-md-2"},[t._v(t._s(t._f("simplePersian")(t._f("price")(s.purchaseAmount),t.$i18n.locale))+" "+t._s(t._f("currency")(s.currency))+" ")])])],1),2!=s.ServiceData.ServiceId?t._l(s.Passengers,(function(i,n){return e("div",{key:n,staticClass:"pb-2"},[0!==n||t.$vuetify.breakpoint.mobile?t._e():e(d["a"],{staticClass:"px-5 py-2 py-md-0 px-md-3"},[e(r["a"],{staticClass:"pa-1 pb-2",attrs:{cols:"1",md:"1"}},[e("span",{staticClass:"font-size-12 grey--text"})]),e(r["a"],{staticClass:"pa-1 pb-2",attrs:{cols:"5",md:"3"}},[e("span",{staticClass:"font-size-12 grey--text"},[t._v(t._s(t.$t("fullName")))])]),e(r["a"],{staticClass:"pa-1 pb-2",attrs:{cols:"5",md:"1"}},[e("span",{staticClass:"font-size-12 grey--text"},[t._v(t._s(t.$t("ages")))])])],1),e(d["a"],{staticClass:"px-3 align-center"},[e(r["a"],{staticClass:"pa-1 pb-2",attrs:{cols:"1",md:"1"}},[e("span",{staticClass:"font-size-12 grey--text",class:t.$vuetify.breakpoint.mobile?"d-block":"d-none"},[t._v("#")]),e("span",[t._v(t._s(t._f("simplePersian")(n+1,t.$i18n.locale)))])]),e(r["a"],{staticClass:"pa-1 pb-2",attrs:{cols:"11",md:"3"}},[e("span",{staticClass:"font-size-12 grey--text",class:t.$vuetify.breakpoint.mobile?"d-block":"d-none"},[t._v(t._s(t.$t("fullName")))]),e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(i.NamePrefix)+" "+t._s(i.GivenName)+" "+t._s(i.SurName)+" ")])]),e(r["a"],{staticClass:"pa-1 pb-2",attrs:{cols:"6",md:"1"}},[e("span",{staticClass:"font-size-12 grey--text",class:t.$vuetify.breakpoint.mobile?"d-block":"d-none"},[t._v(t._s(t.$t("ages")))]),e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(t._f("human")(i.PassengerTypeCode))+" ")])]),e(r["a"],{staticClass:"pa-1 pb-2",attrs:{cols:"12",md:"3"}},[e("number-field",{attrs:{height:44,dense:"",label:t.$t("penaltyPrice"),hasPriceFormat:!0},on:{"keyup-event":t.emitData},model:{value:i.penalty,callback:function(e){t.$set(i,"penalty",e)},expression:"passenger.penalty"}})],1),e(r["a"],{staticClass:"pa-1 pb-2",class:t.$vuetify.rtl?"text-left":"text-right",attrs:{cols:"12",md:"4"}},[e(a["a"],{staticClass:"Expand",attrs:{tabindex:"-1",small:"",depressed:""},on:{click:function(e){return t.expandRow(i)}}},[e("span",{class:t.$vuetify.breakpoint.mobile?"d-block px-2 font-size-12 font-weight-300":"d-none"},[t._v(t._s(t.$t("priceDetailsHeader")))]),e($["a"],{class:`icon-chevron-${i.expand?"up":"down"} icon-18 black--text`})],1)],1),e(r["a"],{attrs:{cols:"12 px-0 py-0"}},[i.expand?[e("div",[e(d["a"],{staticClass:"theme-element-bg mx-0",attrs:{justify:"space-between"}},[e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("baseFare")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("tax")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("discount")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("refundPenalty")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("extraServiceTable")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("ExtraDiscount")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("extraPenalty")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("total")))])])],1),e(d["a"],{staticClass:"mx-0",attrs:{justify:"space-between"}},[e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.baseFare(i.price.baseFare)),t.$i18n.locale)))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.tax(i.price.tax)),t.$i18n.locale))+" ")])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.commission(i.price.commission)),t.$i18n.locale))+" ")])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.penaltyPrice(i.price.penalty)),t.$i18n.locale))+" ")])]),e(r["a"],[e("div",{staticClass:"d-flex align-center"},[e("span",{staticClass:"font-size-12 px-1"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.extraService(i.price.extraService)),t.$i18n.locale))+" ")]),e(te["a"],{attrs:{top:"","content-class":"noBG"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e($["a"],t._g(t._b({staticClass:"icon-info-circle icon-18",class:[t.$vuetify.rtl?"mr-4":"ml-4"],attrs:{small:""}},"v-icon",a,!1),s))]}}],null,!0)},[e(Zt["a"],[e("thead",[e("tr",[e("th",[t._v("#")]),e("th",[t._v(t._s(t.$t("debtor")))]),e("th",[t._v(t._s(t.$t("creditor")))]),e("th",[t._v(t._s(t.$t("description")))])])]),e("tbody",t._l(i.price.extraService,(function(s,a){return e("tr",{key:a},[e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(a+1,t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.crAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.dbAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(s.comment?s.comment:"--")+" ")])])})),0)])],1)],1)]),e(r["a"],[e("div",{staticClass:"d-flex align-center"},[e("span",{staticClass:"font-size-12 px-1"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.extraDiscount(i.price.extraDiscount)),t.$i18n.locale)))]),e(te["a"],{attrs:{top:"","content-class":"noBG"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e($["a"],t._g(t._b({staticClass:"icon-info-circle icon-18",class:[t.$vuetify.rtl?"mr-4":"ml-4"],attrs:{small:""}},"v-icon",a,!1),s))]}}],null,!0)},[e(Zt["a"],[e("thead",[e("tr",[e("th",[t._v("#")]),e("th",[t._v(t._s(t.$t("debtor")))]),e("th",[t._v(t._s(t.$t("creditor")))]),e("th",[t._v(t._s(t.$t("description")))])])]),e("tbody",t._l(i.price.extraDiscount,(function(s,a){return e("tr",{key:a},[e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(a+1,t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.crAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.dbAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(s.comment?s.comment:"--")+" ")])])})),0)])],1)],1)]),e(r["a"],[e("div",{staticClass:"d-flex align-center"},[e("span",{staticClass:"font-size-12 px-1"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.extraPenaltyPrice(i.price.extraPenalty)),t.$i18n.locale)))]),e(te["a"],{attrs:{top:"","content-class":"noBG"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e($["a"],t._g(t._b({staticClass:"icon-info-circle icon-18",class:[t.$vuetify.rtl?"mr-4":"ml-4"],attrs:{small:""}},"v-icon",a,!1),s))]}}],null,!0)},[e(Zt["a"],[e("thead",[e("tr",[e("th",[t._v("#")]),e("th",[t._v(t._s(t.$t("debtor")))]),e("th",[t._v(t._s(t.$t("creditor")))]),e("th",[t._v(t._s(t.$t("description")))])])]),e("tbody",t._l(i.price.extraPenalty,(function(s,a){return e("tr",{key:a},[e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(a+1,t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.crAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.dbAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(s.comment?s.comment:"--")+" ")])])})),0)])],1)],1)]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.getItemTotalPrice(i.price,s.purchaseStatus)),t.$i18n.locale))+" "+t._s(t._f("currency")(s.currency))+" ")])])],1)],1)]:t._e()],2)],1)],1)})):t._l(s.Rooms,(function(i,n){return e("div",{key:n},[0!==n||t.$vuetify.breakpoint.mobile?t._e():e(d["a"],{staticClass:"px-3 py-2 py-md-0 px-md-3"},[e(r["a"],{staticClass:"pa-1 pb-1",attrs:{cols:"2",md:"1"}},[e("span",{staticClass:"font-size-12 grey--text",class:t.$vuetify.breakpoint.mobile?"d-block":"d-none"},[t._v("#")])]),e(r["a"],{staticClass:"pa-1 pb-1",attrs:{cols:"5",md:"2"}},[e("span",{staticClass:"font-size-12 grey--text"},[t._v(t._s(t.$t("roomNoAndCombination")))])]),e(r["a"],{staticClass:"pa-1 pb-1",attrs:{cols:"5",md:"2"}},[e("span",{staticClass:"font-size-12 grey--text"},[t._v(t._s(t.$t("roomTitle")))])])],1),e(d["a"],{staticClass:"px-3 py-2 py-md-0 px-md-3 align-center"},[e(r["a"],{staticClass:"pa-1 pb-1",attrs:{cols:"1",md:"1"}},[e("span",{staticClass:"font-size-12 grey--text",class:t.$vuetify.breakpoint.mobile?"d-block":"d-none"},[t._v("#")]),e("span",[t._v(t._s(t._f("simplePersian")(n+1,t.$i18n.locale)))])]),e(r["a"],{staticClass:"pa-1 pb-1",attrs:{cols:"11",md:"2"}},[e("span",{staticClass:"font-size-12 grey--text",class:t.$vuetify.breakpoint.mobile?"d-block":"d-none"},[t._v(t._s(t.$t("roomNoAndCombination")))]),e("span",{staticClass:"mt-2 font-size-12"},[t._v(" "+t._s(t._f("simplePersian")(t.$t("roomCount",[t.$options.filters.toString(i.RoomNumber-1,t.$i18n.locale)]),t.$i18n.locale))+" ")])]),e(r["a"],{staticClass:"pa-1 pb-1",attrs:{cols:"6",md:"2"}},[e("span",{staticClass:"font-size-12 grey--text",class:t.$vuetify.breakpoint.mobile?"d-block":"d-none"},[t._v(t._s(t.$t("roomTitle")))]),e("span",[t._v("--")])]),e(r["a"],{staticClass:"pa-1 pb-1",attrs:{cols:"12",md:"3"}},[e("number-field",{attrs:{height:44,dense:"",label:t.$t("penaltyPrice"),hasPriceFormat:!0},on:{input:t.emitData},model:{value:i.penalty,callback:function(e){t.$set(i,"penalty",e)},expression:"room.penalty"}})],1),e(r["a"],{staticClass:"pa-1 pb-1",class:t.$vuetify.rtl?"text-left":"text-right",attrs:{cols:"12",md:"4"}},[e(a["a"],{staticClass:"Expand",attrs:{tabindex:"-1",small:"",depressed:""},on:{click:function(e){return t.expandRow(i)}}},[e("span",{class:t.$vuetify.breakpoint.mobile?"d-block px-2 font-size-12 font-weight-300":"d-none"},[t._v(t._s(t.$t("priceDetailsHeader")))]),e($["a"],{class:`icon-chevron-${i.expand?"up":"down"} icon-18 black--text`})],1)],1),e(r["a"],{attrs:{cols:"12 px-0 py-0"}},[i.expand?[e("div",[e(d["a"],{staticClass:"theme-element-bg mx-0",attrs:{justify:"space-between"}},[e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("baseFare")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("tax")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("discount")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("refundPenalty")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("extraServiceTable")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("ExtraDiscount")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("extraPenalty")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("total")))])])],1),e(d["a"],{staticClass:"mx-0",attrs:{justify:"space-between"}},[e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.baseFare(i.price.baseFare)),t.$i18n.locale)))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.tax(i.price.tax)),t.$i18n.locale))+" ")])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.commission(i.price.commission)),t.$i18n.locale))+" ")])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.penaltyPrice(i.price.penalty)),t.$i18n.locale))+" ")])]),e(r["a"],[e("div",{staticClass:"d-flex align-center"},[e("span",{staticClass:"font-size-12 px-1"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.extraService(i.price.extraService)),t.$i18n.locale))+" ")]),e(te["a"],{attrs:{top:"","content-class":"noBG"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e($["a"],t._g(t._b({staticClass:"icon-info-circle icon-18",class:[t.$vuetify.rtl?"mr-4":"ml-4"],attrs:{small:""}},"v-icon",a,!1),s))]}}],null,!0)},[e(Zt["a"],[e("thead",[e("tr",[e("th",[t._v("#")]),e("th",[t._v(t._s(t.$t("debtor")))]),e("th",[t._v(t._s(t.$t("creditor")))]),e("th",[t._v(t._s(t.$t("description")))])])]),e("tbody",t._l(i.price.extraService,(function(s,a){return e("tr",{key:a},[e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(a+1,t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.crAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.dbAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(s.comment?s.comment:"--")+" ")])])})),0)])],1)],1)]),e(r["a"],[e("div",{staticClass:"d-flex align-center"},[e("span",{staticClass:"font-size-12 px-1"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.extraDiscount(i.price.extraDiscount)),t.$i18n.locale)))]),e(te["a"],{attrs:{top:"","content-class":"noBG"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e($["a"],t._g(t._b({staticClass:"icon-info-circle icon-18",class:[t.$vuetify.rtl?"mr-4":"ml-4"],attrs:{small:""}},"v-icon",a,!1),s))]}}],null,!0)},[e(Zt["a"],[e("thead",[e("tr",[e("th",[t._v("#")]),e("th",[t._v(t._s(t.$t("debtor")))]),e("th",[t._v(t._s(t.$t("creditor")))]),e("th",[t._v(t._s(t.$t("description")))])])]),e("tbody",t._l(i.price.extraDiscount,(function(s,a){return e("tr",{key:a},[e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(a+1,t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.crAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.dbAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(s.comment?s.comment:"--")+" ")])])})),0)])],1)],1)]),e(r["a"],[e("div",{staticClass:"d-flex align-center"},[e("span",{staticClass:"font-size-12 px-1"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.extraPenaltyPrice(i.price.extraPenalty)),t.$i18n.locale)))]),e(te["a"],{attrs:{top:"","content-class":"noBG"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e($["a"],t._g(t._b({staticClass:"icon-info-circle icon-18",class:[t.$vuetify.rtl?"mr-4":"ml-4"],attrs:{small:""}},"v-icon",a,!1),s))]}}],null,!0)},[e(Zt["a"],[e("thead",[e("tr",[e("th",[t._v("#")]),e("th",[t._v(t._s(t.$t("debtor")))]),e("th",[t._v(t._s(t.$t("creditor")))]),e("th",[t._v(t._s(t.$t("description")))])])]),e("tbody",t._l(i.price.extraPenalty,(function(s,a){return e("tr",{key:a},[e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(a+1,t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.crAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.dbAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(s.comment?s.comment:"--")+" ")])])})),0)])],1)],1)]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.getItemTotalPrice(i.price,s.purchaseStatus)),t.$i18n.locale))+" "+t._s(t._f("currency")(s.currency))+" ")])])],1)],1)]:t._e()],2)],1)],1)}))]:[e("div",{staticClass:"theme-element-bg header py-2 px-2 py-md-3 px-md-3",class:t.$vuetify.breakpoint.mobile?"":"d-flex justify-space-between align-center"},[e("div",{staticClass:"d-flex",class:t.$vuetify.breakpoint.mobile?"border-bot justify-space-between align-center mx-1 pb-2":""},[e("span",{staticClass:"font-size-12 mx-n1 black--text px-1 px-md-0"},[t._v(t._s(t.$t("purchase")))]),t.$vuetify.breakpoint.mobile?e("div",{staticClass:"status d-flex align-center py-1 px-3"},[e("i",{staticClass:"icon-circle-bold px-1"}),e("span",{staticClass:"font-size-11"},[t._v(t._s(t.$t("canceled")))])]):t._e()]),e("div",{staticClass:"d-flex flex-column",class:t.$vuetify.breakpoint.mobile?"px-2 py-2 flex-column":""},[e("span",{staticClass:"font-weight-600 font-size-12 black--text"},[t._v(t._s(t.$t("firstName"))+" "+t._s(t.$t("broker"))+" : ")]),e("span",{staticClass:"body-2 grey--text text--darken-2"},[t._v(t._s(s.purchaseOwner?s.purchaseOwner:"--"))])]),e("div",{staticClass:"d-flex flex-column",class:t.$vuetify.breakpoint.mobile?"px-2 py-2 flex-column":""},[e("span",{staticClass:"font-weight-600 font-size-12 black--text"},[t._v(t._s(t.$t("userName"))+" : ")]),e("span",{staticClass:"body-2 grey--text text--darken-2"},[t._v(t._s(s.purchaseUsername?s.purchaseUsername:"--")+" ")])]),e("div",{staticClass:"d-flex flex-column",class:t.$vuetify.breakpoint.mobile?"px-2 py-2 flex-column":""},[e("span",{staticClass:"font-weight-600 font-size-12 black--text"},[t._v(t._s(t.$t("registrationTime"))+" : ")]),"fa"==t.$i18n.locale?e("span",{staticClass:"d-flex body-2 grey--text text--darken-2"},[e("span",{class:t.$vuetify.rtl?"pl-3":"pr-3"},[t._v(t._s(t._f("simplePersian")(s.PurchaseCreatedAt.split(" ")[1],t.$i18n.locale)))]),e("span",[t._v(t._s(t._f("simplePersian")(t._f("persianDateTime")(s.PurchaseCreatedAt.split(" ")[0],"/"),t.$i18n.locale))+" ")])]):e("span",{staticClass:"d-flex body-2 grey--text text--darken-2"},[e("span",{class:t.$vuetify.rtl?"pl-3":"pr-3"},[t._v(t._s(s.PurchaseCreatedAt.split(" ")[1]))]),e("span",[t._v(" "+t._s(s.PurchaseCreatedAt.split(" ")[0])+" ")])])]),e("div",{staticClass:"d-flex flex-column",class:t.$vuetify.breakpoint.mobile?"px-2 py-2 flex-column":""},[e("span",{staticClass:"font-weight-600 font-size-12 black--text"},[t._v(t._s(t.$t("totalPurchaseAmount"))+" : ")]),e("span",{staticClass:"body-2 grey--text text--darken-2"},[t._v(t._s(t._f("simplePersian")(t._f("price")(s.purchaseAmount),t.$i18n.locale))+" "+t._s(t._f("currency")(s.currency))+" ")])]),t.$vuetify.breakpoint.mobile?t._e():e("div",{staticClass:"status d-flex align-center py-1 px-3"},[e("i",{staticClass:"icon-circle-bold px-1"}),e("span",{staticClass:"font-size-11"},[t._v(t._s(t.$t("canceled")))])])]),2!=s.ServiceData.ServiceId?t._l(s.Passengers,(function(i,n){return e("div",{key:n,staticClass:"pb-2"},[0!==n||t.$vuetify.breakpoint.mobile?t._e():e(d["a"],{staticClass:"px-3"},[e(r["a"],{staticClass:"px-1",attrs:{cols:"1",md:"1"}},[e("span",{staticClass:"font-size-12 grey--text",class:t.$vuetify.breakpoint.mobile?"d-block":"d-none"},[t._v("#")])]),e(r["a"],{staticClass:"px-1",attrs:{cols:"3",md:"3"}},[e("span",{staticClass:"font-size-12 grey--text"},[t._v(t._s(t.$t("fullName")))])]),e(r["a"],{staticClass:"px-1",attrs:{cols:"2",md:"2"}},[e("span",{staticClass:"font-size-12 grey--text"},[t._v(t._s(t.$t("ages")))])]),e(r["a"],{staticClass:"px-1",attrs:{cols:"4",md:"2"}},[e("span",{staticClass:"font-size-12 grey--text"},[t._v(t._s(t.$t("penaltyPrice")))])])],1),e(d["a"],{staticClass:"px-3 align-center"},[e(r["a"],{staticClass:"pr-1 pl-0",attrs:{cols:"1",md:"1"}},[e("span",{staticClass:"font-size-12 grey--text",class:t.$vuetify.breakpoint.mobile?"d-block":"d-none"},[t._v("#")]),e("span",[t._v(t._s(t._f("simplePersian")(n+1,t.$i18n.locale)))])]),e(r["a"],{staticClass:"px-1",attrs:{cols:"11",md:"3"}},[e("span",{staticClass:"font-size-12 grey--text",class:t.$vuetify.breakpoint.mobile?"d-block":"d-none"},[t._v(t._s(t.$t("fullName")))]),e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(i.NamePrefix)+" "+t._s(i.GivenName)+" "+t._s(i.SurName)+" ")])]),e(r["a"],{staticClass:"px-1",attrs:{cols:"2",md:"2"}},[e("span",{staticClass:"font-size-12 grey--text",class:t.$vuetify.breakpoint.mobile?"d-block":"d-none"},[t._v(t._s(t.$t("ages")))]),e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(t._f("human")(i.PassengerTypeCode))+" ")])]),e(r["a"],{staticClass:"px-1",attrs:{cols:"6",md:"3"}},[e("span",{staticClass:"font-size-12 grey--text",class:t.$vuetify.breakpoint.mobile?"d-block":"d-none"},[t._v(t._s(t.$t("penaltyPrice")))]),e("span",{staticClass:"d-block"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.getItemTotalPrice(i.price,s.purchaseStatus)),t.$i18n.locale))+" "+t._s(t._f("currency")(s.currency)))])]),e(r["a"],{staticClass:"pa-1 pb-2",class:t.$vuetify.rtl?"text-left":"text-right",attrs:{cols:"4",md:"3"}},[e(a["a"],{staticClass:"Expand",attrs:{small:"",depressed:""},on:{click:function(e){return t.expandRow(i)}}},[e("span",{class:t.$vuetify.breakpoint.mobile?"d-block px-2 font-size-12 font-weight-300":"d-none"},[t._v(t._s(t.$t("priceDetailsHeader")))]),e($["a"],{class:`icon-chevron-${i.expand?"up":"down"} icon-18 black--text`})],1)],1),e(r["a"],{attrs:{cols:"12 px-0 py-0"}},[i.expand?[e("div",[e(d["a"],{staticClass:"theme-element-bg mx-0",attrs:{justify:"space-between"}},[e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("baseFare")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("tax")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("discount")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("refundPenalty")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("extraServiceTable")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("ExtraDiscount")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("extraPenalty")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("total")))])])],1),e(d["a"],{staticClass:"mx-0",attrs:{justify:"space-between"}},[e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.baseFare(i.price.baseFare)),t.$i18n.locale)))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.tax(i.price.tax)),t.$i18n.locale))+" ")])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.commission(i.price.commission)),t.$i18n.locale))+" ")])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.penaltyPrice(i.price.penalty)),t.$i18n.locale))+" ")])]),e(r["a"],[e("div",{staticClass:"d-flex align-center"},[e("span",{staticClass:"font-size-12 px-1"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.extraService(i.price.extraService)),t.$i18n.locale))+" ")]),e(te["a"],{attrs:{top:"","content-class":"noBG"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e($["a"],t._g(t._b({staticClass:"icon-info-circle icon-18",class:[t.$vuetify.rtl?"mr-4":"ml-4"],attrs:{small:""}},"v-icon",a,!1),s))]}}],null,!0)},[e(Zt["a"],[e("thead",[e("tr",[e("th",[t._v("#")]),e("th",[t._v(t._s(t.$t("debtor")))]),e("th",[t._v(t._s(t.$t("creditor")))]),e("th",[t._v(t._s(t.$t("description")))])])]),e("tbody",t._l(i.price.extraService,(function(s,a){return e("tr",{key:a},[e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(a+1,t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.crAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.dbAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(s.comment?s.comment:"--")+" ")])])})),0)])],1)],1)]),e(r["a"],[e("div",{staticClass:"d-flex align-center"},[e("span",{staticClass:"font-size-12 px-1"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.extraDiscount(i.price.extraDiscount)),t.$i18n.locale)))]),e(te["a"],{attrs:{top:"","content-class":"noBG"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e($["a"],t._g(t._b({staticClass:"icon-info-circle icon-18",class:[t.$vuetify.rtl?"mr-4":"ml-4"],attrs:{small:""}},"v-icon",a,!1),s))]}}],null,!0)},[e(Zt["a"],[e("thead",[e("tr",[e("th",[t._v("#")]),e("th",[t._v(t._s(t.$t("debtor")))]),e("th",[t._v(t._s(t.$t("creditor")))]),e("th",[t._v(t._s(t.$t("description")))])])]),e("tbody",t._l(i.price.extraDiscount,(function(s,a){return e("tr",{key:a},[e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(a+1,t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.crAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.dbAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(s.comment?s.comment:"--")+" ")])])})),0)])],1)],1)]),e(r["a"],[e("div",{staticClass:"d-flex align-center"},[e("span",{staticClass:"font-size-12 px-1"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.extraPenaltyPrice(i.price.extraPenalty)),t.$i18n.locale)))]),e(te["a"],{attrs:{top:"","content-class":"noBG"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e($["a"],t._g(t._b({staticClass:"icon-info-circle icon-18",class:[t.$vuetify.rtl?"mr-4":"ml-4"],attrs:{small:""}},"v-icon",a,!1),s))]}}],null,!0)},[e(Zt["a"],[e("thead",[e("tr",[e("th",[t._v("#")]),e("th",[t._v(t._s(t.$t("debtor")))]),e("th",[t._v(t._s(t.$t("creditor")))]),e("th",[t._v(t._s(t.$t("description")))])])]),e("tbody",t._l(i.price.extraPenalty,(function(s,a){return e("tr",{key:a},[e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(a+1,t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.crAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.dbAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(s.comment?s.comment:"--")+" ")])])})),0)])],1)],1)]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.getItemTotalPrice(i.price,s.purchaseStatus)),t.$i18n.locale))+" "+t._s(t._f("currency")(s.currency))+" ")])])],1)],1)]:t._e()],2)],1)],1)})):t._l(s.Rooms,(function(i,n){return e("div",{key:n},[0!==n||t.$vuetify.breakpoint.mobile?t._e():e(d["a"],{staticClass:"px-3"},[e(r["a"],{staticClass:"px-1",attrs:{cols:"2",md:"1"}},[e("span",{staticClass:"font-size-12 grey--text",class:t.$vuetify.breakpoint.mobile?"d-block":"d-none"},[t._v("#")])]),e(r["a"],{staticClass:"px-1",attrs:{cols:"4",md:"2"}},[e("span",{staticClass:"font-size-12 grey--text"},[t._v(t._s(t.$t("roomNoAndCombination")))])]),e(r["a"],{staticClass:"px-1",attrs:{cols:"4",md:"2"}},[e("span",{staticClass:"font-size-12 grey--text"},[t._v(t._s(t.$t("roomTitle")))])])],1),e(d["a"],{staticClass:"px-3 align-center"},[e(r["a"],{staticClass:"px-1",attrs:{cols:"1",md:"1"}},[e("span",{staticClass:"font-size-12 grey--text",class:t.$vuetify.breakpoint.mobile?"d-block":"d-none"},[t._v("#")]),e("span",[t._v(t._s(t._f("simplePersian")(n+1,t.$i18n.locale)))])]),e(r["a"],{staticClass:"px-1",attrs:{cols:"11",md:"2"}},[e("span",{staticClass:"font-size-12 grey--text",class:t.$vuetify.breakpoint.mobile?"d-block":"d-none"},[t._v(t._s(t.$t("roomNoAndCombination")))]),e("span",{staticClass:"mt-2 font-size-12"},[t._v(" "+t._s(t._f("simplePersian")(t.$t("roomCount",[t.$options.filters.toString(i.RoomNumber-1,t.$i18n.locale)]),t.$i18n.locale))+" ")])]),e(r["a"],{staticClass:"px-1",attrs:{cols:"6",md:"2"}},[e("span",{staticClass:"font-size-12 grey--text",class:t.$vuetify.breakpoint.mobile?"d-block":"d-none"},[t._v(t._s(t.$t("roomTitle")))]),e("span",[t._v("--")])]),e(r["a"],{staticClass:"py-0 px-1",class:t.$vuetify.rtl?"text-left":"text-right",attrs:{cols:"12",md:"7"}},[e(a["a"],{staticClass:"Expand",attrs:{small:"",depressed:""},on:{click:function(e){return t.expandRow(i)}}},[e("span",{class:t.$vuetify.breakpoint.mobile?"d-block px-2 font-size-12 font-weight-300":"d-none"},[t._v(t._s(t.$t("priceDetailsHeader")))]),e($["a"],{class:`icon-chevron-${i.expand?"up":"down"} icon-18 black--text`})],1)],1),e(r["a"],{attrs:{cols:"12 px-0 py-0"}},[i.expand?[e("div",[e(d["a"],{staticClass:"theme-element-bg mx-0",attrs:{justify:"space-between"}},[e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("baseFare")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("tax")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("discount")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("refundPenalty")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("extraServiceTable")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("ExtraDiscount")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("extraPenalty")))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("total")))])])],1),e(d["a"],{staticClass:"mx-0",attrs:{justify:"space-between"}},[e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.baseFare(i.price.baseFare)),t.$i18n.locale)))])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.tax(i.price.tax)),t.$i18n.locale))+" ")])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.commission(i.price.commission)),t.$i18n.locale))+" ")])]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.penaltyPrice(i.price.penalty)),t.$i18n.locale))+" ")])]),e(r["a"],[e("div",{staticClass:"d-flex align-center"},[e("span",{staticClass:"font-size-12 px-1"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.extraService(i.price.extraService)),t.$i18n.locale))+" ")]),e(te["a"],{attrs:{top:"","content-class":"noBG"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e($["a"],t._g(t._b({staticClass:"icon-info-circle icon-18",class:[t.$vuetify.rtl?"mr-4":"ml-4"],attrs:{small:""}},"v-icon",a,!1),s))]}}],null,!0)},[e(Zt["a"],[e("thead",[e("tr",[e("th",[t._v("#")]),e("th",[t._v(t._s(t.$t("debtor")))]),e("th",[t._v(t._s(t.$t("creditor")))]),e("th",[t._v(t._s(t.$t("description")))])])]),e("tbody",t._l(i.price.extraService,(function(s,a){return e("tr",{key:a},[e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(a+1,t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.crAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.dbAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(s.comment?s.comment:"--")+" ")])])})),0)])],1)],1)]),e(r["a"],[e("div",{staticClass:"d-flex align-center"},[e("span",{staticClass:"font-size-12 px-1"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.extraDiscount(i.price.extraDiscount)),t.$i18n.locale)))]),e(te["a"],{attrs:{top:"","content-class":"noBG"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e($["a"],t._g(t._b({staticClass:"icon-info-circle icon-18",class:[t.$vuetify.rtl?"mr-4":"ml-4"],attrs:{small:""}},"v-icon",a,!1),s))]}}],null,!0)},[e(Zt["a"],[e("thead",[e("tr",[e("th",[t._v("#")]),e("th",[t._v(t._s(t.$t("debtor")))]),e("th",[t._v(t._s(t.$t("creditor")))]),e("th",[t._v(t._s(t.$t("description")))])])]),e("tbody",t._l(i.price.extraDiscount,(function(s,a){return e("tr",{key:a},[e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(a+1,t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.crAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.dbAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(s.comment?s.comment:"--")+" ")])])})),0)])],1)],1)]),e(r["a"],[e("div",{staticClass:"d-flex align-center"},[e("span",{staticClass:"font-size-12 px-1"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.extraPenaltyPrice(i.price.extraPenalty)),t.$i18n.locale)))]),e(te["a"],{attrs:{top:"","content-class":"noBG"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e($["a"],t._g(t._b({staticClass:"icon-info-circle icon-18",class:[t.$vuetify.rtl?"mr-4":"ml-4"],attrs:{small:""}},"v-icon",a,!1),s))]}}],null,!0)},[e(Zt["a"],[e("thead",[e("tr",[e("th",[t._v("#")]),e("th",[t._v(t._s(t.$t("debtor")))]),e("th",[t._v(t._s(t.$t("creditor")))]),e("th",[t._v(t._s(t.$t("description")))])])]),e("tbody",t._l(i.price.extraPenalty,(function(s,a){return e("tr",{key:a},[e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(a+1,t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.crAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(s.dbAmount),t.$i18n.locale))+" ")]),e("td",{staticClass:"text-center"},[t._v(" "+t._s(s.comment?s.comment:"--")+" ")])])})),0)])],1)],1)]),e(r["a"],[e("span",{staticClass:"font-size-12"},[t._v(" "+t._s(t._f("simplePersian")(t._f("price")(t.getItemTotalPrice(i.price,s.purchaseStatus)),t.$i18n.locale))+" "+t._s(t._f("currency")(s.currency))+" ")])])],1)],1)]:t._e()],2)],1)],1)}))]],2)})),0)},ne=[],re=function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},t(e,s)};return function(e,s){if("function"!==typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function a(){this.constructor=e}t(e,s),e.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)}}(),ce=function(){return ce=Object.assign||function(t){for(var e,s=1,a=arguments.length;s<a;s++)for(var i in e=arguments[s],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ce.apply(this,arguments)},oe=function(t,e,s,a){var i,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,s):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,s,a);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(n<3?i(r):n>3?i(e,s,r):i(e,s))||r);return n>3&&r&&Object.defineProperty(e,s,r),r},le=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.expandLoad=!1,e}return re(e,t),e.prototype.emitData=function(){var t=[],e=[],s=this.value.map((function(s){return 2!=s.ServiceData.ServiceId?t=s.Passengers.map((function(t){return t.penalty})):e=s.Rooms.map((function(t){return t.penalty})),ce(ce({},s),{checkbox:"deleted"!=s.purchaseStatus&&(t.length>0&&!t.includes("")||e.length>0&&!e.includes(""))})}));console.log("newPurchase",s),this.$emit("input",s)},e.prototype.expandRow=function(t){1==t.expand?t.expand=!t.expand:this.$set(t,"expand",!this.expandLoad)},e.prototype.getItemTotalPrice=function(t,e){var s=t.extraDiscount.reduce((function(t,e){return e.dbAmount-e.crAmount+t}),0),a=t.extraPenalty.reduce((function(t,e){return e.dbAmount-e.crAmount+t}),0),i=t.extraService.reduce((function(t,e){return e.crAmount-e.dbAmount+t}),0);return"deleted"==e?t.penalty.crAmount-t.penalty.dbAmount-a:t.baseFare.crAmount-t.baseFare.dbAmount+(t.tax.crAmount-t.tax.dbAmount)-(t.commission.dbAmount-t.commission.crAmount)+i-s},e.prototype.baseFare=function(t){return t.crAmount-t.dbAmount},e.prototype.tax=function(t){return t.crAmount-t.dbAmount},e.prototype.commission=function(t){return t.dbAmount-t.crAmount},e.prototype.penaltyPrice=function(t){return t.crAmount-t.dbAmount},e.prototype.extraPenaltyPrice=function(t){return t.reduce((function(t,e){return e.dbAmount-e.crAmount+t}),0)},e.prototype.extraService=function(t){return t.reduce((function(t,e){return e.crAmount-e.dbAmount+t}),0)},e.prototype.extraDiscount=function(t){return t.reduce((function(t,e){return e.dbAmount-e.crAmount+t}),0)},e.prototype.touchedData=function(){this.emitData()},oe([Object(S["c"])()],e.prototype,"value",void 0),e=oe([Object(S["a"])({components:{NumberField:C["a"]}})],e),e}(S["d"]),pe=le,de=pe,ue=(s("53b5"),Object(z["a"])(de,ie,ne,!1,null,"506facd1",null)),me=ue.exports,_e={data:()=>({penalty:[],extraPenalty:[],currencies:[],passengerPrices:[],currency:"",loading:!1,penaltyError:!1,extraPenaltyError:!1,expandLoad:!1,purchaseLoading:!1,purchases:[],changeStatus:[],returnPortal:!1,hasPortal:!1}),components:{NumberField:C["a"],purchase:me},created(){this.hasPortal=!!this.contract.hasOwnProperty("HasPortal")&&!!this.contract.HasPortal,console.log("hasPortal",this.hasPortal),this.getcurrency(),this.getAllPrices(),this.getPurchaseData()},props:["ticket","contract"],methods:{anyNumberWithComma(t){return t.toString().replace(/,/g,"").replace(/\s/g,"").replace(/[۰-۹]/g,t=>"۰۱۲۳۴۵۶۷۸۹".indexOf(t)).replace(/\B(?=(\d{3})+(?!\d))/g,",")},async getAllPrices(){if(2!=this.ticket.Content.ServiceId){let t=this.ticket.Content.Passengers.length;for(let e=0;e<t;e++)await this.expandRowPassengers(this.ticket.Content.Passengers[e],e,"Passenger")}else{let t=this.rooms.Rooms.length;for(let e=0;e<t;e++)await this.expandRowPassengers(this.rooms.Rooms[e],e,"Room")}},async expandRowPassengers(t,e,s){try{let a=await this.axios(this.$store.state.baseUrl+"report/contract/passenger/price",{params:{Id:t.Id,Type:s}}),i=a.data.Items;i.extraDiscountSum=i.extraDiscount.reduce((t,e)=>e.dbAmount-e.crAmount+t,0),i.extraPenaltySum=i.extraPenalty.reduce((t,e)=>e.dbAmount-e.crAmount+t,0),i.extraServiceSum=i.extraService.reduce((t,e)=>e.crAmount-e.dbAmount+t,0),this.$set(this.passengerPrices,e,i)}catch(error){console.log(error)}},async confirmPenalty(){this.$refs.purchase.touchedData();const t=this.purchases.map(t=>t.checkbox).some(t=>!0===t);if(console.log("checkboxes",t),this.loading=!0,console.log("this.penalty",this.penalty),this.penalty[0]&&this.extraPenalty[0]){this.penaltyError=!1,this.extraPenaltyError=!1;let s,a=[],i=[];if(2!=this.enabledService.ServiceId?(i=this.ticket.Content.Passengers.map(t=>t.Eticket),a=this.ticket.Content.Passengers.map((t,e)=>({PassengerId:t.PassengerId,Penalty:this.penalty[e].replace(/,/g,"").replace(/\s/g,""),ExtraPenalty:this.extraPenalty[e].replace(/,/g,"").replace(/\s/g,"")}))):a=this.rooms.Rooms.map((t,e)=>({Id:t.Id,Penalty:this.penalty[e].replace(/,/g,"").replace(/\s/g,""),ExtraPenalty:this.extraPenalty[e].replace(/,/g,"").replace(/\s/g,"")})),1==this.enabledService.ServiceId){let t=this.ticket.Content.Passengers.map((t,e)=>({PassengerId:t.PassengerId,Penalty:this.penalty[e].replace(/,/g,"").replace(/\s/g,""),ExtraPenalty:this.extraPenalty[e].replace(/,/g,"").replace(/\s/g,"")}));s={ServiceId:this.enabledService.ServiceId,ContractNo:this.ticket.Content.ContractNo,AirItinerary:this.ticket.Content.AirItinerary,Etickets:i,ReferenceId:this.ticket.Content.Passengers[0].ReferenceId,Penalties:t,ReturnPortalWallet:!!this.hasPortal&&this.returnPortal}}else 8==this.enabledService.ServiceId?s={ServiceId:this.enabledService.ServiceId,ContractNo:this.ticket.Content.ContractNo,CipItinerary:this.ticket.Content.CipItinerary,Etickets:i[0],Passengers:this.ticket.Content.Passengers,ReferenceId:this.ticket.Content.Passengers[0].ReferenceId,Penalties:a,ReturnPortalWallet:!!this.hasPortal&&this.returnPortal}:2==this.enabledService.ServiceId?s={ServiceId:this.enabledService.ServiceId,ContractNo:this.ticket.Content.ContractNo,HotelItinerary:this.ticket.Content.HotelItinerary,Rooms:this.rooms.Rooms,ReferenceId:this.rooms.Rooms[0].BookId,Penalties:a,ReturnPortalWallet:!!this.hasPortal&&this.returnPortal}:3==this.enabledService.ServiceId?s={ServiceId:this.enabledService.ServiceId,ContractNo:this.ticket.Content.ContractNo,InsuranceItinerary:this.ticket.Content.InsuranceItinerary,Etickets:i,Passengers:this.ticket.Content.Passengers,ReferenceId:this.ticket.Content.Passengers[0].ReferenceId,Penalties:a}:4==this.enabledService.ServiceId?s={ServiceId:this.enabledService.ServiceId,ContractNo:this.ticket.Content.ContractNo,TourItinerary:this.ticket.Content.TourItinerary,Etickets:i,Passengers:this.ticket.Content.Passengers,ReferenceId:this.ticket.Content.Passengers[0].ReferenceId,Penalties:a}:6==this.enabledService.ServiceId?s={ServiceId:this.enabledService.ServiceId,ContractNo:this.ticket.Content.ContractNo,VisaItinerary:this.ticket.Content.VisaItinerary,Etickets:i,Passengers:this.ticket.Content.Passengers,ReferenceId:this.ticket.Content.Passengers[0].ReferenceId,Penalties:a}:7==this.enabledService.ServiceId?s={ServiceId:this.enabledService.ServiceId,ContractNo:this.ticket.Content.ContractNo,ActivityItinerary:this.ticket.Content.ActivityItinerary,Etickets:i,Passengers:this.ticket.Content.Passengers,ReferenceId:this.ticket.Content.Passengers[0].ReferenceId,Penalties:a}:9==this.enabledService.ServiceId&&(s={ServiceId:this.enabledService.ServiceId,ContractNo:this.ticket.Content.ContractNo,TransferItinerary:this.ticket.Content.TransferItinerary,Etickets:i,Passengers:this.ticket.Content.Passengers,ReferenceId:this.ticket.Content.Passengers[0].ReferenceId,Penalties:a});console.log("body",s);try{let e=await this.axios.post(this.$store.state.baseUrl+"flights/offlinecancel",s);if(e.data.Success){if(this.$toast.success(this.$t("changedSuccussfullyCancelSale")),!t){let t=await this.axios.put(this.$store.state.baseUrl+"ticketing/changeStatus",{Id:this.ticket.Id,Status:"disable"});t.data.Success?(this.$emit("closeDialog"),this.$toast.success(this.$t("requestCloseSuccess"))):(this.loading=!1,this.$toast.error(this.$t("requestCloseFailed")))}}else this.loading=!1,console.log("res.data.Items",e.data.Items),"not paymented or service is already disable"===e.data.Items?this.$toast.error(this.$t("errorRecordingCost")):this.$toast.error(this.$t("thereIsAnError"))}catch(e){console.log("e",e),this.loading=!1,this.$toast.error(this.$t("thereIsAnError"))}}else this.penalty[0]||(this.penaltyError=!0),this.extraPenalty[0]||(this.extraPenaltyError=!0),this.$toast.error(this.$t("لطفا مبلغ و کارمزد را وارد کنید"));if(this.loading=!1,t){let t=[];const e=this.purchases.filter(t=>t.checkbox);console.log("selectedPurchases",e);let s=[],a=[];e.forEach(e=>{2!=e.ServiceData.ServiceId?s=e.Passengers.map(t=>({Id:t.Id,Penalty:t.penalty?Number(t.penalty):t.penalty})):a=e.Rooms.map(t=>({Id:t.Id,Penalty:t.penalty?Number(t.penalty):t.penalty}));const i=s.map(t=>t.Penalty),n=a.map(t=>t.Penalty);if(i.includes("")||n.includes(""))this.$toast.error(this.$t("لطفا قیمت جریمه را وارد کنید"));else{let i=this.$store.state.baseUrl+"purchase/cancel",n={PriceType:2!=e.ServiceData.ServiceId?"Passenger":"Room",PurchaseId:e.PurchaseId,ContractNo:Number(e.serial),Passengers:2!=e.ServiceData.ServiceId?s:"",Rooms:2==e.ServiceData.ServiceId?a:""};t.push(new Promise((t,e)=>{this.axios.post(i,n).then(e=>{1==e.data.Success?(console.log("Success",e.data),t(),this.$toast.success(this.$t("changedSuccussfullyCancelPurchase"))):0==e.data.Success&&(console.log("error",e.data),this.$toast.error(e.data.Message))}).catch(t=>{console.log("error",error),e()})}))}}),t.length>0&&Promise.all(t).then(async()=>{let t=await this.axios.put(this.$store.state.baseUrl+"ticketing/changeStatus",{Id:this.ticket.Id,Status:"disable"});t.data.Success?(this.$emit("closeDialog"),this.$toast.success(this.$t("requestCloseSuccess"))):this.$toast.error(this.$t("requestCloseFailed"))}).catch(t=>{console.log("e",t)})}},async getcurrency(){let t=await this.axios(this.$store.state.baseUrl+"currencies");this.currencies=t.data.Items,this.currency=this.currencies.filter(t=>this.user.data.defaultCurrency==t.Abbr)[0].TXT},async getPurchaseData(){this.purchaseLoading=!0;const t=this.enabledService.Id;console.log("serviceId",t);let e=this.$store.state.baseUrl+"purchaselist?pageNumber=1&perPage=20&QueryType=InvoiceServiceId";null!==t&&(e+="&query="+t),this.axios.get(e).then(t=>{const e=t.data.Items.map(t=>({...t,checkbox:!1}));this.purchases=e.map(t=>(2!=t.ServiceData.ServiceId?t.Passengers=t.Passengers.map(t=>({...t,penalty:""})):t.Rooms=t.Rooms.map(t=>({...t,penalty:""})),t)),this.purchaseLoading=!1}).catch(t=>{this.purchaseLoading=!1,console.log(t)})},expandRow(t){1==t.expand?t.expand=!t.expand:this.$set(t,"expand",!this.expandLoad)}},computed:{...Object(y["b"])({user:"authStore/user",guestUser:"authStore/guestUser"}),rooms(){let t=[];return 2==this.ticket.Content.ServiceId&&(t=this.contract.Invoices[0].Services.find(t=>(t.Rooms[0].RoomNumber>1&&(t.Rooms=t.Rooms.map(e=>({...e,RoomNumber:e.RoomNumber-t.Rooms[0].RoomNumber+1}))),t.Rooms.some(t=>this.ticket.Content.Rooms.some(e=>e.Id==t.Id)))),t?(console.log("rooms",t),t={Rooms:t.Rooms.filter(t=>this.ticket.Content.Rooms.some(e=>e.Id==t.Id)),RoomsInfo:t.Data.Item.Combinations.Rooms}):t=[],console.log("rooms",t)),t},enabledService(){return this.contract.Invoices[0].Services.find(t=>2==this.ticket.Content.ServiceId?this.ticket.Content.HotelItinerary.SessionId==t.Data.Item.SessionId&&this.ticket.Content.HotelItinerary.SubsystemId==t.Data.Item.SubsystemId&&this.ticket.Content.HotelItinerary.CombinationId==t.Data.Item.CombinationId&&this.ticket.Content.HotelItinerary.SubsystemName==t.Data.Item.SubsystemName&&this.ticket.Content.HotelItinerary.RecommendationId==t.Data.Item.RecommendationId:1==this.ticket.Content.ServiceId?this.ticket.Content.AirItinerary.SessionId==t.Data.Item.SessionId&&this.ticket.Content.AirItinerary.SubsystemId==t.Data.Item.SubsystemId&&this.ticket.Content.AirItinerary.CombinationId==t.Data.Item.CombinationId&&this.ticket.Content.AirItinerary.SubsystemName==t.Data.Item.SubsystemName&&this.ticket.Content.AirItinerary.RecommendationId==t.Data.Item.RecommendationId:8==this.ticket.Content.ServiceId?this.ticket.Content.CipItinerary.SessionId==t.Data.Item.SessionId&&this.ticket.Content.CipItinerary.SubsystemId==t.Data.Item.SubsystemId&&this.ticket.Content.CipItinerary.CombinationId==t.Data.Item.CombinationId&&this.ticket.Content.CipItinerary.SubsystemName==t.Data.Item.SubsystemName&&this.ticket.Content.CipItinerary.RecommendationId==t.Data.Item.RecommendationId:3==this.ticket.Content.ServiceId?this.ticket.Content.InsuranceItinerary.SessionId==t.Data.Item.SessionId&&this.ticket.Content.InsuranceItinerary.SubsystemId==t.Data.Item.SubsystemId&&this.ticket.Content.InsuranceItinerary.CombinationId==t.Data.Item.CombinationId&&this.ticket.Content.InsuranceItinerary.SubsystemName==t.Data.Item.SubsystemName&&this.ticket.Content.InsuranceItinerary.RecommendationId==t.Data.Item.RecommendationId:4==this.ticket.Content.ServiceId?this.ticket.Content.TourItinerary.SessionId==t.Data.Item.SessionId&&this.ticket.Content.TourItinerary.SubsystemId==t.Data.Item.SubsystemId&&this.ticket.Content.TourItinerary.CombinationId==t.Data.Item.CombinationId&&this.ticket.Content.TourItinerary.SubsystemName==t.Data.Item.SubsystemName&&this.ticket.Content.TourItinerary.RecommendationId==t.Data.Item.RecommendationId:6==this.ticket.Content.ServiceId?this.ticket.Content.VisaItinerary.SessionId==t.Data.Item.SessionId&&this.ticket.Content.VisaItinerary.SubsystemId==t.Data.Item.SubsystemId&&this.ticket.Content.VisaItinerary.CombinationId==t.Data.Item.CombinationId&&this.ticket.Content.VisaItinerary.SubsystemName==t.Data.Item.SubsystemName&&this.ticket.Content.VisaItinerary.RecommendationId==t.Data.Item.RecommendationId:7==this.ticket.Content.ServiceId?this.ticket.Content.ActivityItinerary.SessionId==t.Data.Item.SessionId&&this.ticket.Content.ActivityItinerary.SubsystemId==t.Data.Item.SubsystemId&&this.ticket.Content.ActivityItinerary.CombinationId==t.Data.Item.CombinationId&&this.ticket.Content.ActivityItinerary.SubsystemName==t.Data.Item.SubsystemName&&this.ticket.Content.ActivityItinerary.RecommendationId==t.Data.Item.RecommendationId:9==this.ticket.Content.ServiceId?this.ticket.Content.TransferItinerary.SessionId==t.Data.Item.SessionId&&this.ticket.Content.TransferItinerary.SubsystemId==t.Data.Item.SubsystemId&&this.ticket.Content.TransferItinerary.CombinationId==t.Data.Item.CombinationId&&this.ticket.Content.TransferItinerary.SubsystemName==t.Data.Item.SubsystemName&&this.ticket.Content.TransferItinerary.RecommendationId==t.Data.Item.RecommendationId:void 0)}}},fe=_e,he=(s("1c6a"),Object(z["a"])(fe,ee,se,!1,null,"86ec0cf4",null)),ve=he.exports,ye={props:["filteredTickets","isAdmin","recordCount"],components:{editPassenger:Z,onlineCancel:dt,status:Yt["a"],offlineCancel:Xt,ticketMessage:vt,replyMessage:kt,EditPassengerPenalty:At,offlineCancelPenalty:ve},data:()=>({itemsPerPage:20,pageCount:20,page:1,contract:[],component:"",openReply:!1,replyContent:"",dialogComponent:"",tableItems:[],headers:[]}),created(){this.initializeHeaders(),this.pageCount=Math.ceil(this.recordCount/20),this.createTableItems()},watch:{"$i18n.locale":function(){this.initializeHeaders()},filteredTickets(){this.createTableItems()}},methods:{changePage(t){this.page=t},initializeHeaders(){this.headers=[{text:"",align:"center",sortable:!1,value:"data-table-expand",width:50},{text:this.$t("status"),align:"center",sortable:!1,value:"Status"},{text:this.$t("time"),align:"center",width:100,sortable:!1,value:"CreatedAtTime"},{text:this.$t("createdAt"),align:"center",sortable:!1,value:"CreatedAt"},{text:this.$t("contractNo"),align:"center",sortable:!1,value:"contractNo",width:110},{text:this.$t("registrantName"),align:"center",sortable:!1,value:"account"},{text:this.$t("serviceType"),align:"center",sortable:!1,value:"service"},{text:this.$t("subsystemName"),align:"center",sortable:!1,value:"SubsystemName"},{text:this.$t("requestTitle"),align:"center",sortable:!1,value:"type",width:150}],this.$vuetify.breakpoint.mobile||(this.headers.push({text:"",align:"center",sortable:!1,value:"bullet",width:5}),this.headers.push({text:"#",align:"center",sortable:!1,value:"index"})),this.headers.reverse()},reload(){console.log("reload"),this.openReply=!1,this.$store.dispatch("authStore/getUnseenMassages"),this.$emit("reload")},createTableItems(){this.tableItems=JSON.parse(JSON.stringify(this.filteredTickets));for(let e=0;e<this.tableItems.length;e++){this.$set(this.tableItems[e],"index",e+20*(this.page-1));var t=new Date(this.tableItems[e].Date);const s={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"};this.$set(this.tableItems[e],"CreatedAt",t.toLocaleDateString("en-GB",s).split(",")[0].split("/").reverse().join("/")),this.$set(this.tableItems[e],"CreatedAtTime",t.toLocaleDateString("en-GB",s).split(",")[1].split("/").reverse().join("/"));const a={1:"Air",2:"Hotel",3:"Insurance",4:"Tour",5:"OtherServices",6:"Visa",7:"Activity",8:"Cip",9:"Transfer"};console.log("this.tableItems[i]",this.tableItems[e].Type);let i=a[this.tableItems[e].Content.ServiceId],n=this.tableItems[e].Content[""+(i+"Itinerary")];this.$set(this.tableItems[e],"SubsystemId","offlineCancel"===this.tableItems[e].Type&&n.hasOwnProperty("SubsystemId")?n.SubsystemId:"--"),this.$set(this.tableItems[e],"SubsystemName","offlineCancel"===this.tableItems[e].Type&&n.hasOwnProperty("SubsystemName")?n.SubsystemName:"--")}this.pageCount=Math.ceil(this.recordCount/20)},dialogComponentSet(t){this.dialogComponent=t,this.openReply=!0},expansionOpened(t){"fulfilled"!=t.Status&&this.getContract(t.Content.ContractNo,t.index)},async getContract(t,e){try{let s=await this.axios.get(this.$store.state.baseUrl+"contractlist?q="+t);s.data.Items.length&&this.$set(this.contract,e,s.data.Items[0])}catch{}}}},be=ye,Ce=(s("146b"),Object(z["a"])(be,Lt,Gt,!1,null,"83a85b98",null)),xe=Ce.exports,ge={data:()=>({accId:"",name:"",lastname:"",gender:"",nationalId:"",show:"editProfile",mobile:"",address:"",username:"",bank:null,email:"",bankCardNumber:"",shebaNumber:"",dataLoading:!0,phoneNumber:"",select:{name:"IRAN",code:"0098",abb:"IR"},bankCardError:"",shebaNumberError:"",currency:"IRR",Ledgercurrency:"",role:12,page:1,component:"",selectedItem:{},filteredTicketCounts:{},tabs:[],walletAmount:"",companies:null,oldpassword:"",newpassword:"",contractNo:"",confirmpassword:"",showoldPass:!1,bankLoading:!1,roleType:"",shownewPass:!1,showconfirmPass:!1,walletAmountError:"",snackbar:"",snackbarText:"",snackbarColor:"",editUserId:null,company:"",level:"",role:"",sgroup:"",ticketsType:"",status:"",bankError:"",commissionCategoryId:"",tickets:[],filteredTickets:[],recordCount:"",currencies:[],currencyConverts:[],selectedCurrency:{},selectedUser:{},userNotFound:!1}),components:{userSupport:Ut,adminSupport:xe,NumberField:C["a"],BankSelect:g["a"],UserNotFoundAlert:T},validations:{nationalId:{nationalID:function(t){let e=this.$options.filters.simpleEnglish(t),s=!1;if(e&&10==e.length){const t=e.split("");let a=t.map((t,e)=>10-e>1?t*(10-e):0);const i=(t,e)=>t+e;let n=Math.floor(a.reduce(i)%11);s=n>=2?11-n==parseInt(t[9]):n==parseInt(t[9])}return s}},oldpassword:{required:x["required"],minLength:Object(x["minLength"])(6)},newpassword:{required:x["required"],minLength:Object(x["minLength"])(6)},confirmpassword:{required:x["required"],minLength:Object(x["minLength"])(6)},email:{email:x["email"]},mobile:{required:x["required"],minLength:Object(x["minLength"])(10),maxLength:Object(x["maxLength"])(10)}},computed:{...Object(y["b"])({user:"authStore/user",guestUser:"authStore/guestUser",menus:"authStore/menus",mobileCode:"authStore/mobileCode"}),isAnotherUser(){return!!this.accId&&this.accId!==this.user.accountId+""},hideChargeCreditMenu(){return this.$store.state.authStore.base.hideChargeCreditMenu},isAdmin(){return"admin"==this.user.roleType||this.user.data.adminReportRoles&&this.user.data.adminReportRoles.includes(this.user.roleId)},defaultCurrency(){return this.$store.state.authStore.base.defaultCurrency[this.$i18n.locale]},token(){return this.$store.state.authStore.token},emailErrors(){const t=[];return this.$v.email.$dirty?(!this.$v.email.email&&t.push(this.$t("emailIsInvalid")),t):t},mobileErrors(){const t=[];return this.$v.mobile.$dirty?(!this.$v.mobile.minLength&&t.push(this.$t("mobileNumberMustBe10Digits")),!this.$v.mobile.maxLength&&t.push(this.$t("mobileNumberMustBe10Digits")),!this.$v.mobile.required&&t.push(this.$t("mobileNumberIsRequired")),t):t},oldpasswordErrors(){const t=[];return this.$v.oldpassword.$dirty?(!this.$v.oldpassword.required&&t.push(this.$t("oldPassReq")),!this.$v.oldpassword.minLength&&t.push(this.$t("oldPass6Chars")),t):t},newpasswordErrors(){const t=[];return this.$v.newpassword.$dirty?(!this.$v.newpassword.required&&t.push(this.$t("newPassReq")),!this.$v.newpassword.minLength&&t.push(this.$t("newPass6Chars")),t):t},confirmpasswordErrors(){const t=[];return this.$v.confirmpassword.$dirty?(!this.$v.confirmpassword.required&&t.push(this.$t("newPass2Req")),!this.$v.confirmpassword.minLength&&t.push(this.$t("newPass26Chars")),this.newpassword!==this.confirmpassword&&t.push(this.$t("newPass2Diff")),t):t}},watch:{"$i18n.locale":function(){this.initialize()}},mounted(){this.initialize(),"support"==this.$route.query.type?this.show="supportCenter":"walletCharge"==this.$route.query.type&&(this.$store.dispatch("authStore/getUserInfo",this.$route.query.accId),this.show="walletCharge",this.walletAmount=this.$route.query.amount||"",this.accId=this.$route.query.accId||"");var t=document.querySelectorAll('[aria-label="clear icon"]');t.forEach(t=>{t.tabIndex="-1"});var e=document.querySelectorAll('[aria-label="append icon"]');e.forEach(t=>{t.tabIndex="-1"}),this.getUser(),this.getTickets(),this.getCurrency()},methods:{changeBankLoading(t){this.bankLoading=t},initialize(){this.tabs=[{value:"all"},{value:"enable"},{value:"fulfilled"},{value:"disable"}]},otherImageUrl:b["l"],async getCurrency(){let t=await this.axios(this.$store.state.baseUrl+"currencies");this.currencies=t.data.Items;let e=await this.axios(this.$store.state.baseUrl+"currencyconvert");if(this.currencyConverts=e.data.Items,this.currencyConverts=this.currencyConverts.filter(t=>t.FromCurrencyAbb==this.guestUser.data.defaultCurrency),this.currencies=this.currencies.filter(t=>this.currencyConverts.some(e=>e.ToCurrencyAbb===t.Abbr)),"walletCharge"===this.$route.query.type&&this.$route.query.currency){const t=this.currencies.find(t=>this.$route.query.currency===t.Abbr);if(t)this.selectedCurrency=t;else if(this.defaultCurrency){let t=this.currencies.filter(t=>t.Abbr.includes(this.defaultCurrency));this.selectedCurrency=t[0]}else this.selectedCurrency=this.currencies[0]}else if(this.defaultCurrency){let t=this.currencies.filter(t=>t.Abbr.includes(this.defaultCurrency));this.selectedCurrency=t[0]}else this.selectedCurrency=this.currencies[0]},pageChanged(t){this.$vuetify.goTo(0),this.page=t,this.getTickets()},filterTickets(t){this.page=1,this.$refs.adminSupport&&this.$refs.adminSupport.changePage(1),"all"!==t.value?(this.ticketsType=t.value,this.getTickets()):(this.ticketsType="",this.getTickets())},async getTickets(){this.page=this.contractNo?1:this.page;let t=await this.axios.get(this.$store.state.baseUrl+"ticketing/ticket?pageNumber="+this.page+"&perPage=20&status="+this.ticketsType+"&contractNo="+this.contractNo);this.tickets=t.data.Items,this.recordCount=t.data.RecordCount,this.filteredTicketCounts={all:t.data.EnableCount+t.data.FulfilledCount+t.data.DisableCount,enable:t.data.EnableCount,fulfilled:t.data.FulfilledCount,disable:t.data.DisableCount},this.filteredTickets.splice(0,this.filteredTickets.length),this.filteredTickets=this.tickets},fourDigitSpace(){this.bankCardNumber&&(this.bankCardNumber=this.bankCardNumber.replace(/\s+/g,"").replace(/\d{4}(?=.)/g,"$& "))},clean(t){for(var e in t)null!==t[e]&&void 0!==t[e]&&""!==t[e]||delete t[e];return t},handleBankErrors(){this.walletAmountError=!this.walletAmount&&this.$t("enterAmount"),this.bankError=!this.bank&&this.$t("sthIsRequired",[this.$t("PaymentGateway")])},goToBank(){this.walletAmount&&this.bank?this.$refs.bankSelect.goBank():this.handleBankErrors()},async editProfile(){let t={Name:this.name?this.name:"",Family:this.lastname?this.lastname:"",MobileCode:this.mobileCode,Address:this.address?this.address:"",Sheba:this.shebaNumber?this.shebaNumber:"",bankCard:this.bankCardNumber?this.bankCardNumber:""};if(this.bankCardNumber?E.a.isBankCardNo(this.bankCardNumber.replace(/\s+/g,""))?(t["BankCard"]=this.bankCardNumber.replace(/\s+/g,""),this.bankCardError=""):this.bankCardError=this.$t("cardNumberIsIncorrect"):this.bankCardError="",this.shebaNumber?E.a.isIranianSheba("IR"+this.shebaNumber)?(t["Sheba"]="IR"+this.shebaNumber,this.shebaNumberError=""):this.shebaNumberError=this.$t("shebaIsIncorrect"):this.shebaNumberError="",!this.shebaNumberError&&!this.bankCardError){let e=await this.axios.put(this.$store.state.baseUrl+"user?id="+this.editUserId,this.clean(t));e.data.Success&&(this.$toast.success(this.$t("userProfileChangedSuccessfully")),this.getUser())}},async editUser(){if(this.$v.name.$touch(),this.$v.lastname.$touch(),!this.$v.name.$error&&!this.$v.lastname.$error)if("admin"!=this.roleType){let t={Name:this.name,Family:this.lastname,Address:this.address},e=await this.axios.put(this.$store.state.baseUrl+"profile?id="+this.editUserId,t);e.data.Success&&(this.snackbar=!0,this.snackbarText=this.$t("personalInfoChangedSuccessfully"),this.snackbarColor="success",this.getUser())}else{let t={Name:this.name,Family:this.lastname,Email:this.email?this.email:"admin@citynet.ir",CompanyId:this.company,Mobile:this.select.name,MobileCode:this.select.code,LevelId:this.level,RoleId:this.role,SgroupId:this.sgroup,Status:"enabled",CommissionCategoryId:this.commissionCategoryId,id:this.editUserId},e=await this.axios.put(this.$store.state.baseUrl+"user",t);e.data.Success&&(this.snackbar=!0,this.snackbarText=this.$t("personalInfoChangedSuccessfully"),this.snackbarColor="success",this.getUser())}},async logout(){try{await this.axios(this.$store.state.baseUrl+"logout");this.$store.commit("authStore/setToken",""),this.$store.commit("authStore/setUser",!1),window.location="/"}catch(error){}},async changePassword(){this.$v.newpassword.$touch(),this.$v.oldpassword.$touch(),this.$v.confirmpassword.$touch();let t={OldPassword:this.oldpassword,NewPassword:this.newpassword,ConfirmPassword:this.confirmpassword};if(!this.$v.confirmpassword.$error&&!this.$v.oldpassword.$error&&!this.$v.newpassword.$error&&this.confirmpassword==this.newpassword)try{let e=await this.axios.put(this.$store.state.baseUrl+"user/changepassword",t);e.data.Success?this.$toast.success(this.$t("passwordChangedSuccessfully")):this.$toast.warning(this.$t("currentPasswordIsIncorrect"))}catch(error){this.$toast.warning(this.$t("currentPasswordIsIncorrect"))}},async getUser(){if(this.$route.query.accId)try{let t=await this.axios.get(this.$store.state.baseUrl+"user?id="+this.$route.query.accId);t.data.Items[0]?(this.selectedUser=t.data.Items[0],this.userNotFound=!1):this.userNotFound=!0}catch(error){console.error("Error:",error),this.userNotFound=!0}let t=await this.axios.get(this.$store.state.baseUrl+"parsetoken"),e=t.data.Items;this.name=e.name,this.lastname=e.family,this.editUserId=e.accountId,this.bankCardNumber=e.BankCard,this.shebaNumber=e.Sheba,this.email1=e.email,this.mobile=e.mobile,this.select={name:e.mobile,code:e.mobileCode},this.company=e.companyId,this.level=e.levelId,this.roleType=e.roleType,this.role=e.roleId,this.sgroup=e.sgroupId,this.status=e.Status,this.commissionCategoryId=e.commissionCategoryId}},watch:{user(){this.user||this.$store.commit("authStore/setSessionDialog",!0)}}},$e=ge,ke=(s("8d3c"),Object(z["a"])($e,h,v,!1,null,"1defbfb8",null));e["default"]=ke.exports},b44d:function(t,e,s){"use strict";s("19d1")},bdf1:function(t,e,s){},d2db:function(t,e,s){}}]);